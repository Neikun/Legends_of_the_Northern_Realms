-- This file has been generated by Dungeon Editor 1.3.6

--- level 1 ---

mapName("Third Seals")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
################################
##########....##################
##########.#####################
##########.#####################
##########.#####################
##########...###################
############.###################
############....################
############.##.################
##########........##############
############.##...##############
############.##...##############
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
###############.################
##############...###############
##############...###############
##############...###############
###############.################
]])
spawn("torch_holder", 16,28,0, "torch_holder_9")
	:addTorch()
spawn("temple_stairs_down", 15,27,0, "temple_stairs_down_6")
spawn("temple_door_iron", 15,31,0, "temple_door_iron_1")
spawn("sack", 14,28,0, "sack_1")
	:addItem(spawn("boiled_beetle"))	:addItem(spawn("mole_jerky"))	:addItem(spawn("pitroot_bread"))	:addItem(spawn("baked_maggot"))spawn("script_entity", 14,27,3, "mainStairsScript")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Adventurers, hold on to these and use them sparingly.\\nThe way down to the heart of the mountain\\nis dark and full of terrors.\")\
\
sack_1:addItem(message)")
spawn("knife", 16,28,1, "knife_1")
spawn("sandals", 14,30,2, "sandals_1")
spawn("peasant_tunic", 16,30,1, "peasant_tunic_1")
spawn("script_entity", 0,0,1, "sdp_module")
	:setSource("sdpEnable = false         -- Set this to false if you don't want to use sdp.\
sdpUseDefaultOnly = false   -- Set this to true if you only want to change the default party (not custom).\
sdpDefaultSats = false      --[[ Set this to true if the script should\
                     automatically set the stats(STR,INT...)\
                     based on race and class. ]]--\
function setDefaultParty()\
   \
   sdpSetChamp(1,true,12,\"ContarStonesKull\",\"Human\",\"Fighter\",\"male\",nil)\
   sdpSetChamp(2,true,12,\"Mork\",\"Minotaur\",\"Fighter\",\"male\",nil)\
   sdpSetChamp(3,true,12,\"Yennica Whitefeather\",\"Human\",\"Rogue\",\"female\",nil)\
   sdpSetChamp(4,true,12,\"Sancsaron\",\"Human\",\"Mage\",\"male\",nil)\
   \
   sdpStats(1, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpStats(2, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpStats(3, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpStats(4, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   \
   sdpEquip(1, nil,\"torch\", nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpEquip(2, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpEquip(3, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   sdpEquip(4, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil)\
   \
   sdpInventory(1,{})\
   sdpInventory(2,{})\
   sdpInventory(3,{})\
   sdpInventory(4,{})\
   \
   -- add custom party-scripts here\
   \
   sdpChamp(1):trainSkill(\"armors\",16,false)   \
   sdpChamp(1):trainSkill(\"swords\",23,false)   \
   sdpChamp(1):trainSkill(\"athletics\",5,false)   \
   sdpChamp(2):trainSkill(\"armors\",16,false)   \
   sdpChamp(2):trainSkill(\"axes\",23,false)   \
   sdpChamp(2):trainSkill(\"athletics\",5,false)\
   sdpChamp(3):trainSkill(\"dodge\",17,false)\
   sdpChamp(3):trainSkill(\"missile_weapons\",16,false)   \
   sdpChamp(3):trainSkill(\"throwing_weapons\",11,false)\
   sdpChamp(4):trainSkill(\"spellcraft\",10,false)   \
   sdpChamp(4):trainSkill(\"fire_magic\",25,false)   \
   sdpChamp(4):trainSkill(\"earth_magic\",25,false)\
   sdpChamp(4):trainSkill(\"ice_magic\",25,false)   \
   sdpChamp(4):trainSkill(\"air_magic\",25,false)\
   sdpChamp(4):trainSkill(\"staves\",20,false)\
   sdpChamp(1):removeItem(8) \
   sdpChamp(1):insertItem(7,spawn(\"spectral_blade\"))\
   sdpChamp(2):insertItem(7,spawn(\"battle_axe\"))\
   sdpChamp(4):insertItem(31,spawn(\"hint_book\"))\
   sdpChamp(4):insertItem(30,spawn(\"bestiary\",nil,nil,nil,nil,\"bestiary\"):setScrollText(\"The bestiary is empty. New monsters will be added\\n when discovered and killed.\"))\
   sdpChamp(3):insertItem(7,spawn(\"short_bow\"))\
   sdpChamp(3):insertItem(8,spawn(\"spectral_arrow\"))\
 \
-----\
end\
\
function sdpSetStatHuman(champID)\
   party:getChampion(champID):setStatMax(\"health\",60)\
   party:getChampion(champID):setStatMax(\"energy\",50)\
   party:getChampion(champID):setStatMax(\"strength\",10)\
   party:getChampion(champID):setStatMax(\"dexterity\",10)\
   party:getChampion(champID):setStatMax(\"vitality\",10)\
   party:getChampion(champID):setStatMax(\"willpower\",10)\
   party:getChampion(champID):setStatMax(\"resist_fire\",0)\
   party:getChampion(champID):setStatMax(\"resist_cold\",0)\
   party:getChampion(champID):setStatMax(\"resist_poison\",0)\
   party:getChampion(champID):setStatMax(\"resist_shock\",0)\
end\
\
function sdpSetStatMinotaur(champID)\
   party:getChampion(champID):setStatMax(\"health\",70)\
   party:getChampion(champID):setStatMax(\"energy\",42)\
   party:getChampion(champID):setStatMax(\"strength\",15)\
   party:getChampion(champID):setStatMax(\"dexterity\",6)\
   party:getChampion(champID):setStatMax(\"vitality\",14)\
   party:getChampion(champID):setStatMax(\"willpower\",7)\
   party:getChampion(champID):setStatMax(\"resist_fire\",0)\
   party:getChampion(champID):setStatMax(\"resist_cold\",8)\
   party:getChampion(champID):setStatMax(\"resist_poison\",8)\
   party:getChampion(champID):setStatMax(\"resist_shock\",0)\
end\
\
function sdpSetStatLizardman(champID)\
   party:getChampion(champID):setStatMax(\"health\",60)\
   party:getChampion(champID):setStatMax(\"energy\",47)\
   party:getChampion(champID):setStatMax(\"strength\",10)\
   party:getChampion(champID):setStatMax(\"dexterity\",12)\
   party:getChampion(champID):setStatMax(\"vitality\",10)\
   party:getChampion(champID):setStatMax(\"willpower\",9)\
   party:getChampion(champID):setStatMax(\"resist_fire\",2)\
   party:getChampion(champID):setStatMax(\"resist_cold\",0)\
   party:getChampion(champID):setStatMax(\"resist_poison\",0)\
   party:getChampion(champID):setStatMax(\"resist_shock\",2)\
end\
\
function sdpSetStatInsectoid(champID)\
   party:getChampion(champID):setStatMax(\"health\",55)\
   party:getChampion(champID):setStatMax(\"energy\",60)\
   party:getChampion(champID):setStatMax(\"strength\",8)\
   party:getChampion(champID):setStatMax(\"dexterity\",11)\
   party:getChampion(champID):setStatMax(\"vitality\",8)\
   party:getChampion(champID):setStatMax(\"willpower\",14)\
   party:getChampion(champID):setStatMax(\"resist_fire\",1)\
   party:getChampion(champID):setStatMax(\"resist_cold\",0)\
   party:getChampion(champID):setStatMax(\"resist_poison\",0)\
   party:getChampion(champID):setStatMax(\"resist_shock\",1)\
end\
\
function sdpSetChamp(champID, champAllow, champLevel, champName, champRace, champClass, champGender, champPortrait)\
   if champAllow ~= true then\
      party:getChampion(champID):setEnabled(champAllow)\
   end\
   if champName then\
      party:getChampion(champID):setName(champName)\
   end\
   if champRace then\
      party:getChampion(champID):setRace(champRace)\
   end\
   if champClass then\
      party:getChampion(champID):setClass(champClass)\
   end\
   if champGender then\
      party:getChampion(champID):setSex(champGender)\
   end\
   if champPortrait then\
      party:getChampion(champID):setPortrait(champPortrait)\
   end\
   if sdpDefaultSats then\
      if party:getChampion(champID):getRace() == \"Human\" then\
         sdpSetStatHuman(champID)\
         sdpCheckClass(champID)\
      elseif party:getChampion(champID):getRace() == \"Minotaur\" then\
         sdpSetStatMinotaur(champID)\
         sdpCheckClass(champID)\
      elseif party:getChampion(champID):getRace() == \"Lizardman\" then\
         sdpSetStatLizardman(champID)\
         sdpCheckClass(champID)\
      else\
         sdpSetStatInsectoid(champID)\
         sdpCheckClass(champID)\
      end\
   end\
   while party:getChampion(champID):getLevel() <= champLevel-1 do\
        party:getChampion(champID):levelUp()\
   end\
end\
\
function sdpEquip(champID, champLeftH, champRightH, champHelmet, champTorso, champLeg, champFeet, champCloak, champNeck, champGauntlet, champBracers)\
   if champLeftH then\
      party:getChampion(champID):insertItem(7,spawn(champLeftH))\
   end\
   if champRightH then\
      party:getChampion(champID):insertItem(8,spawn(champRightH))\
   end\
   if champHelmet then\
      party:getChampion(champID):insertItem(1,spawn(champHelmet))\
   end\
   if champTorso then\
      party:getChampion(champID):insertItem(2,spawn(champTorso))\
   end\
   if champLeg then\
      party:getChampion(champID):insertItem(3,spawn(champLeg))\
   end\
   if champFeet then\
      party:getChampion(champID):insertItem(4,spawn(champFeet))\
   end\
   if champCloak then\
      party:getChampion(champID):insertItem(5,spawn(champCloak))\
   end\
   if champNeck then\
      party:getChampion(champID):insertItem(6,spawn(champNeck))\
   end\
   if champGauntlet then\
      party:getChampion(champID):insertItem(9,spawn(champGauntlet))\
   end\
   if champBracers then\
      party:getChampion(champID):insertItem(10,spawn(champBracers))\
   end\
end\
\
function sdpStats(champID, champHealth, champEnergy, champStr, champDex, champVit, champWil, champProtection, champEvasion, champResFire, champResCold, champResPoison, champResShock)   \
   if champHealth then\
      party:getChampion(champID):setStatMax(\"health\",champHealth)\
   end\
   if champEnergy then\
      party:getChampion(champID):setStatMax(\"energy\",champEnergy)\
   end\
   if champStr then\
      party:getChampion(champID):setStatMax(\"strength\",champStr)\
   end\
   if champDex then\
      party:getChampion(champID):setStatMax(\"dexterity\",champDex)\
   end\
   if champVit then\
      party:getChampion(champID):setStatMax(\"vitality\",champVit)\
   end\
   if champWil then\
      party:getChampion(champID):setStatMax(\"willpower\",champWil)\
   end\
   if champProtection then\
      party:getChampion(champID):setStatMax(\"protection\",champProtection)\
   end\
   if champEvasion then\
      party:getChampion(champID):setStatMax(\"evasion\",champEvasion)\
   end\
   if champResFiret then\
      party:getChampion(champID):setStatMax(\"resist_fire\",champResFire)\
   end\
   if champResCold then\
      party:getChampion(champID):setStatMax(\"resist_cold\",champResCold)\
   end\
   if champResPoison then\
      party:getChampion(champID):setStatMax(\"resist_poison\",champResPoison)\
   end\
   if champResShock then\
      party:getChampion(champID):setStatMax(\"resist_shock\",champResShock)\
   end\
end\
\
function sdpInventory(champID, itemTable)\
   for v,i in ipairs(itemTable) do\
      party:getChampion(champID):insertItem(v+10,spawn(i))\
   end\
end\
\
function sdpCheckClass(champID)\
   if party:getChampion(champID):getClass() == \"Mage\" then\
      party:getChampion(champID):modifyStatCapacity(\"health\",-25)\
   elseif party:getChampion(champID):getClass() == \"Rogue\" then\
      party:getChampion(champID):modifyStatCapacity(\"health\",-15)\
   end\
end\
\
function sdpChamp(champID)\
   return party:getChampion(champID)\
end\
\
function sdpGetNextChamp()\
   for p=1,4 do\
      if party:getChampion(p):getEnabled() == false then\
         return p\
      end\
   end\
   return 0\
end\
\
if sdpEnable then\
   if sdpUseDefaultOnly and party:getChampion(1):getName() == \"ContarStonesKull\" then\
      setDefaultParty()\
   elseif sdpUseDefaultOnly == false then\
      setDefaultParty()\
   end\
end")
spawn("temple_pit", 16,12,3, "temple_pit_12")
spawn("temple_stairs_down", 13,3,1, "temple_stairs_down_19")
spawn("temple_door_portcullis", 11,11,1, "temple_door_portcullis_25")
spawn("temple_door_portcullis", 12,12,0, "temple_door_portcullis_21")
spawn("temple_door_portcullis", 13,11,3, "temple_door_portcullis_23")
spawn("temple_floor_ku_02", 11,11,3, "temple_floor_ku_02_9")
spawn("temple_mosaic_wall_ku_1", 11,11,0, "temple_mosaic_wall_ku_1_17")
spawn("temple_mosaic_wall_ku_2", 11,11,2, "temple_mosaic_wall_ku_2_16")
spawn("temple_pressure_plate", 10,11,3, "temple_pressure_plate_11")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_13", "open")
	:addConnector("activate", "temple_door_portcullis_14", "close")
	:addConnector("activate", "temple_door_portcullis_15", "close")
spawn("temple_mosaic_wall_dain_1", 13,11,0, "temple_mosaic_wall_dain_1_11")
spawn("temple_mosaic_wall_dain_1", 13,11,2, "temple_mosaic_wall_dain_1_8")
spawn("temple_pressure_plate", 14,11,3, "temple_pressure_plate_8")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_15", "open")
	:addConnector("activate", "temple_door_portcullis_14", "close")
	:addConnector("activate", "temple_door_portcullis_13", "close")
spawn("temple_floor_dain_02", 13,11,1, "temple_floor_dain_02_13")
spawn("cudgel", 14,28,3, "cudgel_2")
spawn("temple_alcove", 16,29,1, "temple_alcove_67")
	:addItem(spawn("hint_book"))
	:addConnector("deactivate", "hs_level_1", "hsMainStairs")
spawn("script_entity", 1,0,1, "coreScript")
	:setSource("-- ****************************************\
-- GRIMROCK STRIKES BACK CORE SCRIPT MODULE\
-- ****************************************\
\
initStart = false\
zone = \"mainStairs\"\
subZone = nil\
zoneLocations = {}\
hints = {}\
circlesLevel = {ku = 0, ros = 0, dain = 0}\
xpRewards = {\
\9firstSeal = 5000,\
\9secondSeal = 10000,\
\9thirdSeal = 15000,\
}\
coreHooks = {}\
\
-- *********************************\
-- Main Initialization\
-- *********************************\
\
function autoexec()\
\9my_hooks.activate()\
\9sdp_module.setDefaultParty()\
\9setZoneLocations()\
\9initStart = true\
\9setCoreTimers(0.25)\
\9for i, v in ipairs(coreHooks) do\
\9\9v()\
\9end\
end\
\
-- *********************************\
-- Core Functions\
-- *********************************\
\
function setZoneLocations()\
\9local markers = grimq.fromAllEntitiesInWorld()\
\9\9\9\9:where(\"name\", \"zone_marker\")\
\9\9\9\9:toIterator()\
\9\9\9\9\
\9for zMarker in markers do\
\9\9local level, x, y = zMarker.level, zMarker.x, zMarker.y\
\9\9local zKey = level..\".\"..x..\".\"..y\
\9\9zoneLocations[zKey] = zMarker.zone\
\9\9spawn(\"pressure_plate_hidden\", level, x, y, 0)\
\9\9\9:setTriggeredByParty(true)\
\9\9\9:setTriggeredByMonster(false)\
\9\9\9:setTriggeredByItem(false)\
\9\9\9:setSilent(true)\
\9\9\9:addConnector(\"activate\", \"coreScript\", \"setZone\")\
\9end\
end\
\
function setZone()\
\9local level, x, y = party.level, party.x, party.y\
\9local zKey = level..\".\"..x..\".\"..y\
\9if zoneLocations[zKey] ~= nil then\
\9\9local zParts = help.split(zoneLocations[zKey],'.')\
\9\9zone = zParts[1]\
\9\9if zParts[2] ~= nil then\
\9\9\9subZone = zParts[2]\
\9\9else\
\9\9\9subZone = nil\
\9\9end\
\9\9--print(zone,subZone)\
\9end\
\9setHintScroll()\
end\
\
function setCircleLevel(circle, level)\
\9circlesLevel[circle] = level\
end\
\
function getCircleLevel(circle)\
\9return circlesLevel[circle]\
end\
\
function setCoreTimers(timerInterval)\
\9levels = getMaxLevels()\
\9for i = 1, levels do\
\9\9spawn(\"timer\", i, 0, 0, 0, \"coreTimer_\"..i)\
\9\9\9:setTimerInterval(timerInterval)\
\9\9\9:addConnector(\"activate\", \"coreScript\", \"coreTimer\")\
\9\9\9:activate()\
\9end\
end\
\
function coreTimer(sourceTimer)\
\9if sourceTimer.level == party.level then\
\9\9lightTrack()\
\9end\
end\
\
function setCoreHooks(funct)\
\9table.insert(coreHooks, funct)\
end\
\
function getMonsterGroup(level, x, y)\
\9local monstersTable = {}\
\9for i in entitiesAt(level,x,y) do\
\9\9if i.class == \"Monster\" then\
\9\9\9table.insert(monstersTable, i)\
\9\9end\9\
\9end\
\9return monstersTable\
end\
\
-- *********************************\
-- Light Tracker\
-- *********************************\
\
lightLevel = 0\
\
function lightTrack(sourceTimer)\
\9if lightLevel > 0 then\
\9\9lightLevel = lightLevel - 0.25\
\9elseif lightLevel < 0 then\
\9\9lightLevel = lightLevel + 0.25\
\9end\
end\
\
function spellTrack(caster, spell)\
\9if spell == \"light\" then\
\9\9if lightLevel >= 0 then\
\9\9\9lightLevel = 600\
\9\9elseif lightLevel < 0 then\
\9\9\9lightLevel = 0\
\9\9end\
  \9end\
\9if spell == \"darkness\" then\
\9\9if lightLevel > 0 then\
\9\9\9lightLevel = 0\
\9\9elseif lightLevel <= 0 then\
\9\9\9lightLevel = -600\
\9\9end\
  \9end\
end\
\
function lightState()\
\9local lightReturn = false\
\9local currentItem\
    local champion\
    for champID=1,4 do\
      \9champion = party:getChampion(champID)\
      \9currentItem = champion:getItem(7)\
      \9if currentItem ~= nil then\
         \9if currentItem.name == \"torch\" and currentItem:getFuel() > 0 then\
\9\9\9\9\9lightReturn = true\
\9\9\9elseif currentItem.name == \"torch_everburning\" \
\9\9\9  or currentItem.name == \"magic_orb\" then\
\9            lightReturn = true\
\9        end\
      \9end\
      \9currentItem = champion:getItem(8)\
      \9if currentItem ~= nil then\
         \9if currentItem.name == \"torch\" and currentItem:getFuel() > 0 then\
\9\9\9\9\9lightReturn = true\
\9\9\9elseif currentItem.name == \"torch_everburning\" \
\9\9\9  or currentItem.name == \"magic_orb\" then\
\9            lightReturn = true\
\9        end\
      \9end\
   \9end\
\9if lightLevel > 0 then\
\9\9lightReturn = true\
\9end\
\9if lightLevel < 0 then\
\9\9lightReturn = false\
\9end\
\9return lightReturn\
end\
\
setCoreHooks(function()\
\9fw.addHooks(\"party\", \"lightTracker\",{\
\9\9onCastSpell = function(caster, spell)\
\9\9\9coreScript.spellTrack(caster, spell)\
\9\9end\9\
\9\9}\
\9)\
end)\
\
\
-- *********************************\
-- Item Functions\
-- *********************************\
\
equippedItems = {\
\9amulet_dark = false,\
\9amulet_light = false,\
}\
\
\
function setEquipState(itemId, state)\
\9equippedItems[itemId] = state\
\9--print(itemId, equippedItems[itemId])\
end\
\
function getEquipState(itemId)\
\9--print(itemId, equippedItems[itemId])\
\9return equippedItems[itemId]\
end\
\
\
-- //////// Randomized Loot ////////\
\
itemsTable = {\
   \"helm_light\",\
   \"greaves_light\",\
   \"frostbite_necklace_greater\",\
   \"lightning_blade\",\
   \"lurker_vest\",\
   \"chitin_mask\",\
}\
\
alcovesTable = {\
   temple_alcove_crossroads_ku,\
   temple_alcove_crossroads_ros,\
   temple_alcove_crossroads_dain,\
   temple_alcove_crossroads_gor,\
   temple_alcove_ruby_1,\
   temple_alcove_amethyst_1,\
}\
\
function distributeItems(iTable,dTable)\
   local targetIndex = 0\
   for i, v in ipairs(iTable) do\
      if # dTable > 0 then\
         targetIndex = math.random(# dTable)\
         dTable[targetIndex]:addItem(spawn(v))\
         --print(v,\" went to \",dTable[targetIndex].id)\
         table.remove(dTable,targetIndex)\
      end\
   end\
end\
      \
distributeItems(itemsTable,alcovesTable)\
\
\
-- //////// Amulet of Darkness ////////\
\
setCoreHooks(function()\
\9fw.addHooks(\"amulet_dark\",\"amuletOfDarkness\",{\
\9\9onEquipItem = function(champion, slot)\
\9\9\9print(champion, slot)\
\9\9\9if slot == 6 and coreScript.lightLevel > 0 then\
\9\9\9\9hudPrint(\"You cannot wear the Amulet of Darkness while a light spell is active.\")\9\9\
\9\9\9\9equipStopper.stopEquip(champion, slot)\
\9\9\9elseif slot == 6 then\
\9\9\9\9setEquipState(\"amulet_dark\", true)\
\9\9\9end\
\9\9end,\
\9\9onUnequipItem = function(champion, slot)\
\9\9\9setEquipState(\"amulet_dark\", false)\
\9\9end\
\9\9}\
\9)\
\9fw.addHooks(\"party\",\"amuletOfDarkness\",{\
\9\9onCastSpell = function(caster, spell)\
\9\9\9if spell == \"light\" then\
\9\9\9\9if getEquipState(\"amulet_dark\") then\
\9\9\9\9\9hudPrint(\"You cannot cast light spells while the Amulet of Darkness is worn.\")\
\9\9\9\9\9return false\
\9\9\9\9end\
\9\9\9end\
\9\9end\9\9\
\9\9}\
\9)\
end)\
\
\
-- *********************************\
-- Cluebook\
-- *********************************\
\
hints = {\
\9mainStairs = [[\
\9\9Main Stairwell\
\9\9\
\9\9This is the entrance of the dungeon, a staircase into the heart of the mountain.\
\9]],\
\9\
\9junction = [[\
\9The Junction\
\9\
\9You are at the Junction. All paths stem from here and lead back to this place. \
\9You must complete the three ways before heading down into the deep. \
\9\
\9A secret chamber above conceals a healing crystal.\
\9]],\
\9\
\9passageways = [[\
\9\9The Passageways\
\9\9\
\9\9These interconnecting corridors spawn across all upper levels, leading back to\
\9\9the Junction. They also provide easy access to the central healing crystal\
\9\9and bestiary.\
\9]],\
\9\
\9-- //// KU, First Circle ////\
\9\
\9ku_tomb = [[\
\9\9The Way of Ku-Dhaar - Tomb\
\9\9\
\9\9Beginning and ending of the Way of the Fighter, this area contains basic warrior\
\9\9supplies, as well as the Tomb of Ku-Dhaar.\
\9\9\
\9\9The Tomb holds one of the three keys to the Way of the Deep, and its\
\9\9door will open when you have mastered this path.\
\9]],\
\9\
\9ku_crypts = [[\
\9\9The Way of Ku-Dhaar, First Circle - Crypts\
\9\9\
\9\9This area of crypts is the resting place of Ku-Dhaar lieutnants, whose tombs\
\9\9hold the items required to open the First Circle's seal. Three iron keys are\
\9\9required to open the tombs, one is on this level, one is above, one lies below.\
\9\9\
\9\9The crypts are infested with undead, and more will come as you move in the\
\9\9corridors and hidden crypts open and close again. Beware the Redguard, \
\9\9stronger and immune to fire.\
\9\9\
\9\9There are three secrets in this area. One is within the tombs. The second must be\
\9\9accessed by a pit from above. The third holds a tome of Athletics - to find it,\
\9\9explore the dead's hidden alcoves.\
\
\9\9A hidden teleporter near the entrance provides a shortcut to the Second Circle\
\9\9if you have completed the First.\
\9]],\
\9\
\9ku_lowerChambers = [[\
\9\9The Way of Ku-Dhaar, First Circle - Lower Chambers\
\9\9\
\9\9The iron key lies yet below, but a trap blocks the passage. The levers to\
\9\9close the pits are hidden within the skeletons alcoves. Retreating will\
\9\9close the graves - stand your ground.\
\9\9\
\9\9A guarded chamber to the east holds an emerald key. As for the western\
\9\9chambers, ogres have made them their lair. Champions who dare to enter will\
\9\9gather some useful items.\
\9]],\
\9\
\9ku_lowerChamber_ogreLair = [[\
\9\9The Way of Ku-Dhaar, First Circle - Lower Chambers\
\9\9\
\9\9Ogres have made their lair in these chambers. Champions who dare to enter will\
\9\9gather some useful items.\
\9]],\
\9\
\9ku_cavern = [[\
\9\9The Way of Ku-Dhaar, First Circle - The Cavern\
\9\9\
\9\9Vast open space, moist and dark, the Cavern is a cold place infested\
\9\9with vermin. It is wise not to linger here. One of the iron keys can \
\9\9be found in this area, as well as various supplies.\
\9\9\
\9\9A healing crystal is hidden in the middle where all paths join.\
\9\9\9\
\9\9This sector of the Cavern also conceals two secrets, inspect the walls.\
\9]],\
\9\
\9ku_cavern_toLowerChambers = [[\
\9\9The Way of Ku-Dhaar, First Circle - The Cavern\
\9\9\
\9\9Vast open space, moist and dark, the Cavern is a cold place infested\
\9\9with vermin. It is wise not to linger here. \
\9\9\
\9\9There is only a teleporter here to go back to the level above.\
\9]],\
\9\
\9ku_mazeOfTheDead = [[\
\9\9The Way of Ku-Dhaar, First Circle - Maze of the Dead\
\9\9\
\9\9This area is home to a maze of tunnels inhabited by undead. One of the iron\
\9\9keys can be found inside. Beware of hidden teleporters, or you will be\
\9\9lost forever as well.\
\9\9\
\9\9One secret is concealed in a small supply room to the north which provides a\
\9\9resting place. Another lies within the maze, inspect walls closely.\
\9\9\
\9\9Deep in the maze also rests a powerful blade, yet thieves should stay clear.\
\9]],\
\9\
\9ku_mazeOfTheDead_silverSword = [[\
\9\9The Way of Ku-Dhaar, First Circle - Crypt of the Silversword\
\9\9\
\9\9A Silversword rests in this crypt. Stealing it will imprison you and release\
\9\9the powerful Redguards however. If you can defeat them, a secret button in\
\9\9one of the cells will open the way out.\
\9]],\
\9\
\9ku_crossroads = [[\
\9\9The Way of Ku-Dhaar - The Crossroads\
\9\9\
\9\9These corridors lead to the Crossroads, a nexus where all paths meet. Once in,\
\9\9the teleporter to the Junction is the only way out.\
\9]],\
\9\
\9ku_firstSeal = [[\
\9\9The Way of Ku-Dhaar, First Circle - The Seal\
\9\9\
\9\9Here is found the seal of the First Circle. To open it, you must retreive the\
\9\9iron bracelets from the graves of Ku-Dhaar's three lieutnants.\
\9\9\
\9\9Beware, an ogre roams in the corridors leading to the room, and there are\
\9\9guardians of the Seal.\
\9]],\
\9\
\9ku_firstSeal_ruby = [[\
\9\9The Way of Ku-Dhaar, First Circle - The Seal\
\9\9\
\9\9This iron door holds great treasure, but the ruby key required to open it lies\
\9\9in another path.\
\9]],\
\
\9-- //// ROS, First Circle ////\
\9\
\9ros_tomb = [[\
\9\9The Way of Zaros - Tomb\
\9\9\
\9\9Beginning and ending of the Way of the Rogue, this area contains basic thief\
\9\9supplies, as well as the Tomb of Zaros.\
\9\9\
\9\9The Tomb holds one of the three keys to the Way of the Deep, and its\
\9\9door will open when you have mastered this path.\
\9]],\
\9\
\9ros_firstTeaching =\9[[\
\9\9The Way of Zaros, First Circle - First Teaching\
\9\9\
\9\9The puzzle room here contains the first of the brass keys required to open the\
\9\9first seal of the Way of Zaros. Simply walking on the pressure plates will always\
\9\9close the way, reach through the gates and the solution will be yours - as the\
\9\9first teaching suggests, it is simpler than it appears.\
\9]],\
\9\
\9ros_firstTeaching_sling = [[\
\9\9The Way of Zaros, First Circle - First Teaching\
\9\9\
\9\9This small corridor holds a sling, but beware, a great spider guards it. After you\
\9\9defeat it, a teleporter still bars the way: attention to details and accurate timing\
\9\9are the key to pass through.\
\9]],\
\9\
\9ros_secondTeaching = [[\
\9\9The Way of Zaros, First Circle - Second Teaching\
\9\9\
\9\9As the second teaching instructs you, fast reflexes are needed to get through\
\9\9this room. A rotating teleportation field, three changing pits, a closing door:\
\9\9each goes at its own pace and you must time yourself carefully. The second\
\9\9brass key rests in an alcove in the middle of the pits sequence - grab it\
\9\9quickly!\
\9]],\
\9\
\9ros_secondTeaching_pit = [[\
\9\9The Way of Zaros, First Circle - Second Teaching\
\9\9\
\9\9There is only a teleporter here to the level above. A lever further inside the\
\9\9room opens the door to reach it.\
\9]],\
\9\
\9ros_thirdTeaching_corridors = [[\
\9\9The Way of Zaros, First Circle - Third Teaching, Corridors\
\9\9\
\9\9As the third teacing warns you, illusions will try to sway you from your path.\
\9\9The first section of this area consists of long corridors with spinners. Walls\
\9\9will also close to hinder you: to open the way, reach the opposite end of the\
\9\9corridor.\
\9\9\
\9\9A lair of Shrakk Torrs further away holds an amethyst key.\
\9\9\
\9\9There is a small secret room here near the entrance stairs, examine the walls \
\9\9closely, but further away.\
\9]],\
\9\
\9ros_thirdTeaching_winding = [[\
\9\9The Way of Zaros, First Circle - Third Teaching, The Winding Room\
\9\9\
\9\9As the third teacing warns you, illusions will try to sway you from your path.\
\9\9The second section of this area, the winding room, will change shape multiple\
\9\9times as you go clockwise or counterclockwise.\
\9\9\
\9\9A short bow rests all the way clockwise, but you must find the third brass key\
\9\9which lies counterclockwise before you can access it. The stairs to the next\
\9\9area are all the way counterclockwise.\
\9\9\
\9\9Beware, Spiders and the thougher Great Spiders infest these corridors.\
\9\9\
\9\9A small secret room lies in the middle. It is easy to find, altough there is more\
\9\9to it than meets the eye.\
\9]],\
\9\
\9ros_fourthTeaching = [[\
\9\9The Way of Zaros, First Circle - Fourth Teaching\
\9\9\
\9\9As the fourth teacing instructs you, you must act in the darkness and shadows\
\9\9if you wish to reach the fourth brass key. Beware however, as monsters creep\
\9\9in the dark.\
\9\9\
\9\9The two torches must be extinguished to solve the puzzle, as any light source \
\9\9on your own. One of the\9torches lies out of reach however... explore the room \
\9\9carefully.\
\9\9\
\9\9If you wish to cross the pit to reach the next area, again, find the \
\9\9means to your end.\
\9\9\
\9\9A small secret room lies in the northwestern corner, the button to open it is\
\9\9hidden in one of the monster's alcoves.\
\9]],\
\9\
\9ros_crossroads = [[\
\9\9The Way of Zaros - The Crossroads\
\9\9\
\9\9These corridors lead to the Crossroads, a nexus where all paths meet. Once in,\
\9\9the teleporter to the Junction is the only way out.\
\9]],\
\9\
\9ros_cavern = [[\
\9\9The Way of Zaros, First Circle - The Cavern\
\9\9\
\9\9Vast open space, moist and dark, the Cavern is a cold place infested\
\9\9with vermin. It is wise not to linger here. One of the iron keys can \
\9\9be found in this area, as well as various supplies.\
\9\9\
\9\9A healing crystal is hidden in the middle where all paths join.\
\9\9\
\9\9In the southwestern corner of this area lies a tome of throwing weapons, but \
\9\9beware, thieves will be hunted down.\
\9\9\9\
\9\9This sector of the Cavern also conceals one secret, inspect the walls.\
\9]],\
\
\9ros_fifthTeaching = [[\
\9\9The Way of Zaros, First Circle - Fifth Teaching\
\9\9\
\9\9A test of patience. Wait next to a teleportation field and it will disappear - \
\9\9but as the text warns you, the window of opportunity will be brief.\
\9\9Seize the right moment and the fifth brass key will be yours.\
\9]],\
\
\9ros_sixthTeaching = [[\
\9\9The Way of Zaros, First Circle - Fifth Teaching\
\9\9\
\9\9As the teaching instructs you, aim in the dark: there are two pressure plates to\
\9\9activate, and the walls will open, revealing the location of the sixth brass key.\
\9\9\
\9\9Be attentive, hidden teleporters and spinners will hinder your efforts in this\
\9\9area.\
\9]],\
\9\
\9ros_firstSeal = [[\
\9\9The Way of Zaros, First Circle - The Seal\
\9\9\
\9\9Here is found the seal of the First Circle. To open it, you must collect the six\
\9\9brass keys proving that you understood the six theachings of Zaros.\
\9\9\
\9\9Beware, the seal is guarded by a powerful creature.\
\9]],\
\9\
\9ros_firstSeal_emerald = [[\
\9\9The Way of Zaros, First Circle - The Seal\
\9\9\
\9\9This iron door holds great treasure, but the emerald key required to open it lies\
\9\9in another path.\
\9]],\
\9\
\9-- //// DAIN, First Circle ////\
\9\
\9dain_tomb = [[\
\9\9The Way of Eldain - Tomb\
\9\9\
\9\9Beginning and ending of the Way of the Mage, this area contains basic magical\
\9\9supplies, as well as the Tomb of Eldain.\
\9\9\
\9\9The Tomb holds one of the three keys to the Way of the Deep, and its\
\9\9door will open when you have mastered this path.\
\9]],\
\9\9\
\9dain_firstSeal = [[\
\9\9The Way of Eldain, First Circle - The Shrines & The Seal\
\9\9\
\9\9Here are found the four elemental shrines which form the seal of the First Circle. \
\9\9To open it, you must retreive the essences of the four elements from the \
\9\9laboratories and place them in the alcoves.\
\9\9\
\9\9The levers control where the teleporters lead.\
\9\9\
\9\9Beware, the seal is guarded.\
\9]],\
\
\9dain_firstSeal_entrance = [[\
\9\9The Way of Eldain, First Circle - The Shrines & The Seal\
\9\9\
\9\9The teleporter here leads to the four elemental shrines which form the seal of\
\9\9the First Circle.\
\9]],\
\9\
\9dain_firstSeal_amethyst = [[\
\9\9The Way of Eldain, First Circle - The Shrines & The Seal\
\9\9\
\9\9This iron door holds great treasure, but the amethyst key required to open it lies\
\9\9in another path.\
\9]],\
\9\
\9dain_airLab_1 = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory, Level 1\
\9\9\
\9\9One of the pressure plates opens the door to the next level. You must however \
\9\9use the\9teleporters while throwing items to solve the puzzle. One teleportation\
\9\9field is activated by the button inside the small cell, and fades away after\
\9\9a few seconds - you must act quickly.\
\9]],\
\9\
\9dain_airLab_2 = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory, Level 2\
\9\9\
\9\9You must avoid here the lightning bolts launched from the daemon heads. The\
\9\9way to the next lever is blocked by teleportation fields however. A secret\
\9\9button holds the key to the puzzle.\
\9\9\
\9\9The tome you see through a grating is accessed from below.\
\9]],\
\9\
\9dain_airLab_2_toAirLab_1 = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory, Level 2\
\9\9\
\9\9There is only a teleporter here to the level above.\
\9]],\
\9\
\9dain_airLab_2_tome = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory Archives\
\9\9\
\9\9You can find a Tome of Air here. The pit to the south leads to a secret, \
\9\9but\9be careful, it is a long jump. You can maybe find a\9corresponding\
\9\9pit on a lower level.\
\9]],\
\9\
\9dain_airLab_3 = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory, Level 3\
\9\9\
\9\9The main Air experiment room is found on this level. A trapped wyvern holds the\
\9\9round key to the next level. Beware - it is being teleported between both sides\
\9\9of the room and can launch deadly attacks from behind.\
\9\9\
\9\9A supply room provides a resting place to the north. The spectral launcher is\
\9\9also found here - you must open all sas doors between adjacent laboratories if\
\9\9the spell is to reach its destination.\
\9]],\
\9\
\9dain_airLab_3_tome = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory Archives\
\9\9\
\9\9A Tome of Air can be found in the archives, but it is guarded by a powerful\
\9\9wyvern that you must face in close quarters. You might have to wait until you\
\9\9are more powerful before accessing this area.\
\9]],\
\9\
\9dain_airLab_4 = [[\
\9\9The Way of Eldain, First Circle - Air Laboratory, Level 4\
\9\9\
\9\9The essence of Air rests on its altar on this level.\
\9]],\
\9\
\9dain_earthLab_1 = [[\
\9\9The Way of Eldain, First Circle - Earth Laboratory, Level 1\
\9\9\
\9\9Two herders simply guard the way to the next level.\
\9\9\
\9\9The pit here leads to a secret, but be careful, it is a long jump. You can maybe\
\9\9find a corresponding pit on a lower level.\
\9]],\
\9\
\9dain_fireLab_1 = [[\
\9\9The Way of Eldain, First Circle - Fire Laboratory, Level 1\
\9\9\
\9\9An Uggardian simply guards the way to the next level.\
\9]],\
\9\
\9dain_iceLab_1 = [[\
\9\9The Way of Eldain, First Circle - Ice Laboratory, Level 1\
\9\9\
\9\9Count to four, open the door. You must find the right teleportation sequence to\
\9\9jump to the room number four. A skelton archer guards there the lever that\
\9\9opens the way to the next level\
\9]],\
\9\
\9dain_crossroads = [[\
\9\9The Way of Eldain - The Crossroads\
\9\9\
\9\9These corridors lead to the Crossroads, a nexus where all paths meet. Once in,\
\9\9the teleporter to the Junction is the only way out.\
\9]],\
\9\
\9-- //// DAIN, Second Circle ////\
\9\
\9dain_secondCircle_corridors = [[\
\9\9The Way of Eldain, Second Circle\
\9\9\
\9\9These corridors connect the different areas of the Second Circle of the Way of the\
\9\9Mage. The Halls of Darkness lie below, the Halls of Light in the upper levels.\
\9]],\
\9\
}\
\
function setHintScroll()\
\
\9if subZone == nil then\
\9\9hintZone = zone\
\9else\
\9\9hintZone = zone..\"_\"..subZone\
\9end\
\
\9local hintText = hints[hintZone]\
\
\9for champCnt = 1,4 do\
\9\9for itemCnt = 11,31 do\
\9\9\9if party:getChampion(champCnt):getItem(itemCnt) ~= nil and hintText ~= nil and\
\9\9\9\9\9party:getChampion(champCnt):getItem(itemCnt).name == \"hint_book\" then\
\9\9\9\9party:getChampion(champCnt):getItem(itemCnt):setScrollText(hintText)\9\9\9\
\9\9\9end\
\9\9end\
\9end\
end")
spawn("pressure_plate_hidden", 15,29,1, "pressure_plate_hidden_61")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setSilent(true)
	:addConnector("activate", "script_entity_28", "rosPits")
spawn("pressure_plate_hidden", 12,11,1, "pressure_plate_hidden_60")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
spawn("script_entity", 0,0,3, "damageTracker")
	:setSource("--[[\
Diarmuid's Goromorg Shield script, Version 1.1\
\
Changelog:\
1.1 Shield visual effect now moves along if monster moves\
\9Shield sound effect is now played at monster's location\
\9Simplified monster properties table\
1.0 Initial release\
\
Readme:\
Add the following hooks to your monster(s):\
\9onDamage = function(self,damage,type)\
\9\9return damageTracker.shield(self,damage)\
\9end,\
\9\
\9onMove = function(self, direction)\
\9\9return damageTracker.createMoveTimer(self, direction)\
\9end,\
\9\
\9onDie = function(self)\
\9\9return damageTracker.clear(self)\
\9end,\
\9\
Then define the monster(s) in monstersTable below using the following properties:\
\
shield: sets how much damage the shield can take before breaking\
immunity: \"fire\", \"frost\", \"poison\", \"shock\" or \"none\"\
\9(If elemental, you will get a \"0\" over the monster, if \"none\", just the shield visual)\
shieldVAlign: adjusts the shield effect vertical alignment. Positive values go upwards.\
shieldSize: adjusts the size of the shield effect. Values below 1 = smaller, above 1 = larger.\
moveSpeed: adjusts the speed at which the shield moves with monster. Values below 1 = slower, above 1 = faster.\
\9\
]]\
\
damageTable = {}\
\
timersTable = {}\
\
monstersTable = {\
\9white_goromorg = {\
\9\9shield = 300,\
\9\9immunity = \"cold\",\
\9\9shieldVAlign = 0,\
\9\9shieldSize = 1,\
\9\9moveSpeed = 1,\
\9},\
}\
\
\
function shield(monster, damage)\
\9if damage > 0 then\
\9\9local shieldActive = false\
\9\9if damageTable[monster.id] == nil then\
\9\9\9damageTable[monster.id] = damage\
\9\9\9shieldActive = true\
\9\9elseif damageTable[monster.id] < monstersTable[monster.name].shield then\
\9\9\9damageTable[monster.id] = damageTable[monster.id] + damage\
\9\9\9shieldActive = true\
\9\9end\
\9\9if shieldActive == true then\
\9\9\9\
\9\9\9if monstersTable[monster.name].immunity ~= 'none' then\
\9\9\9\9damageTile(monster.level, monster.x, monster.y, monster.facing, 0, monstersTable[monster.name].immunity,0)\
\9\9\9end\
\9\9\9\
\9\9\9local fxId = monster.id..\".shield\"\
\9\9\9if findEntity(fxId) ~= nil then\
\9\9\9\9findEntity(fxId):destroy()\
\9\9\9end\
\9\9\9spawn(\"fx\", monster.level, monster.x, monster.y, monster.facing,fxId)\
\9\9\9findEntity(fxId):setParticleSystem(\"shield_glow\")\
\9\9\9local dx,dy = getForward(party.facing)\
\9\9\9local shieldSize = monstersTable[monster.name].shieldSize\
\9\9\9local shieldVAlign = monstersTable[monster.name].shieldVAlign\
\9\9\9findEntity(fxId):translate(-dx*0.6*shieldSize,shieldVAlign,dy*0.6*shieldSize)\
\9\9\9\
\9\9\9local timerId = monster.id..'.moveTimer'\
\9\9\9if findEntity(timerId) ~= nil then\
\9\9\9\9local mx, my = getForward(timersTable[timerId].direction)\
\9\9\9\9local moveSpeed = monstersTable[monster.name].moveSpeed\
\9\9\9\9local x, y = unpack(timersTable[timerId].position)\
\9\9\9\9findEntity(fxId):translate(mx*0.2*timersTable[timerId].tick*moveSpeed,0,-my*0.2*timersTable[timerId].tick*moveSpeed)\
\9\9\9\9if x ~= monster.x or y ~= monster.y then\
\9\9\9\9\9print(\"Translated\")\
\9\9\9\9\9findEntity(fxId):translate(-mx*3,0,my*3)\
\9\9\9\9end\
\9\9\9end\
\9\9\9if damageTable[monster.id] < monstersTable[monster.name].shield then\
\9\9\9\9playSoundAt(\"goromorg_shield_hit\", monster.level, monster.x, monster.y)\
\9\9\9else\
\9\9\9\9playSoundAt(\"goromorg_shield_break\", monster.level, monster.x, monster.y)\
\9\9\9end\
\9\9\9\
\9\9\9return false\
\9\9end\
\9\9return damage\
\9end\
end\
\
function clear(monster)\
\9damageTable[monster.id] = 0\
\9local fxId = monster.id..\".shield\"\
\9if findEntity(fxId) ~= nil then\
\9\9findEntity(fxId):destroy()\
\9end\
end\
\
function createMoveTimer(monster, direction)\
\9local level, x, y = monster.level, monster.x, monster.y\
\9local timerId = monster.id..'.moveTimer'\
\9if findEntity(timerId) ~= nil then\
\9\9findEntity(timerId):destroy()\
\9end\
\9local moveTimer = spawn('timer', level, x, y, 0, timerId)\
\9moveTimer:addConnector('activate', 'damageTracker', 'moveTimer')\
\9moveTimer:setTimerInterval(0.05)\
\9moveTimer:activate()\
\9timersTable[timerId] = {}\
\9timersTable[timerId].id = monster.id\
\9timersTable[timerId].direction = direction\
\9timersTable[timerId].position = {x, y}\
end\
\
function moveTimer(self)\
\9timerId = self.id\
\9if timersTable[timerId].tick == nil then\
\9\9timersTable[timerId].tick = 0\
\9end\
\9timersTable[timerId].tick = timersTable[timerId].tick + 1\
\9fxId = timersTable[timerId].id..'.shield'\
\9if findEntity(fxId) ~= nil then\
\9\9local dx, dy = getForward(timersTable[timerId].direction)\
\9\9local monster = findEntity(timersTable[timerId].id)\
\9\9local moveSpeed = monstersTable[monster.name].moveSpeed\
\9\9findEntity(fxId):translate(dx*0.2*moveSpeed,0,-dy*0.2*moveSpeed)\
\9end\
\9if timersTable[timerId].tick ==  15 then\
\9\9timersTable[timerId].tick = 0 \
\9\9self:destroy()\
\9end\
end\
\
autohook = {\
\
\9white_goromorg = {\
\9\
\9\9onDamage = function(self,damage,type)\
\9\9\9return damageTracker.shield(self,damage)\
\9\9end,\
\9\9\
\9\9onMove = function(self, direction)\
\9\9\9return damageTracker.createMoveTimer(self, direction)\
\9\9end,\
\9\9\
\9\9onDie = function(self)\
\9\9\9return damageTracker.clear(self)\
\9\9end,\
\9}\
}")
spawn("script_entity", 0,0,1, "my_hooks")
	:setSource("function activate()\
\9-- MONSTERS\
\9\
\9fw.addHooks('monsters','arrows',{\
\9\9onProjectileHit = function(self,projectile,damage,type)\
\9\9\9return arrowTracker.register(self,projectile)\
\9\9end,\
\9\9onDie = function(self)\
\9\9\9--return arrowTracker.clear(self)\
\9\9end,\
\9\9}\
\9)\
\9\
\9fw.addHooks('monsters','bestiary',{\
\9\9onDie = function(self)\
\9\9\9return bestiaryTracker.addMonster(self.name)\
\9\9end,\
\9\9}\
\9)\9\
\
\9fw.addHooks('fire_tentacles','gsb',{\9\
\9\9onDealDamage = function(self, champion, damage)\
\9\9\9if math.random() <= 0.4 then\
\9\9\9\9champion:setConditionCumulative(\"paralyzed\", 10)\
\9\9\9end\
\9\9end\
\9\9}\
\9)\
\9\
\9fw.addHooks('spider_great','gsb',{\9\9\
\9\9onDealDamage = function(self, champion, damage)\
\9\9\9if math.random() <= 0.4 then\
\9\9\9\9champion:setConditionCumulative(\"poison\", 40)\
\9\9\9end\
\9\9end\
\9\9}\
\9)\
\
\9-- UNDEAD\
\9fw.addHooks('skeleton_redguard','gsb',{\9\
\9\9onDealDamage = function (self, champion, damage)\
\9\9\9if champion:getItem(6)~= nil and champion:getItem(6).name == \"amulet_light\" then\
\9\9\9\9local toHit = math.random()\
\9\9\9\9if toHit < 0.5 then\
\9\9\9\9\9return false\
\9\9\9\9end\
\9\9\9end\
\9\9end\
\9\9}\
\9)\
\9\
\9fw.addHooks('skeleton_warrior','gsb',{\9\
\9\9onDealDamage = function (self, champion, damage)\
\9\9\9if champion:getItem(6)~= nil and champion:getItem(6).name == \"amulet_light\" then\
\9\9\9\9local toHit = math.random()\
\9\9\9\9if toHit < 0.5 then\
\9\9\9\9\9return false\
\9\9\9\9end\
\9\9\9end\
\9\9end\
\9\9}\
\9)\
\9\
\9\
\9-- PARTY\
\9\
\
\9fw.addHooks('party','light',{\9\
\9\9\
\9\9}\
\9)\9\
\9\
\9fw.addHooks('party','arrows',{\9\
\9\9onCastSpell = function(caster, spell)\
\9\9\9return arrowTracker.enchantArrows(caster,spell)\
\9\9end,\
\9\9}\
\9)\
\
end\
\
autohook = {\
\
\9white_goromorg = {\
\9\9onRangedAttack = function(self)\
\9\9\9local num = math.random()\
\9\9\9if num < 0.3 then\
\9\9\9\9exsp.spellSpawn(\"lightning_bolt\", self.id, self.facing,  55)\
\9\9\9elseif num < 0.8 then\
\9\9\9\9return exsp.spellSpawn(\"frostbolt\", self.id, self.facing,  70)\
\9\9\9else\
\9\9\9\9return exsp.spellSpawn(\"fireball\", self.id, self.facing,  55)\
\9\9\9\9\
\9\9\9end\
\9\9end\
\9},\
\
\9\
}\
\
function autoexec()\
\9--exsp.defineRangedAttack('isgardian', 30, 5, \"improved_frostbolt\")\
end")
spawn("script_entity", 0,0,3, "arrowTracker")
	:setSource("-- Diarmuid's arrowTracker script, Version 1.02\
-- JKos's Log Framework and Xanathars' grimQ modules required\
--\
-- Changelog \
-- 1.02 Implemented grimq methods\
-- 1.01 Fixed save game serialization crash\
-- 1.0 Initial release\
\
arrowsTable = {}\
aClear = {}\
standardAssets = {\"arrow\",\"cold_arrow\",\"fire_arrow\",\"poison_arrow\",\
\9\9\9\"shock_arrow\", \"quarrel\", \"cold_quarrel\", \"fire_quarrel\", \
\9\9\9\"poison_quarrel\",\"shock_quarrel\"}\
\
\
function register(monster, projectile)\
\
\9-- Check if projectile is an arrow/quarrel. Custom arrows/quarrels must\
\9--   have \"arrow\" or \"quarrel\" in the item name (uiName can be anything \
\9--   of course). If not a missile weapon, let it through:\
\9\
\9if string.find(projectile.name,\"arrow\") == nil and string.find(projectile.name,\"quarrel\") == nil then\
\9\9return true\
\9end\
\
\9-- Check if it's a standard asset arrow/quarrel and let it through\
\9--   so that it can revert:\
\9\
\9if grimq.fromArray(standardAssets)\
\9\9\9\9:any(function(v) return v==projectile.name; end) == true then\
\9\9return true\
\9end\
\
\9-- Now that we know that the projectile is a custom projectile,\
\9--   store it in the table and destroy it:\
\9\
\9if arrowsTable[monster.id] == nil then\
\9\9arrowsTable[monster.id] = {}\
\9end\
\9table.insert(arrowsTable[monster.id],projectile.name)\
\9return true\
end\
\
function clear(monster)\
\
\9if aClear[monster.id] == nil then\
\9\9aClear[monster.id] = {}\
\9end\
\9\
\9table.insert(aClear[monster.id],monster.level)\
\9table.insert(aClear[monster.id],monster.x)\
\9table.insert(aClear[monster.id],monster.y)\
\9table.insert(aClear[monster.id],monster.facing)\
\9\
\9-- Set respawn of stored projectiles 0.1s after monster death:\
\9\
\9local clearTimer = timers:create(monster.id..'_clearTimer')\
\9clearTimer:setTimerInterval(0.1)\
\9clearTimer:addCallback(\
\9\9function(self,monsterId)\
\9\9\9if arrowTracker.arrowsTable[monsterId]  ~= nil then\
\9\9\9\
\9\9\9\9-- get stored monsters\
\9\9\9\9\
\9\9\9\9local monsterLevel = arrowTracker.aClear[monsterId][1]\
\9\9\9\9local monsterX = arrowTracker.aClear[monsterId][2]\
\9\9\9\9local monsterY = arrowTracker.aClear[monsterId][3]\
\9\9\9\9local monsterFacing = arrowTracker.aClear[monsterId][4]\
\9\9\9\9\9\
\9\9\9\9-- fix any custom reverted projectiles to normal models:\
\9\9\9\9\
\9\9\9\9local droppedItems = grimq.fromEntitiesAround(monsterLevel,monsterX,monsterY, 2, true):toArray()\
\9\9\9\9local arrowDestroyed\
\9\9\9\9\
\9\9\9\9for i,v in ipairs(droppedItems) do\9\9\9\
\9\9\9\9\9arrowDestroyed = false\
\9\9\9\9\9if v.name == \"arrow\" then\
\9\9\9\9\9\9spawn(\"arrow\",monsterLevel,monsterX,monsterY,monsterFacing)\
\9\9\9\9\9\9arrowDestroyed = true\
\9\9\9\9\9\9v:destroy()\
\9\9\9\9\9end\
\9\9\9\9\9if arrowDestroyed == false and v.name == \"quarrel\" then\
\9\9\9\9\9\9spawn(\"quarrel\",monsterLevel,monsterX,monsterY,monsterFacing)\
\9\9\9\9\9\9v:destroy()\
\9\9\9\9\9end\
\9\9\9\9end\9\9\9\
\9\9\9\9\9\
\9\9\9\9-- spawn stored custom projectiles and destroys equivalent number of reverted ones:\
\9\9\9\9\
\9\9\9\9for k,v in ipairs(arrowTracker.arrowsTable[monsterId]) do\
\9\9\9\9\9spawn(v,monsterLevel,monsterX,monsterY,monsterFacing)\
\9\9\9\9\9arrowDestroyed = false\
\9\9\9\9\9droppedItems = grimq.fromEntitiesAround(monsterLevel,monsterX,monsterY, 2, true)\
\9\9\9\9\9\9\9\9\9:where(grimq.isItem)\
\9\9\9\9\9\9 \9\9\9:toIterator()\
\9\9\9\9\9if string.find(v,\"arrow\") ~= nil then\
\9\9\9\9\9\9for i in droppedItems do\
\9\9\9\9\9\9\9if i.name == \"arrow\" and arrowDestroyed == false then\
\9\9\9\9\9\9\9\9i:destroy()\
\9\9\9\9\9\9\9\9arrowDestroyed = true\
\9\9\9\9\9\9\9end\
\9\9\9\9\9\9end\
\9\9\9\9\9end\
\9\9\9\9\9if string.find(v,\"quarrel\") ~= nil  then\
\9\9\9\9\9\9for i in droppedItems do\
\9\9\9\9\9\9\9if i.name == \"quarrel\" and arrowDestroyed == false then\
\9\9\9\9\9\9\9\9i:destroy()\
\9\9\9\9\9\9\9\9arrowDestroyed = true\
\9\9\9\9\9\9\9end\
\9\9\9\9\9\9end\
\9\9\9\9\9end\
\9\9\9\9end\
\9\9\9\9\
\9\9\9\9-- clear tables:\
\9\9\9\9\
\9\9\9\9for k,v in ipairs(arrowTracker.arrowsTable[monsterId]) do\
\9\9\9\9\9table.remove(arrowTracker.arrowsTable[monsterId],k)\
\9\9\9\9end\
\9\9\9\9for k,v in ipairs(arrowTracker.aClear[monsterId]) do\
\9\9\9\9\9table.remove(arrowTracker.aClear[monsterId],k)\
\9\9\9\9end\
\9\9\9end\
\9\9end,\
\9\9{monster.id}\
\9)\
\9clearTimer:setTickLimit(1)\
\9clearTimer.destroy = true\
\9clearTimer:activate()\
end\
\
function enchantArrows(caster,spell)\
\9local arrowCast = true\
\9\
\9-- Check if caster has a normal asset arrow or quarrel for enchanting, \
\9--   if not, prevent casting\9\
\9\
\9if spell == \"enchant_fire_arrow\" or spell == \"enchant_frost_arrow\" \
\9  or spell == \"enchant_shock_arrow\" or spell == \"enchant_poison_arrow\" then\
\9\9local currentItem\
\9\9arrowCast = false\
\9\9currentItem = caster:getItem(7)\
\9\9if currentItem ~= nil and grimq.fromArray(standardAssets)\
\9\9\9\9:any(function(v) return v==currentItem.name; end) then\
\9\9\9arrowCast = true\
\9\9end\
\9\9currentItem = caster:getItem(8)\
\9\9if currentItem ~= nil and grimq.fromArray(standardAssets)\
\9\9\9\9:any(function(v) return v==currentItem.name; end) then\
\9\9\9arrowCast = true\
\9\9end\
\9\9if arrowCast == false then\
\9\9\9hudPrint(\"Wrong ammo type!\")\
\9\9end\
\9end\
\9\
\9return arrowCast\
end")
spawn("script_entity", 0,0,2, "spectralTracker")
	:setSource("-- Diarmuid's SpectralTracker script, Version 1.0\
-- JKos's Log Framework and Xanathars' grimQ modules required\
--\
-- Changelog \
-- 1.0 Initial release\
\
lastWeaponUsed = nil\
spellCaster = 0\
spectralBoltPower = 40\
spectralBoltSpeed = 10\
spectralWeaponsHitNormalMonsters = true\
spectralMonsters = {\
\9\"light_elemental\",\
\9}\
spectralWeapons = {\
\9\"spectral_blade\",\
\9\"spectral_bolt\",\
\9\"spectral_arrow\",\
\9}\
\
function spectralDamage(monster, damage, type)\
\9if grimq.fromArray(spectralMonsters)\
\9\9\9\9:any(function(v) return v==monster.name; end) == true then\
\9\9if lastWeaponUsed == nil then\
\9\9\9return false\
\9\9elseif grimq.fromArray(spectralWeapons)\
\9\9\9\9:any(function(v) return v==lastWeaponUsed; end) == true then\
\9\9\9lastWeaponUsed = nil -- to prevent damageTile infinite loop\
\9\9\9damageTile(monster.level,monster.x,monster.y,monster.facing,1, \"physical\",damage)\
\9\9elseif lastWeaponUsed == \"spectralTrackerFakeDamage\" then\
\9\9\9lastWeaponUsed = nil -- to prevent damageTile infinite loop\
\9\9\9return true\
\9\9else\
\9\9\9lastWeaponUsed = \"spectralTrackerFakeDamage\" -- to allow fake damage to go through once\
\9\9\9damageTile(monster.level,monster.x,monster.y,monster.facing,0, \"cold\",1) -- to generate fake 0 damage\
\9\9\9return false\9\9\
\9\9end\
\9else\
\9\9if lastWeaponUsed == \"spectral_bolt\" then\
\9\9\9return false -- This prevents fake spectral_bolt_effect from dealing damage to normal monsters\
\9\9elseif spectralWeaponsHitNormalMonsters == false and \
\9\9\9\9\9grimq.fromArray(spectralWeapons)\
\9\9\9\9\9:any(function(v) return v==lastWeaponUsed; end) == true then\
\9\9\9return false -- This prevents spectral weapons to damage normal monsters if flag is set to false\
\9\9end\
\9end\
\9return true\
end\
\
function lastWeapon(champion, weapon)\
\9if weapon ~= nil then\
\9\9lastWeaponUsed = weapon.name\
\9else\
\9\9lastWeaponUsed = \"unarmed\"\
\9end\
end\
\
function castSpectralBolt(caster,x,y,direction,skill)\
\9local dx,dy = getForward(party.facing)\
\9shootProjectile('spectral_bolt', party.level, x+dx, y+dy, direction, spectralBoltSpeed, 0, 0, 0, 0, 0, 10, party, true)\
\9spawn(\"spectral_bolt_effect\",party.level, party.x+dx, party.y+dy, direction)\
\9spellCaster = caster:getOrdinal()\
\9lastWeaponUsed = \"spectral_bolt\"\
end\
\
function spectralBoltOnProjectileHitHook(monster,projectile)\
\9lastWeaponUsed = projectile.name\
\9if projectile.name == 'spectral_bolt' then\
\9\9if grimq.fromArray(spectralMonsters)\
\9\9\9\9\9:any(function(v) return v==monster.name; end) == true then\
\9\9\9local originator = 2 ^ (spellCaster+1)\
\9\9\9lastWeaponUsed = \"spectral_bolt\"\
\9\9\9damageTile(monster.level,monster.x,monster.y,(monster.facing + 2)%4,originator+1, 'physical', 40)\
\9\9end\
\9\9return false\
   end\
end\
\
-- AUTOHOOKS\
\
autohook = \
{\
\9party =\
\9{\9\
\9\9onAttack = function(champion, weapon)\
\9\9\9return spectralTracker.lastWeapon(champion, weapon)\
\9\9end,\
\9},\
\9\
\9monsters =\
\9{\
\9\9onDamage = function(self,damage,type)\
\9\9\9return spectralTracker.spectralDamage(self,damage,type)\
\9\9end,\
\9\9\
\9\9onProjectileHit = function(monster,projectile)\
\9\9\9return spectralTracker.spectralBoltOnProjectileHitHook(monster,projectile)\
\9\9end,\
\9}\
}")
spawn("script_entity", 0,0,3, "bestiaryTracker")
	:setSource("bestiaryTable = {}\
bestiaryDefinitions = {\
\9skeleton_redguard = \"mod_assets/textures/bestiary/bestiary_redguard.tga\",\
\9spider_great = \"mod_assets/textures/bestiary/bestiary_great_spider.tga\",\
\9}\
bestiaryKilled = {}\
currentPage = 0\
\
function flipPage(self)\
\9if currentPage > 0 then\
\9\9currentPage = currentPage + 1\
\9\9if currentPage > # bestiaryTable then\
\9\9\9currentPage = 1\
\9\9end\
\9\9setImage()\
\9\9playSound(\"map_turn_page\")\
\9end\
end\
\
function addMonster(monsterName)\
\9if bestiaryKilled[monsterName] == nil then\
\9\9bestiaryKilled[monsterName] = true\
\9\9if bestiaryDefinitions[monsterName] ~= nil then\
\9\9\9table.insert(bestiaryTable, bestiaryDefinitions[monsterName])\
\9\9\9hudPrint(\"New monster added to bestiary!\")\
\9\9\9playSound(\"level_up\")\
\9\9\9currentPage = # bestiaryTable\
\9\9\9setImage()\
\9\9end\
\9end\
end\
\
function setImage()\
\9if findEntity(\"bestiary\") ~= nil then\
\9\9findEntity(\"bestiary\"):setScrollImage(bestiaryTable[currentPage])\
\9else\
\9\9local itemCnt = 11\
\9\9local champCnt = 1\
   \
\9\9while champCnt <= 4 do\
\9\9\9itemCnt = 11\
\9\9\9while itemCnt <= 31 do\
\9\9\9\9if party:getChampion(champCnt):getItem(itemCnt) ~= nil then\
\9\9\9\9\9if party:getChampion(champCnt):getItem(itemCnt).name == \"bestiary\" then\
\9\9\9\9\9\9party:getChampion(champCnt):getItem(itemCnt):setScrollImage(bestiaryTable[currentPage])\
\9            \9end\
 \9        \9end\
  \9\9       \9itemCnt = itemCnt + 1\
    \9\9  \9end\
      \9\9champCnt = champCnt + 1\
\9\9end\
\9end\
end")
spawn("script_entity", 0,0,0, "logfw_init")
	:setSource("spawn(\"LoGFramework\", party.level,1,1,0,'fwInit')\
fwInit:open() \
-- timer will call this method automatically  0.1 seconds after the game is started\
function main()\
   fw.debug.enabled = false\
   fwInit:close() --must be called\
end\
\
function autoexec()\
\
end")
spawn("zone_marker", 15,30,1, "zone_marker_1")
	:setSource("zone = \"mainStairs\"")
spawn("script_entity", 0,0,0, "equipStopper")
	:setSource("-- Diarmuid's Equip/Unequip Stopper\
-- v1.0\
\
timersTable = {}\
\
function stopEquip(champion, slot)\
\9-- Remove item\
\9champion:removeItem(slot)\
\9-- Call delay function\
\9item = getMouseItem()\
\9createDelayTimer(item.name, item.id, champion:getOrdinal(), slot, \"equip\")\
end\
\
function stopUnequip(champion, slot)\
\9-- Remove item\
\9setMouseItem(nil)\
\9-- Call delay function\
\9item = champion:getItem(slot)\
\9createDelayTimer(item.name, item.id, champion:getOrdinal(), slot, \"unequip\")\
end\
\
function createDelayTimer(itemName, itemId, championOrdinal, slot, type)\
\9-- Create Timer\
\9local timerId = itemId..\".delay\"\
\9if findEntity(timerId) ~= nil then\
\9\9findEntity(timerId):destroy()\
\9end\
\9local delayTimer = spawn(\"timer\", party.level, party.x, party.y, 0, timerId)\
\9delayTimer:addConnector('activate', 'equipStopper', 'timerCallback')\
\9delayTimer:setTimerInterval(0.01)\
\9delayTimer:activate()\
\9\
\9-- Pack timer callback arguments\
\9timersTable[timerId] = {}\
\9timersTable[timerId].itemName = itemName\
\9timersTable[timerId].itemId = itemId\
\9timersTable[timerId].championOrdinal = championOrdinal\
\9timersTable[timerId].slot = slot\
\9timersTable[timerId].type = type\
end\
\
function timerCallback(self)\
\9-- Unpack timer callback arguments\
\9timerId = self.id\
\9itemName = timersTable[timerId].itemName\
\9itemId = timersTable[timerId].itemId\
\9championOrdinal = timersTable[timerId].championOrdinal\
\9slot = timersTable[timerId].slot\
\9type = timersTable[timerId].type\
\
\9-- Numerical Id renamer by jKos\
\9if (itemId and string.find(itemId, \"^%d+$\")) then\
\9\9itemId = nil\
\9end\
\9\
\9-- Respawn item\
\9if type == \"equip\" then\
\9\9setMouseItem(spawn(itemName, nil, nil, nil, nil, itemId))\
\9elseif type == \"unequip\" then\
\9\9local champion\
\9\9for i = 1,4 do\
\9\9\9if party:getChampion(i):getOrdinal() == championOrdinal then\
\9\9\9\9champion = party:getChampion(i)\
\9\9\9end\
\9\9end\
\9\9champion:insertItem(slot,spawn(itemName, nil, nil, nil, nil, itemId))\
\9end\
\9\
\9-- Destroy timer\
\9self:destroy()\
end\
")
spawn("script_entity", 0,3,2, "grimwold_spell_script")
	:setSource("function autoexec()\
\
-- common functions and variables --\
\
allMonsters = {\"crab\", \"crowern\", \"stealer_bird\", \"goromorg\", \"green_slime\", \"herder\", \"herder_big\", \"herder_small\", \"herder_swarm\", \"ice_lizard\", \"molt_slime\", \"ogre\", \"scavenger\", \"scavenger_swarm\", \"shrakk_torr\", \"skeleton_archer\", \"skeleton_archer_patrol\", \"skeleton_warrior\", \"snail\", \"shiny_snail\", \"spider\", \"uggardian\", \"warden\", \"wyvern\"}\
\
function isInTable(table, element)\
  for _,value in pairs(table) do\
    if value == element then\
      return true\
    end\
  end\
  return false\
end\
\
function whichMonster(level,eggs,why)\
  for i in entitiesAt(level,eggs,why) do\
    if isInTable(allMonsters,i.name) then\
      return i.id\
    end\
  end\
  return \"\"\
end\
\
\
function monsterThere(level,eggs,why)\
  for i in entitiesAt(level,eggs,why) do\
    if isInTable(allMonsters,i.name)\
    then\
      return true\
    end\
  end\
  return false\
end\
\
\9\9\
-- Antimagic Zone functions --\
\
\
-- Area of Effect Spells --\
\
function stormSpell(ordinal,effect,particle,sound,damage,area)\
  local dx,dy = getForward(party.facing) -- forward\
  local ldx,ldy = getForward((party.facing+3)%4) -- left\
  local rdx,rdy = getForward((party.facing+1)%4) -- right\
  local originator = 2 ^ (ordinal+1)\
  local effect_translation_table = {fire = 1 , cold = 1, shock = 1, poison = 1 }\
  local coords = {}\
  if area == \"square\" then\
    coords = {xcoord = {-1,-1,-1,0,0,1,1,1},ycoord = {-1,0,1,-1,1,-1,0,1}}\
  elseif area == \"bigsquare\" then\
    coords = {xcoord = {-2,-2,-2,-2,-2,-1,-1,-1,-1,-1,0,0,0,0,1,1,1,1,1,2,2,2,2,2},ycoord = {-2,-1,0,1,2,-2,-1,0,1,2,-2,-1,1,2,-2,-1,0,1,2,-2,-1,0,1,2}}\
  elseif area == \"cone\" then\
    coords = {xcoord = {dx,2*dx,2*dx+ldx,2*dx+rdx,3*dx,3*dx+2*ldx,3*dx+ldx,3*dx+rdx,3*dx+2*rdx},ycoord = {dy,2*dy,2*dy+ldy,2*dy+rdy,3*dy,3*dy+2*ldy,3*dy+ldy,3*dy+rdy,3*dy+2*rdy}}\
  elseif area == \"smallcone\" then\
    coords = {xcoord = {dx+ldx,dx,dx+rdx},ycoord = {dy+ldy,dy,dy+rdy}}\
  elseif area == \"line\" then\
    coords = {xcoord = {dx,2*dx,3*dx},ycoord = {dy,2*dy,3*dy}}\
  else\
    coords = {xcoord = {dx},ycoord = {dy}}\
  end\
  local coord_pairs = math.min(#coords[\"xcoord\"],#coords[\"ycoord\"])\
  for i = 1,coord_pairs do\
    if particle == \"poison_cloud\" or particle == \"ice_shards\" or particle == \"one_ice_shard\" then\
      spawn(particle,party.level, party.x + coords[\"xcoord\"][i], party.y + coords[\"ycoord\"][i], party.facing)\
    else\
      spawn(\"fx\", party.level, party.x + coords[\"xcoord\"][i], party.y + coords[\"ycoord\"][i], party.facing)\
        :setParticleSystem(particle)\
        :translate(0, effect_translation_table[effect], 0)\
      playSoundAt(sound, party.level, party.x + coords[\"xcoord\"][i], party.y + coords[\"ycoord\"][i])\
    end\
    damageTile(party.level, party.x + coords[\"xcoord\"][i], party.y + coords[\"ycoord\"][i], party.facing, originator , effect, damage)\
  end\
end\
\
\
end")
spawn("starting_location", 15,28,0, "starting_location_1")

--- level 2 ---

mapName("Upper Temple")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
################################
#############....###############
##############..################
#############.....##.###########
#############.....##.###########
#############........###########
#############.....##############
#############.....##############
#############..#..##############
#############...#.##############
#############..#..##############
#############.....##############
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
###############.################
###############.################
###############.################
###############.################
################################
################################
################################
################################
]])
spawn("temple_stairs_down", 15,24,0, "temple_stairs_down_5")
spawn("temple_stairs_up", 15,27,2, "temple_stairs_up_6")
spawn("temple_pit", 16,12,3, "temple_pit_11")
spawn("temple_stairs_down", 16,3,1, "temple_stairs_down_18")
spawn("temple_pillar", 15,4,0, "temple_pillar_26")
spawn("temple_wall_grating", 14,4,0, "temple_wall_grating_21")
spawn("temple_wall_grating", 15,4,0, "temple_wall_grating_22")
spawn("temple_stairs_up", 13,3,3, "temple_stairs_up_19")
spawn("temple_pit", 16,10,0, "temple_pit_74")
spawn("temple_stairs_down", 15,11,1, "temple_stairs_down_51")

--- level 3 ---

mapName("Second Seals")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
################################
################....############
##################.###.#########
############.......#############
############.###################
##########...#.#################
##########.#......##############
############..###.##############
################...#############
###############....#############
################...#############
#################.##############
#################.##############
#############.........##########
#################.##############
#################...############
###################.############
#.################...###########
#.###############.....##########
#.#############.#..#.....#######
###############.#.....##.#######
###############.##...###..######
###############.#######...######
#######################...######
####################.#..########
########.###########.#..########
#######...##########...#########
#######...######################
########.#######################
####.....#######################
]])
spawn("temple_stairs_up", 16,3,3, "temple_stairs_up_3")
spawn("rock", 15,22,1, "rock_1")
spawn("temple_pit", 16,12,3, "temple_pit_10")
spawn("temple_stairs_down", 15,21,0, "temple_stairs_down_17")
spawn("temple_stairs_up", 15,24,2, "temple_stairs_up_18")
spawn("temple_pit", 19,3,3, "temple_pit_50")
spawn("temple_pit", 14,7,3, "temple_pit_53")
spawn("temple_wall_grating", 18,3,1, "temple_wall_grating_43")
spawn("temple_pit", 16,10,0, "temple_pit_75")
spawn("temple_stairs_down", 1,21,2, "temple_stairs_down_49")
spawn("temple_stairs_down", 8,27,0, "temple_stairs_down_50")
spawn("temple_stairs_up", 15,11,3, "temple_stairs_up_50")
spawn("temple_wall_grating", 14,8,0, "temple_wall_grating_58")
spawn("temple_pit", 18,10,0, "temple_pit_77")
spawn("temple_pit", 18,12,0, "temple_pit_78")
spawn("temple_stairs_down", 10,8,2, "temple_stairs_down_56")
spawn("temple_stairs_down", 20,26,0, "temple_stairs_down_4")
spawn("temple_pit", 25,23,2, "temple_pit_86")

--- level 4 ---

mapName("Upper Chambers")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
################################
################################
######################.#########
################################
################################
##############.#################
##########.#####################
##########.#####################
##########.#####...#############
##########....##.#.###...#######
##.#############...##.....######
##.##################......#####
#..###################...#.#####
#.########...#########...#.#####
#.#####################.########
#.################..........####
##............#.##.######...####
##.##########.#.#..#........#..#
##.##########.#.#..#...####.#..#
##.##########.#.##.#......#...##
##.##########.###..####...#...##
##.##.....#...............###.##
##.####.##.##.#..#.####.###...##
##.####.##....#..........##..###
##.####.####.....#.#.###.##..###
##.#########.#.#...#.#.#.#######
##.#########.#########.#.#######
##.#########.#########...#######
##...........###################
################################
]])
spawn("temple_stairs_up", 15,21,2, "temple_stairs_up_53")
spawn("temple_stairs_down", 15,18,0, "temple_stairs_down_54")
spawn("temple_pit", 16,10,2, "temple_pit_57")
spawn("temple_pit", 16,12,0, "temple_pit_79")
spawn("temple_pit", 18,12,0, "temple_pit_80")
spawn("temple_pit", 18,10,0, "temple_pit_81")
spawn("temple_stairs_down", 13,11,1, "temple_stairs_down_55")
spawn("temple_stairs_up", 10,8,0, "temple_stairs_up_54")
spawn("temple_stairs_up", 20,27,2, "temple_stairs_up_55")
spawn("temple_stairs_down", 22,27,0, "temple_stairs_down_48")
spawn("temple_stairs_down", 1,17,2, "temple_stairs_down_57")
spawn("gobelin_ku", 1,15,3, "gobelin_ku_1")
spawn("gobelin_ku", 1,15,1, "gobelin_ku_2")
spawn("torch_holder", 1,14,3, "torch_holder_96")
	:addTorch()
spawn("temple_alcove", 1,14,0, "temple_alcove_90")
spawn("script_entity", 1,13,0, "script_entity_48")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9The Second Circle\
\9\
\9Pretenders to its title,\
\9Let them be your keys.\
\9]])\
\
temple_alcove_90:addItem(message)")
spawn("temple_stairs_down", 7,26,2, "temple_stairs_down_58")
spawn("gobelin_ros", 7,24,3, "gobelin_ros_1")
spawn("gobelin_ros", 7,24,1, "gobelin_ros_2")
spawn("temple_alcove", 7,23,0, "temple_alcove_92")
spawn("script_entity", 7,22,0, "script_entity_49")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9The Second Circle\
\9\
\9Serpent's head, Serpent's tail.\
\9]])\
\
temple_alcove_92:addItem(message)")
spawn("torch_holder", 6,23,0, "torch_holder_97")
	:addTorch()
spawn("altar", 23,11,2, "altar_12")
spawn("temple_pillar", 23,15,1, "temple_pillar_115")
spawn("temple_pillar", 24,15,0, "temple_pillar_116")
spawn("temple_pillar", 23,13,0, "temple_pillar_117")
spawn("temple_pillar", 24,13,0, "temple_pillar_118")
spawn("temple_floor_dain_02", 23,15,1, "temple_floor_dain_02_23")
spawn("temple_floor_dain_02", 23,14,1, "temple_floor_dain_02_24")
spawn("temple_floor_dain_02", 23,13,1, "temple_floor_dain_02_25")
spawn("temple_floor_dain_01", 23,12,0, "temple_floor_dain_01_7")
spawn("temple_pit", 22,23,0, "temple_pit_82")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 24,17,0, "temple_pit_83")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 27,20,1, "temple_pit_85")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_door_wooden", 23,23,2, "temple_door_wooden_4")
	:addPullChain()
spawn("temple_floor_dain_02", 26,14,3, "temple_floor_dain_02_26")
spawn("gobelin_dain", 26,14,3, "gobelin_dain_5")
spawn("gobelin_dain", 26,14,1, "gobelin_dain_6")
spawn("temple_door_portcullis", 26,14,0, "temple_door_portcullis_83")
spawn("altar", 26,15,0, "altar_13")
spawn("temple_alcove", 26,13,1, "temple_alcove_94")
spawn("temple_door_portcullis", 23,16,2, "temple_door_portcullis_84")
spawn("gobelin_dain", 23,16,1, "gobelin_dain_7")
spawn("gobelin_dain", 23,16,3, "gobelin_dain_8")
spawn("lock_crystal", 22,17,0, "lock_crystal_1")
spawn("torch_holder", 23,17,2, "torch_holder_99")
	:addTorch()
spawn("torch_holder", 22,14,3, "torch_holder_100")
	:addTorch()
spawn("torch_holder", 25,12,0, "torch_holder_101")
	:addTorch()
spawn("gobelin_dain", 22,11,0, "gobelin_dain_9")
spawn("gobelin_dain", 24,11,0, "gobelin_dain_10")
spawn("temple_door_wooden", 20,26,0, "temple_door_wooden_5")
spawn("temple_wall_text", 23,24,1, "temple_wall_text_27")
	:setWallText("Halls of Light")
spawn("temple_pit", 25,23,2, "temple_pit_88")
spawn("light_elemental", 24,22,2, "light_elemental_1")
spawn("torch_holder", 25,22,1, "torch_holder_102")
	:addTorch()
spawn("torch_holder", 20,20,3, "torch_holder_103")
	:addTorch()
spawn("torch_holder", 27,20,1, "torch_holder_104")
	:addTorch()
spawn("light_elemental", 26,18,2, "light_elemental_3")
spawn("daemon_head", 18,17,3, "daemon_head_49")
spawn("daemon_head", 27,19,1, "daemon_head_50")
spawn("daemon_head", 20,21,3, "daemon_head_51")
spawn("daemon_head", 25,23,1, "daemon_head_52")
spawn("receptor", 11,23,3, "receptor_3")
	:setEntityType("blob")
	:addConnector("activate", "temple_pit_85", "toggle")
spawn("receptor", 27,17,1, "receptor_6")
	:setEntityType("blob")
	:addConnector("activate", "spawner_55", "activate")
	:addConnector("activate", "temple_pit_83", "toggle")
	:addConnector("activate", "temple_pit_90", "toggle")
	:addConnector("activate", "temple_pit_82", "toggle")
spawn("timer", 18,16,1, "timer_60")
	:setTimerInterval(10)
	:activate()
	:addConnector("activate", "spawner_53", "activate")
spawn("spawner", 18,17,1, "spawner_53")
	:setSpawnedEntity("blob")
	:setCoolDown(0)
spawn("spawner", 27,19,3, "spawner_55")
	:setSpawnedEntity("blob")
	:setCoolDown(0)
spawn("spawner", 20,21,1, "spawner_56")
	:setSpawnedEntity("blob")
	:setCoolDown(0)
spawn("spawner", 25,23,3, "spawner_57")
	:setSpawnedEntity("blob")
	:setCoolDown(0)
spawn("temple_pit", 23,19,0, "temple_pit_90")
	:addTrapDoor()
	:setPitState("closed")
spawn("receptor", 20,19,3, "receptor_5")
	:setEntityType("blob")
	:addConnector("activate", "spawner_56", "activate")
	:addConnector("activate", "temple_pit_83", "toggle")
	:addConnector("activate", "temple_pit_90", "toggle")
	:addConnector("activate", "temple_pit_82", "toggle")
spawn("receptor", 25,21,1, "receptor_7")
	:setEntityType("blob")
	:addConnector("activate", "spawner_57", "activate")
	:addConnector("activate", "temple_pit_83", "toggle")
	:addConnector("activate", "temple_pit_90", "toggle")
	:addConnector("activate", "temple_pit_82", "toggle")
spawn("temple_door_portcullis", 12,23,1, "temple_door_portcullis_86")
spawn("temple_door_portcullis", 13,23,1, "temple_door_portcullis_87")
spawn("temple_door_portcullis", 13,23,0, "temple_door_portcullis_88")
	:setDoorState("open")
spawn("temple_door_portcullis", 13,23,2, "temple_door_portcullis_89")
	:setDoorState("open")
spawn("temple_secret_door", 19,23,3, "temple_secret_door_136")
spawn("temple_wall_grating", 18,23,0, "temple_wall_grating_62")
spawn("temple_secret_button_small", 18,22,1, "temple_secret_button_small_17")
	:addConnector("toggle", "temple_secret_door_136", "toggle")
	:addConnector("toggle", "temple_secret_door_146", "toggle")
spawn("temple_pressure_plate", 13,24,2, "temple_pressure_plate_45")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_87", "toggle")
	:addConnector("activate", "temple_door_portcullis_88", "toggle")
	:addConnector("activate", "temple_door_portcullis_86", "toggle")
	:addConnector("activate", "temple_door_portcullis_89", "toggle")
spawn("torch_holder", 18,20,1, "torch_holder_106")
	:addTorch()
spawn("light_elemental", 21,12,2, "light_elemental_4")
spawn("light_elemental", 25,12,2, "light_elemental_5")
spawn("temple_stairs_down", 12,15,1, "temple_stairs_down_59")
spawn("temple_wall_grating", 15,24,0, "temple_wall_grating_61")
spawn("temple_wall_grating", 16,24,0, "temple_wall_grating_64")
spawn("temple_wall_grating", 18,24,0, "temple_wall_grating_65")
spawn("temple_pillar", 16,24,2, "temple_pillar_120")
spawn("torch_holder", 15,23,0, "torch_holder_107")
	:addTorch()
spawn("temple_secret_button_small", 15,24,3, "temple_secret_button_small_18")
	:addConnector("toggle", "temple_secret_door_134", "toggle")
	:addConnector("toggle", "temple_secret_door_146", "toggle")
spawn("temple_secret_button_small", 16,24,1, "temple_secret_button_small_19")
	:addConnector("toggle", "temple_secret_door_134", "toggle")
	:addConnector("toggle", "temple_secret_door_136", "toggle")
	:addConnector("toggle", "temple_secret_door_146", "open")
spawn("temple_secret_door", 15,23,3, "temple_secret_door_134")
spawn("temple_secret_door", 17,23,3, "temple_secret_door_146")
	:setDoorState("open")
spawn("temple_wall_grating", 17,22,2, "temple_wall_grating_66")
spawn("temple_pillar", 18,23,2, "temple_pillar_127")
spawn("torch_holder", 22,25,0, "torch_holder_108")
	:addTorch()
spawn("amulet_dark", 14,26,3, "amulet_dark_1")
spawn("temple_pressure_plate", 13,26,2, "temple_pressure_plate_6")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:addConnector("activate", "script_entity_55", "spawnArrow")
spawn("script_entity", 13,27,3, "script_entity_55")
	:setSource("function spawnArrow()\
\9exsp.delay(1,\
\9\9function()\
\9\9\9setMouseItem(spawn(\"arrow\"))\
\9\9end,\
\9\9{}\
\9)\
end")
spawn("amulet_dark", 16,25,0, "amulet_dark_2")

--- level 5 ---

mapName("First Seals")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
##......##..#...################
##.#.#####....##################
##.#.#######....###.##.#########
###..#.....#..#.###....#########
###...........#.####......###..#
######.....#....####...##.#....#
############.#.#####....##.#.#..
########......#.#####.##...#..#.
######..####....##.##.##.#.#..#.
###.##......####.#.#####.#.#..##
##..####.##.#..........#..##.###
##...#....#.####...#...##...####
##.###..#.....###..#...#.#.#.###
##......#.#.#.#.##.####.......##
###.#..##.##..#.##.####.#...#.##
###...##...##...#...###.......##
#.#####.....###.....#.....#...##
#.####...#...##.#...#.#.......##
#.#.##.......#####.##.#.#...#.##
#.#.....#.#..#####.##.#.......##
#.#####.....#.........##.#.#.###
#.##..##...##.####.######..####.
#......##.#...#.##...#.#...#....
###..#......##...###.#.#.##...##
####...#####.......#.#.....#....
#######.#......#.....#.#####..##
#######.#.#....#.....#.#########
#######...##.......#.##.####...#
##############...###.##.#...#.#.
##########...##.###..##.##.###..
############.....#####....#...#.
]])
spawn("temple_stairs_up", 13,11,3, "temple_stairs_up_2")
spawn("temple_stairs_down", 15,14,0, "temple_stairs_down_3")
spawn("temple_secret_button_tiny", 15,16,1, "temple_secret_button_tiny_1")
	:setActivateOnce(true)
	:addConnector("toggle", "temple_secret_door_drain_open_2", "toggle")
spawn("healing_crystal", 18,17,0, "healing_crystal_1")
spawn("temple_stairs_down", 3,10,0, "temple_stairs_down_12")
spawn("temple_door_portcullis", 8,19,1, "temple_door_portcullis_8")
spawn("temple_door_portcullis", 10,19,3, "temple_door_portcullis_9")
spawn("temple_door_wooden", 9,15,0, "temple_door_wooden_1")
	:addPullChain()
spawn("temple_alcove", 8,18,1, "temple_alcove_34")
	:setActivateAlways(true)
	:addConnector("activate", "ku_firstSealScript", "alcovesCheck")
spawn("temple_alcove", 9,17,2, "temple_alcove_35")
	:setActivateAlways(true)
	:addConnector("activate", "ku_firstSealScript", "alcovesCheck")
spawn("temple_alcove", 10,18,3, "temple_alcove_36")
	:setActivateAlways(true)
	:addConnector("activate", "ku_firstSealScript", "alcovesCheck")
spawn("temple_pit", 16,12,3, "temple_pit_7")
spawn("temple_floor_ku_02", 8,18,3, "temple_floor_ku_02_2")
spawn("temple_floor_ku_02", 9,17,1, "temple_floor_ku_02_3")
spawn("temple_floor_ku_02", 10,18,3, "temple_floor_ku_02_4")
spawn("temple_mosaic_wall_ku_1", 10,16,1, "temple_mosaic_wall_ku_1_8")
spawn("temple_mosaic_wall_ku_2", 10,22,1, "temple_mosaic_wall_ku_2_7")
spawn("temple_mosaic_wall_ku_2", 8,19,2, "temple_mosaic_wall_ku_2_9")
spawn("temple_mosaic_wall_ku_1", 10,19,2, "temple_mosaic_wall_ku_1_10")
spawn("torch_holder", 5,14,0, "torch_holder_4")
	:addTorch()
spawn("torch_holder", 23,15,3, "torch_holder_26")
	:addTorch()
spawn("temple_gladiator_statue_flail", 7,17,3, "temple_gladiator_statue_flail_3")
spawn("temple_gladiator_statue_spear", 11,17,1, "temple_gladiator_statue_spear_3")
spawn("temple_floor_ku_01", 7,18,2, "temple_floor_ku_01_3")
spawn("temple_floor_ku_01", 10,17,3, "temple_floor_ku_01_5")
spawn("temple_floor_ku_01", 8,19,3, "temple_floor_ku_01_7")
spawn("temple_floor_ku_01", 10,19,3, "temple_floor_ku_01_8")
spawn("temple_alcove", 8,16,0, "temple_alcove_40")
spawn("temple_floor_ku_02", 9,19,3, "temple_floor_ku_02_6")
spawn("temple_floor_ku_01", 8,17,2, "temple_floor_ku_01_4")
spawn("temple_floor_ku_01", 9,20,2, "temple_floor_ku_01_6")
spawn("temple_floor_ku_01", 11,18,2, "temple_floor_ku_01_9")
spawn("temple_secret_door", 7,18,3, "temple_secret_door_14")
spawn("temple_secret_door", 7,18,2, "temple_secret_door_15")
spawn("temple_secret_door", 8,19,3, "temple_secret_door_16")
spawn("temple_secret_door", 10,19,1, "temple_secret_door_17")
spawn("temple_secret_door", 11,19,0, "temple_secret_door_18")
spawn("temple_secret_door", 12,18,3, "temple_secret_door_19")
spawn("temple_pillar", 7,19,1, "temple_pillar_14")
spawn("temple_pillar", 9,22,3, "temple_pillar_16")
spawn("temple_pillar", 11,19,2, "temple_pillar_17")
spawn("temple_pillar", 12,19,2, "temple_pillar_18")
spawn("temple_gladiator_statue_flail", 7,21,3, "temple_gladiator_statue_flail_5")
spawn("temple_gladiator_statue_spear", 11,21,1, "temple_gladiator_statue_spear_5")
spawn("temple_mosaic_wall_ku_2", 8,16,3, "temple_mosaic_wall_ku_2_11")
spawn("temple_mosaic_wall_ku_1", 8,22,3, "temple_mosaic_wall_ku_1_12")
spawn("temple_floor_ku_01", 9,16,2, "temple_floor_ku_01_10")
spawn("temple_mosaic_wall_ku_2", 10,21,0, "temple_mosaic_wall_ku_2_12")
spawn("temple_mosaic_wall_ku_1", 8,21,0, "temple_mosaic_wall_ku_1_13")
spawn("script_entity", 10,15,0, "ku_firstSealScript")
	:setSource("function alcovesCheck()\
    \
    local iron_alcove1 = false\
\9local iron_alcove2 = false\
\9local iron_alcove3 = false\
    for i in temple_alcove_34:containedItems() do\
\9\9if i.name == \"iron_bracelet\" then\
\9\9\9iron_alcove1 = true\
\9        break\
\9\9end\
\9end\
    for i in temple_alcove_35:containedItems() do\
\9\9if i.name == \"iron_bracelet\" then\
\9\9\9iron_alcove2 = true\
\9        break\
\9\9end\
\9end\
    for i in temple_alcove_36:containedItems() do\
\9\9if i.name == \"iron_bracelet\" then\
\9\9\9iron_alcove3 = true\
\9        break\
\9\9end\
\9end\
\9if iron_alcove1 == true and coreScript.getCircleLevel(\"ku\") == 0 and\
\9\9\9iron_alcove2 == true and iron_alcove3 == true then\
\9\9timer_2:activate()\
\9\9hudPrint(\"You have opened the seal of the First Circle.\\nStep forward, apprentices of Ku-Dhaar! (+10 000xp)\")\
\9\9for i = 1,4 do\
\9\9\9party:getChampion(i):gainExp(coreScript.xpRewards[\"firstSeal\"])\
\9\9end\
\9\9coreScript.setCircleLevel(\"ku\",1)\
\9\9playSound(\"level_up\")\
\9end\
end\
\
kuFirstEndTimer = 0\
\
function openSeal()\
\9if kuFirstEndTimer == 0 then\
\9\9temple_door_portcullis_8:open()\
\9\9temple_door_portcullis_9:open()\
\9\9kuFirstEndTimer = kuFirstEndTimer + 1\
\9elseif kuFirstEndTimer == 4 then\
\9\9temple_secret_door_16:open()\
\9elseif kuFirstEndTimer == 5 then\
\9\9temple_secret_door_17:open()\
\9elseif kuFirstEndTimer == 6 then\
\9\9temple_secret_door_15:open()\
\9elseif kuFirstEndTimer == 7 then\
\9\9temple_secret_door_18:open()\
\9elseif kuFirstEndTimer == 8 then\
\9\9temple_secret_door_14:open()\
\9elseif kuFirstEndTimer == 9 then\
\9\9temple_secret_door_19:open()\
\9\9timer_2:deactivate()\
\9end\
\9kuFirstEndTimer = kuFirstEndTimer + 1\
end\
\
local message = spawn(\"scroll\")\
message:setScrollText(\"Thrice by iron prove your worth.\")\
\
temple_alcove_40:addItem(message)\
")
spawn("timer", 11,16,1, "timer_2")
	:setTimerInterval(1)
	:addConnector("activate", "ku_firstSealScript", "openSeal")
spawn("skeleton_redguard", 6,20,0, "skeleton_redguard_4")
	:setAIState("guard")
	:setLevel(3)
spawn("skeleton_redguard", 12,20,0, "skeleton_redguard_5")
	:setAIState("guard")
	:setLevel(3)
spawn("skeleton_redguard", 9,22,0, "skeleton_redguard_6")
	:setAIState("guard")
	:setLevel(3)
spawn("daemon_head", 12,18,1, "daemon_head_11")
spawn("temple_pillar", 10,22,3, "temple_pillar_20")
spawn("temple_pillar", 8,19,3, "temple_pillar_21")
spawn("torch_holder", 8,22,2, "torch_holder_29")
	:addTorch()
spawn("temple_door_portcullis", 17,21,1, "temple_door_portcullis_13")
spawn("temple_door_portcullis", 18,22,0, "temple_door_portcullis_14")
spawn("temple_door_portcullis", 19,21,3, "temple_door_portcullis_15")
spawn("temple_floor_ku_02", 17,21,3, "temple_floor_ku_02_5")
spawn("temple_mosaic_wall_ku_1", 17,21,0, "temple_mosaic_wall_ku_1_14")
spawn("temple_mosaic_wall_ku_2", 17,21,2, "temple_mosaic_wall_ku_2_13")
spawn("temple_pressure_plate", 16,21,3, "temple_pressure_plate_4")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_13", "open")
	:addConnector("activate", "temple_door_portcullis_14", "close")
	:addConnector("activate", "temple_door_portcullis_15", "close")
spawn("lever", 16,17,0, "lever_4")
	:setLeverState("activated")
	:addConnector("any", "temple_secret_door_drain_open_2", "toggle")
spawn("temple_mosaic_wall_dain_1", 19,21,0, "temple_mosaic_wall_dain_1_7")
spawn("temple_mosaic_wall_dain_1", 19,21,2, "temple_mosaic_wall_dain_1_4")
spawn("temple_alcove", 6,19,3, "temple_alcove_39")
	:addItem(spawn("ring_gauntlets"))
spawn("temple_alcove", 12,19,1, "temple_alcove_41")
	:addItem(spawn("circlet_war"))
spawn("temple_door_portcullis", 7,10,1, "temple_door_portcullis_16")
	:addPullChain()
spawn("daemon_head", 6,18,3, "daemon_head_12")
spawn("daemon_head", 12,20,1, "daemon_head_13")
spawn("temple_door_iron", 3,19,2, "temple_door_iron_2")
spawn("lock_ruby", 3,20,3, "lock_ruby_1")
	:setOpenedBy("ruby_key")
	:addConnector("activate", "temple_door_iron_2", "open")
spawn("scroll", 3,20,2, "scroll_1")
	:setScrollText("Ways must sometimes cross.")
spawn("temple_alcove", 3,19,0, "temple_alcove_ruby_1")
spawn("temple_alcove", 7,9,0, "temple_alcove_44")
	:addItem(spawn("hand_axe"))
spawn("rat_shank", 6,9,0, "rat_shank_3")
spawn("quarrel", 6,10,3, "quarrel_1")
spawn("quarrel", 6,10,3, "quarrel_2")
spawn("temple_stairs_down", 26,10,2, "temple_stairs_down_16")
spawn("temple_pillar", 24,17,2, "temple_pillar_24")
spawn("temple_pillar", 25,17,3, "temple_pillar_25")
spawn("temple_pillar", 26,16,3, "temple_pillar_27")
spawn("temple_pillar", 26,15,1, "temple_pillar_28")
spawn("temple_pillar", 27,15,0, "temple_pillar_29")
spawn("temple_pillar", 27,16,1, "temple_pillar_30")
spawn("temple_pillar", 24,18,0, "temple_pillar_32")
spawn("temple_pillar", 25,18,0, "temple_pillar_33")
spawn("temple_pillar", 26,19,2, "temple_pillar_35")
spawn("temple_pillar", 26,20,3, "temple_pillar_36")
spawn("temple_pillar", 27,20,1, "temple_pillar_37")
spawn("temple_pillar", 27,19,2, "temple_pillar_38")
spawn("temple_pillar", 28,18,3, "temple_pillar_40")
spawn("temple_pillar", 29,18,3, "temple_pillar_41")
spawn("temple_pillar", 29,17,3, "temple_pillar_42")
spawn("temple_pillar", 28,17,1, "temple_pillar_43")
spawn("temple_secret_door", 24,17,0, "temple_secret_door_23")
spawn("temple_secret_door", 23,16,2, "temple_secret_door_22")
spawn("temple_secret_door", 23,18,0, "temple_secret_door_24")
spawn("temple_secret_door", 24,18,0, "temple_secret_door_25")
spawn("temple_secret_door", 25,17,2, "temple_secret_door_26")
spawn("temple_secret_door", 25,17,0, "temple_secret_door_27")
spawn("temple_secret_door", 25,16,1, "temple_secret_door_28")
spawn("temple_secret_door", 26,15,3, "temple_secret_door_29")
spawn("temple_secret_door", 26,14,3, "temple_secret_door_30")
spawn("temple_secret_door", 27,14,3, "temple_secret_door_31")
spawn("temple_secret_door", 27,15,3, "temple_secret_door_32")
spawn("temple_secret_door", 27,16,3, "temple_secret_door_33")
spawn("temple_secret_door", 27,18,3, "temple_secret_door_34")
spawn("temple_secret_door", 26,19,1, "temple_secret_door_35")
spawn("temple_secret_door", 26,20,1, "temple_secret_door_36")
spawn("temple_secret_door", 25,20,1, "temple_secret_door_37")
spawn("temple_secret_door", 25,19,1, "temple_secret_door_38")
spawn("temple_secret_door", 26,18,3, "temple_secret_door_39")
spawn("temple_secret_door", 27,18,0, "temple_secret_door_40")
spawn("temple_secret_door", 28,18,0, "temple_secret_door_41")
spawn("temple_secret_door", 29,18,0, "temple_secret_door_42")
spawn("temple_secret_door", 29,17,0, "temple_secret_door_43")
spawn("temple_secret_door", 28,17,0, "temple_secret_door_44")
spawn("temple_secret_door", 27,17,0, "temple_secret_door_45")
spawn("teleporter", 26,7,2, "teleporter_4")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,14,2,5)
spawn("teleporter", 24,13,2, "teleporter_7")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(28,14,2,5)
spawn("teleporter", 28,13,0, "teleporter_8")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(28,20,0,5)
spawn("teleporter", 24,21,2, "teleporter_9")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,14,2,5)
spawn("teleporter", 28,21,0, "teleporter_10")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,20,0,5)
spawn("temple_pressure_plate", 20,21,3, "temple_pressure_plate_7")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_15", "open")
	:addConnector("activate", "temple_door_portcullis_14", "close")
	:addConnector("activate", "temple_door_portcullis_13", "close")
spawn("script_entity", 27,8,1, "script_entity_12")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9The First Circle\
\9\
\9Four shrines, four elements.\
\9Study them carefully, master their essence.\
\9]])\
\
temple_alcove_46:addItem(message)")
spawn("temple_alcove", 26,8,1, "temple_alcove_46")
spawn("temple_mosaic_wall_dain_2", 26,9,3, "temple_mosaic_wall_dain_2_8")
spawn("temple_mosaic_wall_dain_2", 26,9,1, "temple_mosaic_wall_dain_2_4")
spawn("temple_floor_dain_02", 19,21,1, "temple_floor_dain_02_2")
spawn("temple_floor_dain_02", 23,17,0, "temple_floor_dain_02_3")
spawn("temple_floor_dain_02", 24,17,3, "temple_floor_dain_02_4")
spawn("temple_floor_dain_02", 26,20,3, "temple_floor_dain_02_5")
spawn("temple_floor_dain_02", 26,19,2, "temple_floor_dain_02_6")
spawn("temple_floor_dain_02", 29,17,3, "temple_floor_dain_02_7")
spawn("temple_floor_dain_02", 28,17,1, "temple_floor_dain_02_8")
spawn("temple_floor_dain_02", 26,14,2, "temple_floor_dain_02_9")
spawn("temple_floor_dain_02", 26,15,3, "temple_floor_dain_02_10")
spawn("temple_floor_dain_01", 25,17,2, "temple_floor_dain_01_1")
spawn("temple_floor_dain_01", 26,16,2, "temple_floor_dain_01_2")
spawn("temple_floor_dain_01", 27,17,3, "temple_floor_dain_01_3")
spawn("temple_floor_dain_01", 26,18,2, "temple_floor_dain_01_4")
spawn("temple_alcove", 25,17,1, "temple_alcove_13")
	:addItem(spawn("frost_bomb"))
spawn("temple_alcove", 26,16,2, "temple_alcove_47")
	:addItem(spawn("enchanted_doublet"))
spawn("temple_alcove", 27,17,3, "temple_alcove_48")
spawn("temple_alcove", 26,18,0, "temple_alcove_49")
	:addItem(spawn("enchanted_hose"))
spawn("torch_holder", 10,16,0, "torch_holder_30")
	:addTorch()
spawn("torch_holder", 27,15,1, "torch_holder_31")
	:addTorch()
spawn("torch_holder", 29,19,1, "torch_holder_32")
	:addTorch()
spawn("torch_holder", 25,19,3, "torch_holder_33")
	:addTorch()
spawn("temple_alcove", 24,16,0, "temple_alcove_18")
spawn("temple_alcove", 28,16,0, "temple_alcove_50")
spawn("temple_alcove", 28,18,2, "temple_alcove_51")
spawn("temple_alcove", 24,18,2, "temple_alcove_52")
	:addConnector("any", "script_entity_31", "dainFirstEndPuzzle")
spawn("temple_wall_text", 24,14,2, "temple_wall_text_5")
	:setWallText("Shrine of Air")
spawn("temple_wall_text", 28,14,2, "temple_wall_text_6")
	:setWallText("Shrine of Earth")
spawn("temple_wall_text", 24,20,0, "temple_wall_text_7")
	:setWallText("Shrine of Ice")
spawn("temple_wall_text", 28,20,0, "temple_wall_text_8")
	:setWallText("Shrine of Fire")
spawn("temple_wall_text", 25,14,0, "temple_wall_text_9")
	:setWallText("To the shrines")
spawn("lever", 23,14,0, "lever_5")
	:addConnector("activate", "script_entity_10", "sToLab")
	:addConnector("deactivate", "script_entity_10", "sToShrine")
spawn("script_entity", 23,13,3, "script_entity_10")
	:setSource("function sToLab()\
\9teleporter_7:setTeleportTarget(21, 8, 0, 5)\
\9temple_wall_text_9:setWallText(\"To the laboratory\")\
end\
\
function sToShrine()\
\9teleporter_7:setTeleportTarget(28, 14, 2, 5)\
\9temple_wall_text_9:setWallText(\"To the shrines\")\
\9if coreScript.getCircleLevel(\"dain\") > 0 then\
\9\9lever_5:toggle()\
\9end\
end")
spawn("temple_door_iron", 27,12,3, "temple_door_iron_4")
spawn("fire_bomb", 3,19,0, "fire_bomb_1")
spawn("fire_bomb", 3,19,0, "fire_bomb_2")
spawn("temple_alcove", 27,12,1, "temple_alcove_amethyst_1")
spawn("lock_amethyst", 26,12,0, "lock_amethyst_1")
spawn("teleporter", 21,9,2, "teleporter_12")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,14,2,5)
spawn("temple_stairs_up", 15,18,2, "temple_stairs_up_17")
spawn("temple_pit", 20,6,0, "temple_pit_8")
spawn("temple_pit", 22,4,1, "temple_pit_14")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_secret_button_large", 23,7,1, "temple_secret_button_large_7")
	:addConnector("toggle", "teleporter_15", "activate")
	:addConnector("toggle", "timer_3", "toggle")
spawn("temple_stairs_down", 25,6,2, "temple_stairs_down_20")
spawn("teleporter", 22,3,0, "teleporter_11")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(20,4,0,5)
	:setScreenFlash(false)
spawn("teleporter", 20,5,2, "teleporter_13")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(21,5,2,5)
	:setScreenFlash(false)
spawn("temple_pressure_plate", 20,4,2, "temple_pressure_plate_10")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setActivateOnce(true)
	:addConnector("activate", "temple_door_portcullis_24", "open")
spawn("temple_pressure_plate", 21,4,2, "temple_pressure_plate_12")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setActivateOnce(true)
	:addConnector("activate", "temple_door_portcullis_27", "open")
	:addConnector("activate", "temple_pit_14", "close")
spawn("temple_pillar", 21,6,3, "temple_pillar_31")
spawn("temple_wall_grating", 22,5,3, "temple_wall_grating_23")
spawn("temple_wall_grating", 21,5,2, "temple_wall_grating_24")
spawn("temple_pillar", 22,6,2, "temple_pillar_39")
spawn("temple_pillar", 22,5,3, "temple_pillar_44")
spawn("teleporter", 21,5,0, "teleporter_15")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(21,4,0,5)
	:setScreenFlash(false)
	:deactivate()
spawn("timer", 23,4,1, "timer_3")
	:setTimerInterval(7)
	:addConnector("activate", "teleporter_15", "deactivate")
	:addConnector("activate", "timer_3", "toggle")
spawn("temple_door_portcullis", 23,7,3, "temple_door_portcullis_24")
spawn("temple_door_portcullis", 24,5,3, "temple_door_portcullis_27")
spawn("rock", 29,14,1, "rock_9")
spawn("rock", 22,7,1, "rock_10")
spawn("crowern", 23,5,3, "crowern_1")
spawn("rock", 21,7,1, "rock_12")
spawn("temple_stairs_down", 31,22,0, "temple_stairs_down_26")
spawn("teleporter", 28,11,2, "teleporter_29")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(28,14,2,5)
spawn("lever", 27,14,0, "lever_10")
	:addConnector("activate", "script_entity_21", "sToLab")
	:addConnector("deactivate", "script_entity_21", "sToShrine")
spawn("script_entity", 27,13,3, "script_entity_21")
	:setSource("function sToLab()\
\9teleporter_8:setTeleportTarget(28, 10, 0, 5)\
\9temple_wall_text_13:setWallText(\"To the laboratory\")\
end\
\
function sToShrine()\
\9teleporter_8:setTeleportTarget(28, 20, 0, 5)\
\9temple_wall_text_13:setWallText(\"To the shrines\")\
end")
spawn("temple_wall_text", 29,14,0, "temple_wall_text_13")
	:setWallText("To the shrines")
spawn("temple_pit", 28,9,0, "temple_pit_27")
spawn("herder", 29,8,2, "herder_1")
spawn("torch_holder", 20,7,3, "torch_holder_36")
	:addTorch()
spawn("torch_holder", 28,6,0, "torch_holder_37")
	:addTorch()
spawn("script_entity", 29,21,3, "script_entity_26")
	:setSource("function sToLab()\
\9teleporter_10:setTeleportTarget(30, 25, 3, 5)\
\9temple_wall_text_15:setWallText(\"To the laboratory\")\
end\
\
function sToShrine()\
\9teleporter_10:setTeleportTarget(24, 20, 0, 5)\
\9temple_wall_text_15:setWallText(\"To the shrines\")\
end")
spawn("lever", 29,20,2, "lever_17")
	:addConnector("any", "script_entity_26", "dainShrineSwitchFire")
spawn("temple_wall_text", 27,20,2, "temple_wall_text_15")
	:setWallText("To the shrines")
spawn("teleporter", 31,25,0, "teleporter_37")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(28,20,0,5)
spawn("temple_stairs_down", 31,9,2, "temple_stairs_down_33")
spawn("torch_holder", 28,23,0, "torch_holder_49")
	:addTorch()
spawn("temple_pit", 29,24,1, "temple_pit_22")
spawn("temple_alcove", 28,26,3, "temple_alcove_64")
spawn("temple_wall_grating", 29,24,3, "temple_wall_grating_42")
spawn("temple_pillar", 29,24,1, "temple_pillar_61")
spawn("temple_pillar", 29,25,2, "temple_pillar_67")
spawn("uggardian", 29,23,2, "uggardian_5")
	:setAIState("guard")
spawn("silk_hose", 27,24,3, "silk_hose_1")
spawn("rock", 27,24,0, "rock_11")
spawn("temple_wall_text", 23,20,2, "temple_wall_text_18")
	:setWallText("To the shrines")
spawn("script_entity", 25,21,3, "script_entity_29")
	:setSource("function sToLab()\
\9teleporter_9:setTeleportTarget(23, 29, 2, 5)\
\9temple_wall_text_18:setWallText(\"To the laboratory\")\
end\
\
function sToShrine()\
\9teleporter_9:setTeleportTarget(24, 14, 2, 5)\
\9temple_wall_text_18:setWallText(\"To the shrines\")\
end\
")
spawn("lever", 25,20,2, "lever_30")
	:addConnector("any", "script_entity_29", "dainShrineSwitchIce")
spawn("teleporter", 23,28,0, "teleporter_35")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,20,0,5)
spawn("teleporter", 22,31,0, "teleporter_50")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(26,29,0,5)
spawn("teleporter", 25,29,0, "teleporter_52")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,28,0,5)
spawn("teleporter", 27,29,2, "teleporter_53")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(23,31,2,5)
spawn("teleporter", 27,31,2, "teleporter_56")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(23,31,2,5)
spawn("temple_stairs_down", 25,31,1, "temple_stairs_down_36")
spawn("temple_door_portcullis", 24,31,3, "temple_door_portcullis_39")
spawn("temple_wall_text", 26,29,0, "temple_wall_text_12")
	:setWallText("One")
spawn("temple_wall_text", 29,28,0, "temple_wall_text_19")
	:setWallText("Two")
spawn("temple_wall_text", 31,30,1, "temple_wall_text_20")
	:setWallText("Three")
spawn("temple_wall_text", 28,31,0, "temple_wall_text_21")
	:setWallText("Four")
spawn("lever", 29,31,1, "lever_29")
	:addConnector("any", "temple_door_portcullis_39", "toggle")
spawn("teleporter", 26,30,2, "teleporter_54")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(23,31,2,5)
spawn("teleporter", 31,29,2, "teleporter_55")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(23,31,2,5)
spawn("teleporter", 30,30,0, "teleporter_57")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(26,29,0,5)
spawn("teleporter", 29,29,1, "teleporter_58")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(31,30,1,5)
spawn("teleporter", 30,28,2, "teleporter_59")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(23,31,2,5)
spawn("teleporter", 28,28,0, "teleporter_60")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(26,29,0,5)
spawn("teleporter", 31,31,0, "teleporter_61")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(28,31,0,5)
spawn("skeleton_archer", 29,31,3, "skeleton_archer_3")
spawn("torch_holder", 24,31,2, "torch_holder_56")
	:addTorch()
spawn("blocker", 28,31,0, "blocker_12")
spawn("grim_cap", 29,31,1, "grim_cap_3")
spawn("script_entity", 22,30,2, "script_entity_30")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Count to four, open the door.\")\
\
temple_alcove_66:addItem(message)")
spawn("temple_alcove", 23,31,2, "temple_alcove_66")
spawn("script_entity", 16,16,3, "hs_level_5")
	:setSource("function hsMainStairs()\
\9coreScript:setZone(\"mainStairs\")\
end\
\
function hsKuFirstSeal()\
\9coreScript:setZone(\"ku_firstSeal\")\
end\
\
function hsKuRuby()\
\9coreScript:setZone(\"ku_firstSeal\",\"ku_firstSeal_ruby\")\
end\
\
function hsPassageways()\
\9coreScript:setZone(\"passageways\")\
end\
\
function hsShrines()\
\9coreScript:setZone(\"dain_shrinesSeal\")\
end\
\
function hsDainAmethyst()\
\9coreScript:setZone(\"dain_firstSeal\", \"dain_firstSeal_amethyst\")\
end\
\
function hsAirLab1()\
\9coreScript:setZone(\"dain_airLab_1\")\
end\
\
function hsEarthLab1()\
\9coreScript:setZone(\"dain_earthLab_1\")\
end\
\
function hsFireLab1()\
\9coreScript:setZone(\"dain_fireLab_1\")\
end\
\
function hsIceLab1()\
\9coreScript:setZone(\"dain_iceLab_1\")\
end\
\
function hsRosT1()\
\9coreScript:setZone(\"ros_firstTeaching\")\
end\
\
function hsRosT1Sling()\
\9coreScript:setZone(\"ros_firstTeaching_sling\")\
end\
")
spawn("ogre", 9,12,3, "ogre_2")
	:setAIState("guard")
spawn("script_entity", 22,16,0, "script_entity_31")
	:setSource("function dainFirstEndPuzzle()\
    -- iterate through all contained items on alcove, checking for a matching name\
    local air_alcove = false\
\9local earth_alcove = false\
\9local fire_alcove = false\
\9local ice_alcove = false\
    for i in temple_alcove_18:containedItems() do\
\9\9if i.name == \"essence_air\" then\
\9\9\9air_alcove = true\
\9        break\
\9\9end\
\9end\
    for i in temple_alcove_50:containedItems() do\
\9\9if i.name == \"essence_earth\" then\
\9\9\9earth_alcove = true\
\9        break\
\9\9end\
\9end\
    for i in temple_alcove_51:containedItems() do\
\9\9if i.name == \"essence_fire\" then\
\9\9\9fire_alcove = true\
\9        break\
\9\9end\
\9end\
\9for i in temple_alcove_52:containedItems() do\
\9\9if i.name == \"essence_ice\" then\
\9\9\9ice_alcove = true\
\9        break\
\9\9end\
\9end\
\9if air_alcove == true and earth_alcove == true and\
\9  fire_alcove == true and ice_alcove == true \
\9  and coreScript.getCircleLevel(\"dain\") == 0 then\
\9\9script_entity_31:openFirstSeal()\
\9end\
end\
\
function openFirstSeal()\
\9\9timer_34:activate()\
\9\9hudPrint(\"You have opened the seal of the First Circle.\\nStep forward, apprentices of Eldain! (+10 000xp)\")\
\9\9party:getChampion(1):gainExp(10000)\
\9\9party:getChampion(2):gainExp(10000)\
\9\9party:getChampion(3):gainExp(10000)\
\9\9party:getChampion(4):gainExp(10000)\
\9\9coreScript.setCircleLevel(\"dain\",1)\
\9\9playSound(\"level_up\")\
\9\9if lever_5:getLeverState() == \"deactivated\" then\
\9\9\9lever_5:toggle()\
\9\9end\
\9\9if lever_10:getLeverState() == \"deactivated\" then\
\9\9\9lever_10:toggle()\
\9\9end\
\9\9if lever_17:getLeverState() == \"deactivated\" then\
\9\9\9lever_17:toggle()\
\9\9end\
\9\9if lever_30:getLeverState() == \"deactivated\" then\
\9\9\9lever_30:toggle()\
\9\9end\
\9\9goromorg_1:setAIState(\"default\")\
\9\9goromorg_2:setAIState(\"default\")\
end\
")
spawn("timer", 22,15,1, "timer_34")
	:setTimerInterval(2)
	:addConnector("activate", "temple_secret_door_27", "open")
	:addConnector("activate", "temple_secret_door_23", "open")
	:addConnector("activate", "temple_secret_door_22", "open")
	:addConnector("activate", "temple_secret_door_24", "open")
	:addConnector("activate", "temple_secret_door_25", "open")
	:addConnector("activate", "temple_secret_door_26", "open")
	:addConnector("activate", "temple_secret_door_39", "open")
	:addConnector("activate", "temple_secret_door_38", "open")
	:addConnector("activate", "temple_secret_door_37", "open")
	:addConnector("activate", "temple_secret_door_36", "open")
	:addConnector("activate", "temple_secret_door_35", "open")
	:addConnector("activate", "temple_secret_door_34", "open")
	:addConnector("activate", "temple_secret_door_40", "open")
	:addConnector("activate", "temple_secret_door_41", "open")
	:addConnector("activate", "temple_secret_door_42", "open")
	:addConnector("activate", "temple_secret_door_43", "open")
	:addConnector("activate", "temple_secret_door_44", "open")
	:addConnector("activate", "temple_secret_door_45", "open")
	:addConnector("activate", "temple_secret_door_28", "open")
	:addConnector("activate", "temple_secret_door_29", "open")
	:addConnector("activate", "temple_secret_door_30", "open")
	:addConnector("activate", "temple_secret_door_31", "open")
	:addConnector("activate", "temple_secret_door_32", "open")
	:addConnector("activate", "temple_secret_door_33", "open")
	:addConnector("activate", "temple_secret_door_74", "open")
spawn("temple_secret_door", 26,8,3, "temple_secret_door_74")
spawn("blocker", 21,8,3, "blocker_17")
spawn("blocker", 28,10,1, "blocker_18")
spawn("blocker", 30,25,3, "blocker_19")
spawn("goromorg", 23,17,1, "goromorg_1")
	:setAIState("guard")
spawn("goromorg", 29,17,3, "goromorg_2")
	:setAIState("guard")
spawn("lever", 14,29,3, "debug_lever_21")
	:addConnector("activate", "script_entity_45", "rosFirstEndPuzzle")
spawn("blocker", 24,14,1, "blocker_20")
	:deactivate()
spawn("blocker", 28,14,1, "blocker_21")
	:deactivate()
spawn("blocker", 24,20,1, "blocker_22")
	:deactivate()
spawn("blocker", 28,20,2, "blocker_23")
	:deactivate()
spawn("pressure_plate_hidden", 21,8,1, "pressure_plate_hidden_53")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_20", "activate")
spawn("pressure_plate_hidden", 24,14,1, "pressure_plate_hidden_97")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_20", "deactivate")
spawn("pressure_plate_hidden", 28,10,1, "pressure_plate_hidden_98")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_21", "activate")
	:addConnector("activate", "hs_level_5", "hsEarthLab1")
spawn("pressure_plate_hidden", 28,14,1, "pressure_plate_hidden_99")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_21", "deactivate")
spawn("pressure_plate_hidden", 28,20,1, "pressure_plate_hidden_100")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_23", "deactivate")
spawn("pressure_plate_hidden", 30,25,1, "pressure_plate_hidden_101")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_23", "activate")
	:addConnector("activate", "hs_level_5", "hsFireLab1")
spawn("pressure_plate_hidden", 24,20,1, "pressure_plate_hidden_102")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_22", "deactivate")
spawn("pressure_plate_hidden", 23,29,1, "pressure_plate_hidden_103")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "blocker_22", "activate")
	:addConnector("activate", "hs_level_5", "hsIceLab1")
spawn("blocker", 9,23,1, "blocker_24")
spawn("blocker", 22,17,1, "blocker_25")
spawn("blocker", 26,13,2, "blocker_26")
spawn("blocker", 26,21,1, "blocker_27")
spawn("scroll", 26,12,0, "scroll_4")
	:setScrollText("Ways must sometimes cross.")
spawn("pressure_plate_hidden", 19,21,1, "pressure_plate_hidden_105")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_5", "hsShrines")
spawn("herder_big", 30,7,0, "herder_big_1")
spawn("pressure_plate_hidden", 31,9,1, "pressure_plate_hidden_125")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_5", "hsEarthLab1")
spawn("temple_stairs_down", 15,1,1, "temple_stairs_down_38")
spawn("pressure_plate_hidden", 31,22,1, "pressure_plate_hidden_144")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_5", "hsFireLab1")
spawn("pressure_plate_hidden", 25,31,1, "pressure_plate_hidden_158")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_5", "hsIceLab1")
	:addConnector("activate", "timer_28", "activate")
spawn("blocker", 24,13,1, "blocker_28")
spawn("blocker", 28,13,1, "blocker_29")
spawn("blocker", 28,21,2, "blocker_30")
spawn("blocker", 24,21,2, "blocker_31")
spawn("temple_stairs_down", 7,1,1, "temple_stairs_down_40")
spawn("temple_stairs_down", 10,30,3, "temple_stairs_down_44")
spawn("temple_pit", 19,3,1, "temple_pit_49")
spawn("temple_pit", 14,7,0, "temple_pit_52")
spawn("temple_pit", 4,12,1, "temple_pit_54")
spawn("temple_wall_grating", 3,12,1, "temple_wall_grating_33")
spawn("script_entity", 11,4,3, "ros_firstTeachingScript")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9The First Circle\
\9\
\9Tests of speed, tests of wit,\
\9Halls of illusion and deceit.\
\9]])\
\
temple_alcove_78:addItem(message)")
spawn("temple_alcove", 13,1,3, "temple_alcove_78")
spawn("temple_mosaic_wall_ros_1", 14,1,2, "temple_mosaic_wall_ros_1_6")
spawn("temple_mosaic_wall_ros_1", 14,1,0, "temple_mosaic_wall_ros_1_7")
spawn("temple_wall_grating", 14,6,2, "temple_wall_grating_40")
spawn("temple_alcove", 19,4,3, "temple_alcove_77")
	:addItem(spawn("grim_cap"))
spawn("temple_pillar", 9,6,1, "temple_pillar_88")
spawn("temple_pillar", 8,6,2, "temple_pillar_89")
spawn("temple_pillar", 8,5,1, "temple_pillar_90")
spawn("temple_pillar", 9,5,3, "temple_pillar_91")
spawn("torch_holder", 13,4,1, "torch_holder_69")
	:addTorch()
spawn("torch_holder", 8,4,0, "torch_holder_70")
	:addTorch()
spawn("temple_pressure_plate", 10,5,1, "temple_pressure_plate_32")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_68", "open")
	:addConnector("activate", "temple_door_portcullis_66", "close")
spawn("temple_pressure_plate", 9,5,1, "temple_pressure_plate_35")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_68", "close")
	:addConnector("activate", "temple_door_portcullis_64", "open")
	:addConnector("activate", "temple_door_portcullis_66", "open")
spawn("temple_pressure_plate", 8,5,0, "temple_pressure_plate_36")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_64", "close")
spawn("temple_pressure_plate", 7,5,0, "temple_pressure_plate_37")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_64", "open")
	:addConnector("activate", "temple_door_portcullis_67", "close")
	:addConnector("activate", "temple_door_portcullis_65", "open")
spawn("temple_pressure_plate", 6,5,0, "temple_pressure_plate_38")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_door_portcullis_67", "open")
	:addConnector("activate", "temple_door_portcullis_65", "close")
spawn("teleporter", 7,6,3, "teleporter_63")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(6,6,3,5)
	:setChangeFacing(false)
spawn("teleporter", 9,6,1, "teleporter_64")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(10,6,1,5)
	:setChangeFacing(false)
spawn("teleporter", 7,4,2, "teleporter_65")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(8,4,2,5)
	:setChangeFacing(false)
spawn("teleporter", 9,4,1, "teleporter_66")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(8,4,1,5)
	:setChangeFacing(false)
spawn("temple_door_portcullis", 8,6,0, "temple_door_portcullis_64")
	:setDoorState("open")
spawn("temple_door_portcullis", 8,5,3, "temple_door_portcullis_67")
	:setDoorState("open")
spawn("temple_door_portcullis", 9,5,3, "temple_door_portcullis_68")
	:setDoorState("open")
spawn("temple_pillar", 7,5,2, "temple_pillar_92")
spawn("temple_pillar", 10,5,1, "temple_pillar_93")
spawn("temple_door_portcullis", 6,4,2, "temple_door_portcullis_65")
	:setDoorState("open")
spawn("temple_door_portcullis", 10,5,0, "temple_door_portcullis_66")
	:setDoorState("open")
spawn("temple_alcove", 8,6,2, "temple_alcove_79")
	:addItem(spawn("brass_key"))
spawn("blocker", 11,5,2, "blocker_32")
spawn("spider", 15,6,3, "spider_4")
spawn("blocker", 13,1,2, "blocker_33")
spawn("rusted_gauntlets", 10,1,3, "rusted_gauntlets_2")
spawn("rat_shank", 10,1,0, "rat_shank_6")
spawn("temple_pillar", 7,6,2, "temple_pillar_94")
spawn("temple_pillar", 10,6,1, "temple_pillar_95")
spawn("temple_wall_text_long", 11,5,2, "temple_wall_text_long_6")
	:setWallText("First teaching of Zaros\
\
The cunning Rogue shall find simple \
solutions to complicated situations.")
spawn("spider", 3,4,2, "spider_6")
spawn("blocker", 5,5,0, "blocker_35")
spawn("arrow", 6,4,0, "arrow_7")
spawn("tar_bead", 2,3,2, "tar_bead_14")
spawn("rock", 3,5,3, "rock_18")
spawn("spider", 12,4,0, "spider_8")
spawn("temple_door_portcullis", 20,11,3, "temple_door_portcullis_71")
spawn("temple_pressure_plate", 18,9,1, "temple_pressure_plate_39")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
spawn("teleporter", 18,9,1, "teleporter_67")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(16,9,1,5)
	:setChangeFacing(false)
	:deactivate()
spawn("torch_holder", 18,12,1, "torch_holder_72")
	:addTorch()
spawn("temple_pit", 18,10,3, "temple_pit_59")
spawn("spawner", 20,13,0, "spawner_41")
	:setSpawnedEntity("ice_lizard")
	:setCoolDown(300)
spawn("spawner", 22,13,0, "spawner_44")
	:setSpawnedEntity("snail")
	:setCoolDown(300)
spawn("temple_wall_text_long", 19,11,0, "temple_wall_text_long_12")
	:setWallText("Bestiary\
\
Surrender one item to enter")
spawn("pressure_plate_hidden", 18,15,0, "pressure_plate_hidden_51")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_41", "activate")
	:addConnector("activate", "spawner_44", "activate")
	:addConnector("activate", "temple_door_portcullis_71", "close")
	:addConnector("activate", "spawner_58", "activate")
spawn("pressure_plate_hidden", 15,11,0, "pressure_plate_hidden_160")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_41", "activate")
	:addConnector("activate", "spawner_44", "activate")
	:addConnector("activate", "temple_door_portcullis_71", "close")
	:addConnector("activate", "spawner_58", "activate")
spawn("teleporter", 18,9,1, "teleporter_69")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(17,11,1,5)
	:setChangeFacing(false)
	:deactivate()
spawn("spider", 2,3,0, "spider_13")
spawn("lock", 14,27,1, "lock_4")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("script_entity", 14,23,0, "ros_firstSealScript")
	:setSource("function openSeal()\
\9timer_51:toggle()\
\9hudPrint(\"You have opened the seal of the First Circle.\\nStep forward, apprentices of Zaros! (+10 000xp)\")\
\9party:getChampion(1):gainExp(10000)\
\9party:getChampion(2):gainExp(10000)\
\9party:getChampion(3):gainExp(10000)\
\9party:getChampion(4):gainExp(10000)\
\9coreScript.setCircleLevel(\"ros\", 1)\
\9playSound(\"level_up\")\
end\
")
spawn("lock", 14,26,1, "lock_6")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("lock", 15,25,2, "lock_7")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("lock", 16,26,3, "lock_8")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("lock", 16,27,3, "lock_9")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("lock", 15,28,0, "lock_10")
	:setOpenedBy("brass_key")
	:addConnector("activate", "counter_3", "decrement")
spawn("temple_mosaic_wall_ros_1", 15,30,3, "temple_mosaic_wall_ros_1_8")
spawn("temple_mosaic_wall_ros_1", 15,30,1, "temple_mosaic_wall_ros_1_9")
spawn("temple_mosaic_wall_ros_2", 14,29,2, "temple_mosaic_wall_ros_2_7")
spawn("temple_mosaic_wall_ros_2", 16,29,2, "temple_mosaic_wall_ros_2_8")
spawn("temple_mosaic_wall_ros_2", 14,24,0, "temple_mosaic_wall_ros_2_9")
spawn("temple_mosaic_wall_ros_2", 16,24,0, "temple_mosaic_wall_ros_2_10")
spawn("temple_floor_ros_01", 15,28,1, "temple_floor_ros_01_3")
spawn("temple_floor_ros_01", 14,27,1, "temple_floor_ros_01_4")
spawn("temple_floor_ros_01", 14,26,2, "temple_floor_ros_01_5")
spawn("temple_floor_ros_01", 16,26,1, "temple_floor_ros_01_6")
spawn("temple_floor_ros_01", 16,27,1, "temple_floor_ros_01_7")
spawn("temple_floor_ros_01", 15,25,0, "temple_floor_ros_01_8")
spawn("temple_floor_ros_02", 14,28,1, "temple_floor_ros_02_3")
spawn("temple_floor_ros_02", 16,28,3, "temple_floor_ros_02_4")
spawn("temple_floor_ros_02", 16,25,0, "temple_floor_ros_02_5")
spawn("temple_floor_ros_02", 14,25,3, "temple_floor_ros_02_6")
spawn("torch_holder", 13,28,2, "torch_holder_92")
	:addTorch()
spawn("torch_holder", 17,25,0, "torch_holder_93")
	:addTorch()
spawn("temple_door_wooden", 14,31,3, "temple_door_wooden_2")
	:addPullChain()
spawn("temple_secret_door", 13,27,3, "temple_secret_door_111")
spawn("temple_secret_door", 13,26,3, "temple_secret_door_112")
spawn("temple_secret_door", 18,26,3, "temple_secret_door_113")
spawn("temple_secret_door", 18,27,3, "temple_secret_door_114")
spawn("temple_pillar", 13,27,1, "temple_pillar_109")
spawn("temple_pillar", 18,27,3, "temple_pillar_110")
spawn("blocker", 11,26,0, "blocker_43")
spawn("blocker", 20,25,1, "blocker_44")
spawn("spider_death", 15,23,2, "spider_death_1")
spawn("temple_secret_door", 12,25,1, "temple_secret_door_115")
spawn("temple_secret_door", 12,28,1, "temple_secret_door_116")
spawn("temple_secret_door", 18,28,3, "temple_secret_door_117")
spawn("temple_secret_door", 18,25,3, "temple_secret_door_118")
spawn("temple_pillar", 13,26,2, "temple_pillar_111")
spawn("temple_pillar", 13,28,0, "temple_pillar_112")
spawn("temple_pillar", 18,28,3, "temple_pillar_113")
spawn("temple_pillar", 18,26,0, "temple_pillar_114")
spawn("temple_floor_ros_02", 18,22,3, "temple_floor_ros_02_7")
spawn("temple_mosaic_wall_ros_1", 18,22,3, "temple_mosaic_wall_ros_1_10")
spawn("temple_mosaic_wall_ros_1", 18,22,1, "temple_mosaic_wall_ros_1_11")
spawn("temple_pressure_plate", 18,23,3, "temple_pressure_plate_44")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_14", "open")
	:addConnector("activate", "temple_door_portcullis_13", "close")
	:addConnector("activate", "temple_door_portcullis_15", "close")
spawn("temple_secret_door", 15,24,0, "temple_secret_door_119")
spawn("lock_emerald", 20,30,2, "lock_emerald_1")
	:setOpenedBy("emerald_key")
	:addConnector("activate", "temple_door_iron_5", "open")
spawn("temple_alcove", 19,30,3, "temple_alcove_emerald_1")
spawn("torch_holder", 20,28,1, "torch_holder_94")
	:addTorch()
spawn("temple_door_iron", 20,30,3, "temple_door_iron_5")
spawn("counter", 17,24,0, "counter_3")
	:setInitialValue(6)
	:setValue(6)
	:addConnector("activate", "ros_firstSealScript", "openSeal")
spawn("temple_secret_door", 16,31,3, "temple_secret_door_122")
spawn("spider_great", 16,31,3, "spider_great_5")
spawn("timer", 13,24,2, "timer_51")
	:setTimerInterval(2)
	:addConnector("activate", "temple_secret_door_112", "open")
	:addConnector("activate", "temple_secret_door_111", "open")
	:addConnector("activate", "temple_secret_door_113", "open")
	:addConnector("activate", "temple_secret_door_114", "open")
	:addConnector("activate", "timer_54", "activate")
	:addConnector("activate", "timer_51", "deactivate")
spawn("temple_goromorg_statue", 12,28,3, "temple_goromorg_statue_18")
spawn("temple_goromorg_statue", 12,25,3, "temple_goromorg_statue_19")
spawn("temple_goromorg_statue", 18,25,1, "temple_goromorg_statue_20")
spawn("temple_goromorg_statue", 18,28,1, "temple_goromorg_statue_21")
spawn("timer", 12,24,3, "timer_54")
	:setTimerInterval(5)
	:addConnector("activate", "temple_secret_door_115", "open")
	:addConnector("activate", "temple_secret_door_116", "open")
	:addConnector("activate", "temple_secret_door_118", "open")
	:addConnector("activate", "temple_secret_door_117", "open")
	:addConnector("activate", "temple_secret_door_122", "open")
	:addConnector("activate", "temple_secret_door_119", "open")
	:addConnector("activate", "timer_54", "deactivate")
spawn("temple_pit", 16,10,0, "temple_pit_76")
spawn("temple_stairs_up", 1,17,0, "temple_stairs_up_47")
spawn("temple_stairs_up", 7,26,0, "temple_stairs_up_48")
spawn("temple_stairs_up", 22,27,2, "temple_stairs_up_49")
spawn("temple_stairs_down", 26,25,1, "temple_stairs_down_52")
spawn("temple_alcove", 3,24,2, "temple_alcove_89")
spawn("tar_bead", 5,22,1, "tar_bead_15")
spawn("grim_cap", 5,22,0, "grim_cap_4")
spawn("torch_holder", 24,23,0, "torch_holder_98")
	:addTorch()
spawn("gobelin_dain", 24,24,3, "gobelin_dain_1")
spawn("gobelin_dain", 24,24,1, "gobelin_dain_2")
spawn("script_entity", 24,26,2, "script_entity_50")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9The Second Circle\
\9\
\9Light and Night, Day and Darkness\
\9Always in balance, always unbalanced\
\9]])\
\
temple_alcove_93:addItem(message)")
spawn("temple_alcove", 24,25,2, "temple_alcove_93")
spawn("temple_pit", 25,23,2, "temple_pit_84")
	:addTrapDoor()
	:setPitState("closed")
spawn("temple_pressure_plate", 24,23,2, "temple_pressure_plate_9")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "temple_pit_84", "toggle")
spawn("temple_secret_door", 15,16,3, "temple_secret_door_135")
spawn("lever", 14,16,0, "lever_21")
	:setLeverState("activated")
	:addConnector("any", "temple_secret_door_135", "toggle")
spawn("temple_stairs_up", 12,15,3, "temple_stairs_up_57")
spawn("sling", 8,8,3, "sling_1")
spawn("temple_door_portcullis", 12,8,3, "temple_door_portcullis_85")
	:addPullChain()
spawn("teleporter", 9,8,3, "teleporter_86")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(10,8,3,5)
	:setChangeFacing(false)
spawn("temple_secret_button_small", 11,8,0, "temple_secret_button_small_16")
	:addConnector("toggle", "timer_57", "activate")
spawn("timer", 11,7,3, "timer_57")
	:setTimerInterval(3)
	:addConnector("activate", "teleporter_86", "deactivate")
	:addConnector("activate", "timer_58", "activate")
	:addConnector("activate", "timer_57", "deactivate")
spawn("timer", 10,7,3, "timer_58")
	:setTimerInterval(1.5)
	:addConnector("activate", "teleporter_86", "activate")
	:addConnector("activate", "timer_58", "deactivate")
spawn("spider_great", 10,8,1, "spider_great_6")
spawn("rock", 15,4,1, "rock_22")
spawn("arrow", 6,4,0, "arrow_11")
spawn("throwing_knife", 15,8,0, "throwing_knife_2")
spawn("throwing_knife", 15,8,0, "throwing_knife_3")
spawn("throwing_knife", 15,8,0, "throwing_knife_9")
spawn("temple_alcove", 19,26,0, "temple_alcove_26")
	:addItem(spawn("lurker_hood"))
spawn("temple_alcove", 19,27,2, "temple_alcove_98")
	:addItem(spawn("serpent_bracer"))
spawn("script_entity", 1,24,1, "script_entity_53")
	:setSource("function testBestiary()\
\9bestiaryTracker.addMonster(\"skeleton_redguard\")\
\9bestiaryTracker.addMonster(\"spider_great\")\
end")
spawn("temple_pressure_plate", 1,23,1, "temple_pressure_plate_40")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "script_entity_53", "testBestiary")
spawn("temple_secret_door", 11,13,2, "temple_secret_door_137")
spawn("temple_secret_door", 12,13,3, "temple_secret_door_138")
spawn("temple_secret_door", 10,13,1, "temple_secret_door_139")
	:setDoorState("open")
spawn("temple_secret_door", 11,12,2, "temple_secret_door_140")
	:setDoorState("open")
spawn("temple_stairs_down", 11,14,2, "temple_stairs_down_60")
spawn("spawner", 22,11,3, "spawner_58")
	:setSpawnedEntity("ice_lizard")
	:setCoolDown(300)
spawn("zone_marker", 15,17,3, "zone_marker_2")
	:setSource("zone = \"mainStairs\"")
spawn("zone_marker", 16,17,3, "zone_marker_4")
	:setSource("zone = \"passageways\"")
spawn("zone_marker", 14,16,3, "zone_marker_5")
	:setSource("zone = \"passageways\"")
spawn("zone_marker", 15,14,3, "zone_marker_7")
	:setSource("zone = \"mainStairs\"")
spawn("zone_marker", 3,10,3, "zone_marker_37")
	:setSource("zone = \"ku_firstSeal\"")
spawn("zone_marker", 1,17,3, "zone_marker_38")
	:setSource("zone = \"ku_firstSeal\"")
spawn("zone_marker", 4,20,3, "zone_marker_39")
	:setSource("zone = \"ku_firstSeal\"")
spawn("zone_marker", 3,20,3, "zone_marker_40")
	:setSource("zone = \"ku_firstSeal.ruby\"")
spawn("zone_marker", 17,21,3, "zone_marker_41")
	:setSource("zone = \"ku_firstSeal\"")
spawn("zone_marker", 18,21,3, "zone_marker_42")
	:setSource("zone = \"passageways\"")
spawn("iron_bracelet", 9,17,2, "iron_bracelet_1")
spawn("iron_bracelet", 8,18,1, "iron_bracelet_2")
spawn("iron_bracelet", 10,18,3, "iron_bracelet_3")
spawn("zone_marker", 15,1,3, "zone_marker_44")
	:setSource("zone = \"ros_firstTeaching\"")
spawn("zone_marker", 12,7,3, "zone_marker_45")
	:setSource("zone = \"ros_firstTeaching\"")
spawn("zone_marker", 13,8,3, "zone_marker_46")
	:setSource("zone = \"ros_firstTeaching\"")
spawn("zone_marker", 12,9,3, "zone_marker_47")
	:setSource("zone = \"ros_firstTeaching\"")
spawn("zone_marker", 12,8,3, "zone_marker_48")
	:setSource("zone = \"ros_firstTeaching.sling\"")
spawn("zone_marker", 7,1,3, "zone_marker_49")
	:setSource("zone = \"ros_firstTeaching\"")
spawn("temple_secret_door_drain_open", 16,17,3, "temple_secret_door_drain_open_2")
spawn("daemon_head", 18,9,0, "daemon_head_53")
spawn("zone_marker", 10,30,3, "zone_marker_87")
	:setSource("zone = \"ros_firstSeal\"")
spawn("zone_marker", 7,26,3, "zone_marker_88")
	:setSource("zone = \"ros_firstSeal\"")
spawn("zone_marker", 20,29,3, "zone_marker_89")
	:setSource("zone = \"ros_firstSeal\"")
spawn("zone_marker", 18,22,3, "zone_marker_90")
	:setSource("zone = \"ros_firstSeal\"")
spawn("zone_marker", 20,30,3, "zone_marker_91")
	:setSource("zone = \"ros_firstSeal.emerald\"")
spawn("zone_marker", 26,10,3, "zone_marker_93")
	:setSource("zone = \"dain_firstSeal.entrance\"")
spawn("zone_marker", 26,8,3, "zone_marker_94")
	:setSource("zone = \"dain_firstSeal.entrance\"")
spawn("zone_marker", 25,8,3, "zone_marker_95")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 24,14,3, "zone_marker_96")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 28,14,3, "zone_marker_97")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 28,20,3, "zone_marker_98")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 24,20,3, "zone_marker_99")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 19,21,3, "zone_marker_100")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 24,24,3, "zone_marker_101")
	:setSource("zone = \"dain_secondCircle.corridors\"")
spawn("zone_marker", 24,23,3, "zone_marker_102")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 25,12,3, "zone_marker_103")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 26,13,3, "zone_marker_104")
	:setSource("zone = \"dain_firstSeal\"")
spawn("zone_marker", 26,12,3, "zone_marker_105")
	:setSource("zone = \"dain_firstSeal.amethyst\"")
spawn("zone_marker", 21,8,3, "zone_marker_106")
	:setSource("zone = \"dain_AirLab_1\"")
spawn("zone_marker", 25,6,3, "zone_marker_107")
	:setSource("zone = \"dain_AirLab_1\"")

--- level 6 ---

mapName("The Junction")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
#...################...#########
#.#..##..###..#......#...#######
##...###...##..#.###...###....##
#..#.#.#.#....#...#.#######.#.##
#.#.##.#...#.#..#..###........##
#.#.#...#..#.#.....###..###.#.##
#...#.#.#.#...#...##.##.#.#...##
#...#...#......#.###......##.###
###..#.#########.###########..##
#....#.##..###.....###..####.##.
..#.##.#....##.....##....#.#....
#.#.##...#......#......#...#.###
#.##.#.#....##.....##....#.#....
#....#.##..###.....###..##.##.#.
##.#.###.##.###.#.##.#####.#....
#..#........##.####....##...#.#.
##...#.#.##....#....#..##.#.#...
#.####....#.##.#.##....##...###.
#.#....##.#..##..#########.##...
#.##.##.#.#####.#..#..####.####.
#.......#...##.##.....#.####.###
######.#..##.....#...##.........
####.#.###.......#...##########.
####.......#.....#...#..#...####
##############.###...#....#.#..#
###.......#...#.........##..##.#
###.#.#.#.#.#....##.#.##.#######
###...#.#.#.#.##......#......##.
###.#.#...#....####.###.#.#.....
..#.#.#.#.#..#...#...##...#.#.#.
.##........#.#.###.....##.....#.
....########...#...#####..###.##
]])
spawn("torch_holder", 14,10,3, "torch_holder_2")
	:addTorch()
spawn("torch_holder", 16,13,2, "torch_holder_10")
	:addTorch()
spawn("temple_stairs_down", 17,14,2, "temple_stairs_down_1")
spawn("temple_stairs_up", 15,14,2, "temple_stairs_up_1")
spawn("temple_stairs_up", 15,1,3, "temple_stairs_up_4")
spawn("temple_stairs_up", 26,10,0, "temple_stairs_up_5")
spawn("temple_stairs_down", 6,13,2, "temple_stairs_down_2")
spawn("temple_alcove", 9,9,0, "temple_alcove_1")
	:addItem(spawn("round_shield"))
spawn("temple_alcove", 10,9,0, "temple_alcove_2")
	:addItem(spawn("machete"))
spawn("temple_alcove", 9,13,2, "temple_alcove_3")
	:addItem(spawn("leather_cap"))
spawn("temple_alcove", 10,13,2, "temple_alcove_4")
	:addItem(spawn("leather_boots"))
spawn("temple_alcove", 22,9,0, "temple_alcove_5")
	:addItem(spawn("conjurers_hat"))
spawn("temple_alcove", 23,9,0, "temple_alcove_6")
	:addItem(spawn("shock_bomb"))
spawn("temple_alcove", 22,13,2, "temple_alcove_7")
	:addItem(spawn("mortar"))
spawn("temple_alcove", 23,13,2, "temple_alcove_8")
	:addItem(spawn("flask"))
spawn("temple_alcove", 18,4,1, "temple_alcove_9")
	:addItem(spawn("throwing_knife"))
	:addItem(spawn("throwing_knife"))
	:addItem(spawn("throwing_knife"))
spawn("temple_alcove", 18,5,1, "temple_alcove_10")
	:addItem(spawn("compass"))
spawn("temple_alcove", 14,4,3, "temple_alcove_11")
	:addItem(spawn("huntsman_cloak"))
spawn("temple_alcove", 14,5,3, "temple_alcove_12")
	:addItem(spawn("dagger"))
spawn("temple_alcove", 22,2,1, "temple_alcove_14")
spawn("temple_alcove", 25,17,2, "temple_alcove_15")
spawn("temple_wall_text_long", 14,12,3, "temple_wall_text_long_1")
	:setWallText("The Way of Ku-Dhaar, \
The Way of the Fighter")
spawn("temple_wall_text_long", 17,9,0, "temple_wall_text_long_2")
	:setWallText("The Way of Zaros, \
The Way of the Rogue")
spawn("temple_wall_text_long", 18,12,1, "temple_wall_text_long_3")
	:setWallText("The Way of Eldain, \
The Way of the Mage")
spawn("torch_holder", 6,7,0, "torch_holder_3")
	:addTorch()
spawn("torch_holder", 20,1,1, "torch_holder_5")
	:addTorch()
spawn("torch_holder", 15,6,2, "torch_holder_7")
spawn("torch_holder", 11,12,1, "torch_holder_8")
spawn("torch_holder", 26,15,2, "torch_holder_12")
	:addTorch()
spawn("temple_door_ornament", 6,5,0, "temple_door_ornament_1")
spawn("temple_door_ornament", 23,1,3, "temple_door_ornament_2")
spawn("temple_door_ornament", 26,17,2, "temple_door_ornament_3")
spawn("temple_wall_text", 5,5,0, "temple_wall_text_1")
	:setWallText("Tomb of Ku-Dhaar")
spawn("temple_wall_text", 22,0,1, "temple_wall_text_2")
	:setWallText("Tomb of Zaros")
spawn("temple_wall_text", 27,17,2, "temple_wall_text_3")
	:setWallText("Tomb of Eldain")
spawn("temple_wall_text", 16,12,0, "temple_wall_text_4")
	:setWallText("The Junction")
spawn("torch_holder", 6,5,2, "torch_holder_14")
	:addTorch()
spawn("torch_holder", 11,10,1, "torch_holder_15")
	:addTorch()
spawn("torch_holder", 21,12,3, "torch_holder_16")
	:addTorch()
spawn("torch_holder", 21,10,3, "torch_holder_17")
spawn("torch_holder", 17,6,2, "torch_holder_13")
	:addTorch()
spawn("torch_holder", 22,1,3, "torch_holder_18")
	:addTorch()
spawn("torch_holder", 26,17,0, "torch_holder_19")
	:addTorch()
spawn("temple_mosaic_wall_ku_1", 13,11,2, "temple_mosaic_wall_ku_1_1")
spawn("temple_mosaic_wall_ku_1", 12,11,0, "temple_mosaic_wall_ku_1_2")
spawn("temple_mosaic_wall_ku_2", 13,11,0, "temple_mosaic_wall_ku_2_1")
spawn("temple_mosaic_wall_ku_2", 12,11,2, "temple_mosaic_wall_ku_2_2")
spawn("temple_goromorg_statue", 15,11,1, "temple_goromorg_statue_1")
spawn("temple_goromorg_statue", 17,11,3, "temple_goromorg_statue_2")
spawn("temple_goromorg_statue", 16,10,2, "temple_goromorg_statue_3")
spawn("temple_gladiator_statue_axe", 14,9,3, "temple_gladiator_statue_axe_1")
spawn("temple_gladiator_statue_flail", 18,9,1, "temple_gladiator_statue_flail_1")
spawn("temple_gladiator_statue_spear", 14,9,0, "temple_gladiator_statue_spear_1")
spawn("temple_gladiator_statue_sword", 18,9,0, "temple_gladiator_statue_sword_1")
spawn("temple_gladiator_statue_sword", 18,13,1, "temple_gladiator_statue_sword_2")
spawn("temple_gladiator_statue_spear", 18,13,2, "temple_gladiator_statue_spear_2")
spawn("temple_gladiator_statue_flail", 14,13,3, "temple_gladiator_statue_flail_2")
spawn("temple_gladiator_statue_axe", 14,13,2, "temple_gladiator_statue_axe_2")
spawn("temple_door_portcullis", 13,11,3, "temple_door_portcullis_1")
	:setDoorState("open")
spawn("pressure_plate_hidden", 13,11,1, "pressure_plate_hidden_1")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_1", "open")
spawn("pressure_plate_hidden", 12,11,3, "pressure_plate_hidden_2")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_1", "close")
spawn("temple_mosaic_wall_ku_2", 6,10,1, "temple_mosaic_wall_ku_2_4")
spawn("temple_mosaic_wall_ku_1", 6,10,3, "temple_mosaic_wall_ku_1_3")
spawn("temple_mosaic_wall_ku_1", 6,8,1, "temple_mosaic_wall_ku_1_4")
spawn("temple_goromorg_statue", 6,9,3, "temple_goromorg_statue_4")
spawn("temple_goromorg_statue", 6,9,1, "temple_goromorg_statue_5")
spawn("daemon_head", 5,5,3, "daemon_head_1")
spawn("daemon_head", 7,5,1, "daemon_head_2")
spawn("daemon_head", 7,7,1, "daemon_head_4")
spawn("daemon_head", 5,7,3, "daemon_head_5")
spawn("temple_mosaic_wall_ku_2", 6,8,3, "temple_mosaic_wall_ku_2_5")
spawn("temple_alcove", 10,11,3, "temple_alcove_19")
spawn("script_entity", 9,11,3, "script_entity_1")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9Ku-Dhaar, as disciple,\
\9Only had these.\
\9Pretenders to its title,\
\9Let them be your keys.\
\9]])\
\
temple_alcove_19:addItem(message)")
spawn("temple_pillar", 10,13,1, "temple_pillar_1")
spawn("temple_pillar", 10,10,3, "temple_pillar_2")
spawn("temple_mosaic_wall_dain_1", 19,11,0, "temple_mosaic_wall_dain_1_1")
spawn("temple_mosaic_wall_dain_1", 19,11,2, "temple_mosaic_wall_dain_1_2")
spawn("temple_mosaic_wall_dain_2", 20,11,0, "temple_mosaic_wall_dain_2_1")
spawn("temple_mosaic_wall_dain_2", 20,11,2, "temple_mosaic_wall_dain_2_2")
spawn("temple_door_portcullis", 20,11,3, "temple_door_portcullis_3")
	:setDoorState("open")
spawn("pressure_plate_hidden", 20,11,1, "pressure_plate_hidden_5")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_3", "close")
spawn("pressure_plate_hidden", 19,11,3, "pressure_plate_hidden_3")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_3", "open")
spawn("temple_pillar", 23,10,3, "temple_pillar_4")
spawn("temple_alcove", 22,11,1, "temple_alcove_21")
spawn("pressure_plate_hidden", 16,8,1, "pressure_plate_hidden_6")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_4", "open")
spawn("temple_door_portcullis", 16,8,0, "temple_door_portcullis_4")
	:setDoorState("open")
spawn("pressure_plate_hidden", 16,11,3, "pressure_plate_hidden_7")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_4", "close")
	:addConnector("activate", "hs_level_6", "hsRosTomb")
spawn("pressure_plate_hidden", 16,12,1, "pressure_plate_hidden_8")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_1", "open")
	:addConnector("activate", "temple_door_portcullis_4", "open")
	:addConnector("activate", "temple_door_portcullis_3", "open")
spawn("pressure_plate_hidden", 17,13,1, "pressure_plate_hidden_9")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_1", "open")
	:addConnector("activate", "temple_door_portcullis_4", "open")
	:addConnector("activate", "temple_door_portcullis_3", "open")
spawn("temple_goromorg_statue", 26,13,1, "temple_goromorg_statue_8")
spawn("temple_goromorg_statue", 26,13,3, "temple_goromorg_statue_6")
spawn("daemon_head", 27,15,1, "daemon_head_9")
spawn("daemon_head", 25,17,3, "daemon_head_3")
spawn("daemon_head", 25,15,3, "daemon_head_6")
spawn("daemon_head", 27,17,1, "daemon_head_7")
spawn("temple_mosaic_wall_dain_1", 26,12,1, "temple_mosaic_wall_dain_1_5")
spawn("temple_mosaic_wall_dain_1", 26,12,3, "temple_mosaic_wall_dain_1_3")
spawn("temple_mosaic_wall_dain_2", 26,19,3, "temple_mosaic_wall_dain_2_5")
spawn("temple_mosaic_wall_dain_2", 26,19,1, "temple_mosaic_wall_dain_2_3")
spawn("temple_stairs_down", 3,4,0, "temple_stairs_down_8")
spawn("temple_stairs_up", 3,11,2, "temple_stairs_up_9")
spawn("pressure_plate_hidden", 15,13,1, "pressure_plate_hidden_15")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_1", "open")
	:addConnector("activate", "temple_door_portcullis_4", "open")
	:addConnector("activate", "temple_door_portcullis_3", "open")
spawn("torch_holder", 18,10,1, "torch_holder_6")
	:addTorch()
spawn("temple_door_portcullis", 14,21,0, "temple_door_portcullis_6")
spawn("temple_door_portcullis", 14,24,0, "temple_door_portcullis_7")
spawn("temple_alcove", 16,22,1, "temple_alcove_32")
	:addItem(spawn("sword_silver"))
	:addConnector("deactivate", "temple_door_portcullis_6", "open")
	:addConnector("deactivate", "temple_door_portcullis_7", "open")
	:addConnector("deactivate", "temple_door_portcullis_10", "close")
spawn("teleporter", 1,17,2, "teleporter_3")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(11,18,2,6)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("teleporter", 8,21,0, "teleporter_5")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(4,22,0,6)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("teleporter", 8,14,3, "teleporter_6")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(1,15,3,6)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("skeleton_redguard", 14,24,0, "skeleton_redguard_2")
	:setAIState("guard")
spawn("skeleton_redguard", 14,20,2, "skeleton_redguard_3")
	:setAIState("guard")
spawn("torch_holder", 16,21,1, "torch_holder_23")
	:addTorch()
spawn("torch_holder", 4,8,1, "torch_holder_25")
	:addTorch()
spawn("temple_mosaic_wall_ku_1", 13,21,0, "temple_mosaic_wall_ku_1_9")
spawn("temple_mosaic_wall_ku_2", 13,23,2, "temple_mosaic_wall_ku_2_8")
spawn("temple_mosaic_wall_ku_1", 15,23,2, "temple_mosaic_wall_ku_1_7")
spawn("temple_mosaic_wall_ku_2", 15,21,0, "temple_mosaic_wall_ku_2_3")
spawn("daemon_head", 16,23,1, "daemon_head_8")
spawn("temple_gladiator_statue_sword", 12,21,3, "temple_gladiator_statue_sword_3")
spawn("temple_gladiator_statue_sword", 12,23,3, "temple_gladiator_statue_sword_4")
spawn("skeleton_warrior", 4,14,2, "skeleton_warrior_6")
spawn("skeleton_archer", 11,18,0, "skeleton_archer_1")
spawn("skeleton_archer", 3,18,1, "skeleton_archer_2")
spawn("skeleton_warrior", 7,19,2, "skeleton_warrior_1")
spawn("temple_pit", 7,15,3, "temple_pit_5")
spawn("temple_pit", 2,6,0, "temple_pit_6")
spawn("temple_secret_button_large", 14,20,3, "temple_secret_button_large_4")
	:addConnector("toggle", "temple_door_portcullis_10", "toggle")
spawn("temple_floor_ku_01", 14,22,1, "temple_floor_ku_01_1")
spawn("temple_door_portcullis", 11,22,1, "temple_door_portcullis_10")
	:setDoorState("open")
spawn("temple_door_portcullis", 7,17,3, "temple_door_portcullis_11")
	:addPullChain()
	:setDoorState("open")
spawn("temple_catacomb_skeleton_down", 2,14,3, "temple_catacomb_skeleton_down_3")
spawn("temple_catacomb_skeleton_down", 6,17,3, "temple_catacomb_skeleton_down_4")
spawn("temple_catacomb_skeleton_down", 9,18,1, "temple_catacomb_skeleton_down_5")
spawn("temple_catacomb_skeleton_up", 3,20,2, "temple_catacomb_skeleton_up_2")
spawn("temple_catacomb_skeleton_up", 8,23,0, "temple_catacomb_skeleton_up_3")
spawn("temple_catacomb_skeleton_up", 10,15,0, "temple_catacomb_skeleton_up_4")
spawn("temple_catacomb_empty", 1,11,1, "temple_catacomb_empty_3")
spawn("temple_catacomb_empty", 5,20,0, "temple_catacomb_empty_4")
spawn("temple_catacomb_empty", 11,20,0, "temple_catacomb_empty_5")
spawn("temple_alcove", 11,20,1, "temple_alcove_37")
	:addItem(spawn("iron_key"))
spawn("mole_jerky", 1,18,1, "mole_jerky_5")
spawn("leather_gloves", 11,18,1, "leather_gloves_2")
spawn("doublet", 7,19,1, "doublet_1")
spawn("tar_bead", 1,15,3, "tar_bead_4")
spawn("cave_nettle", 9,21,2, "cave_nettle_1")
spawn("temple_door_portcullis", 2,9,3, "temple_door_portcullis_17")
	:addPullChain()
spawn("spawner", 1,20,1, "spawner_1")
	:setSpawnedEntity("skeleton_warrior")
	:setCoolDown(20)
spawn("spawner", 9,17,3, "spawner_2")
	:setSpawnedEntity("skeleton_archer")
	:setCoolDown(30)
spawn("pressure_plate_hidden", 3,16,1, "pressure_plate_hidden_20")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_1", "activate")
spawn("pressure_plate_hidden", 8,16,1, "pressure_plate_hidden_22")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_1", "activate")
spawn("pressure_plate_hidden", 6,23,1, "pressure_plate_hidden_23")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_1", "activate")
spawn("pressure_plate_hidden", 6,18,1, "pressure_plate_hidden_24")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_2", "activate")
spawn("pressure_plate_hidden", 10,22,1, "pressure_plate_hidden_25")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_2", "activate")
spawn("pressure_plate_hidden", 11,15,1, "pressure_plate_hidden_26")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_2", "activate")
spawn("pressure_plate_hidden", 9,20,1, "pressure_plate_hidden_27")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_1", "activate")
spawn("temple_secret_button_small", 5,15,0, "temple_secret_button_small_3")
	:addConnector("toggle", "temple_secret_door_20", "toggle")
	:addConnector("toggle", "temple_secret_door_76", "toggle")
spawn("temple_secret_door", 4,14,0, "temple_secret_door_20")
spawn("baked_maggot", 4,13,3, "baked_maggot_5")
spawn("throwing_knife", 4,2,1, "throwing_knife_1")
spawn("temple_secret_door", 3,1,0, "temple_secret_door_21")
spawn("temple_secret_button_large", 1,5,3, "temple_secret_button_large_5")
	:addConnector("toggle", "temple_secret_door_21", "toggle")
spawn("temple_door_portcullis", 2,2,1, "temple_door_portcullis_18")
	:addPullChain()
spawn("temple_alcove", 4,1,1, "temple_alcove_45")
spawn("leather_boots", 4,1,0, "leather_boots_1")
spawn("tar_bead", 1,1,1, "tar_bead_6")
spawn("tar_bead", 1,1,1, "tar_bead_7")
spawn("temple_pit", 4,3,0, "temple_pit_9")
spawn("altar", 6,3,2, "altar_1")
spawn("temple_mosaic_wall_ku_2", 6,3,3, "temple_mosaic_wall_ku_2_14")
spawn("temple_mosaic_wall_ku_1", 6,3,1, "temple_mosaic_wall_ku_1_15")
spawn("temple_floor_ku_01", 6,4,0, "temple_floor_ku_01_2")
spawn("temple_alcove", 7,5,0, "temple_alcove_16")
spawn("script_entity", 7,4,2, "script_entity_11")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Masters of the third circle, step forward and the way will be clear.\")\
\
temple_alcove_16:addItem(message)\
")
spawn("secret", 4,13,2, "secret_7")
spawn("secret", 3,0,3, "secret_8")
spawn("script_entity", 23,11,3, "script_entity_13")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9Eldain, aspiring mage,\
\9Put these to good use.\
\9Your turn now to turn the page,\
\9And uncover knowledge recluse.\
\9]])\
\
temple_alcove_21:addItem(message)")
spawn("altar", 26,19,2, "altar_3")
spawn("script_entity", 25,18,2, "script_entity_14")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Masters of the third circle, step forward and the way will be clear.\")\
\
temple_alcove_15:addItem(message)\
")
spawn("temple_mosaic_wall_dain_2", 26,14,3, "temple_mosaic_wall_dain_2_10")
spawn("temple_mosaic_wall_dain_2", 26,14,1, "temple_mosaic_wall_dain_2_7")
spawn("temple_floor_dain_01", 26,18,2, "temple_floor_dain_01_5")
spawn("temple_stairs_up", 25,6,0, "temple_stairs_up_14")
spawn("teleporter", 22,7,0, "teleporter_14")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(21,8,0,5)
spawn("temple_wall_grating", 23,7,3, "temple_wall_grating_25")
spawn("temple_pit", 22,4,2, "temple_pit_13")
spawn("daemon_head", 27,2,0, "daemon_head_10")
spawn("daemon_head", 29,6,2, "daemon_head_14")
spawn("spawner", 27,2,2, "spawner_3")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("timer", 28,3,3, "timer_4")
	:setTimerInterval(4)
	:activate()
	:addConnector("activate", "dain_airLab_2Script", "lightnings")
spawn("temple_secret_door", 28,4,3, "temple_secret_door_46")
spawn("temple_secret_door", 29,4,3, "temple_secret_door_47")
spawn("temple_secret_button_small", 28,6,0, "temple_secret_button_small_4")
	:addConnector("toggle", "temple_secret_door_46", "toggle")
	:addConnector("toggle", "temple_secret_door_47", "toggle")
spawn("temple_stairs_down", 26,2,3, "temple_stairs_down_22")
spawn("teleporter", 27,3,3, "teleporter_26")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,4,3,6)
	:setChangeFacing(false)
spawn("teleporter", 29,5,3, "teleporter_28")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(29,6,3,6)
	:setChangeFacing(false)
spawn("altar", 24,1,3, "altar_5")
spawn("temple_alcove", 28,7,1, "temple_alcove_17")
	:addItem(spawn("tome_air"))
	:addConnector("deactivate", "temple_door_portcullis_30", "open")
spawn("temple_stairs_down", 29,8,1, "temple_stairs_down_13")
spawn("temple_door_portcullis", 28,6,2, "temple_door_portcullis_30")
spawn("temple_stairs_up", 31,22,2, "temple_stairs_up_26")
spawn("temple_door_portcullis", 31,12,3, "temple_door_portcullis_35")
spawn("temple_door_portcullis", 30,14,3, "temple_door_portcullis_37")
spawn("temple_door_portcullis", 30,16,1, "temple_door_portcullis_40")
spawn("teleporter", 30,12,2, "teleporter_27")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,14,2,6)
	:setChangeFacing(false)
spawn("teleporter", 30,16,0, "teleporter_31")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(31,14,0,6)
	:setChangeFacing(false)
spawn("teleporter", 30,14,3, "teleporter_32")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,12,3,6)
	:setChangeFacing(false)
spawn("teleporter", 31,19,3, "teleporter_33")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,12,3,6)
	:setChangeFacing(false)
spawn("temple_wall_grating", 29,12,2, "temple_wall_grating_35")
spawn("temple_wall_grating", 31,16,0, "temple_wall_grating_36")
spawn("temple_pressure_plate", 29,13,2, "temple_pressure_plate_19")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "teleporter_32", "deactivate")
	:addConnector("deactivate", "teleporter_34", "deactivate")
	:addConnector("activate", "teleporter_34", "activate")
	:addConnector("deactivate", "teleporter_32", "activate")
spawn("temple_pressure_plate", 31,15,1, "temple_pressure_plate_23")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "teleporter_30", "deactivate")
	:addConnector("activate", "teleporter_36", "activate")
	:addConnector("deactivate", "teleporter_30", "activate")
	:addConnector("deactivate", "teleporter_36", "deactivate")
spawn("teleporter", 30,14,3, "teleporter_34")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(31,16,3,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 31,17,1, "teleporter_30")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,12,1,6)
	:setChangeFacing(false)
spawn("teleporter", 31,17,1, "teleporter_36")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(31,18,1,6)
spawn("temple_stairs_down", 29,18,3, "temple_stairs_down_25")
spawn("grim_cap", 31,13,1, "grim_cap_1")
spawn("rusted_mace", 29,15,3, "rusted_mace_2")
spawn("rusted_mail", 29,15,0, "rusted_mail_1")
spawn("note", 29,15,0, "note_2")
	:setScrollText("The plates control the teleporters\
but I cannot find the pattern.\
\
I'm running out of food. Not much time left. \
Must hurry. \
And then the... what's this? The wall... .o.. ")
spawn("temple_secret_button_small", 29,15,1, "temple_secret_button_small_5")
	:addConnector("toggle", "temple_secret_door_55", "toggle")
spawn("temple_secret_door", 28,14,1, "temple_secret_door_55")
spawn("herder_swarm", 28,14,1, "herder_swarm_1")
spawn("temple_alcove", 28,14,0, "temple_alcove_53")
	:addItem(spawn("poison_bomb"))
	:addItem(spawn("poison_bomb"))
spawn("baked_maggot", 31,16,2, "baked_maggot_7")
spawn("temple_pit", 28,28,2, "temple_pit_26")
spawn("torch_holder", 24,4,0, "torch_holder_38")
	:addTorch()
spawn("torch_holder", 28,11,3, "torch_holder_39")
	:addTorch()
spawn("temple_pillar", 23,13,3, "temple_pillar_49")
spawn("temple_stairs_down", 23,20,0, "temple_stairs_down_34")
spawn("teleporter", 28,21,3, "teleporter_39")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(29,21,3,6)
	:setChangeFacing(false)
spawn("teleporter", 26,21,3, "teleporter_42")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(27,21,3,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 24,21,3, "teleporter_47")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(25,21,3,6)
	:setChangeFacing(false)
	:deactivate()
spawn("torch_holder", 27,21,0, "torch_holder_45")
	:addTorch()
spawn("baked_maggot", 25,21,0, "baked_maggot_8")
spawn("temple_secret_door", 28,20,2, "temple_secret_door_62")
spawn("leather_pants", 28,20,0, "leather_pants_1")
spawn("milkreed", 28,20,3, "milkreed_2")
spawn("secret", 28,20,2, "secret_11")
spawn("temple_stairs_up", 31,9,0, "temple_stairs_up_34")
spawn("secret", 28,14,1, "secret_15")
spawn("temple_stairs_down", 31,27,0, "temple_stairs_down_35")
spawn("torch_holder", 25,27,0, "torch_holder_53")
	:addTorch()
spawn("torch_holder", 28,30,2, "torch_holder_57")
	:addTorch()
spawn("daemon_head", 29,28,0, "daemon_head_35")
spawn("temple_stairs_up", 24,31,3, "temple_stairs_up_36")
spawn("spawner", 29,28,2, "spawner_32")
	:setSpawnedEntity("")
	:setCoolDown(0)
spawn("pressure_plate_hidden", 24,31,3, "pressure_plate_hidden_52")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_25", "activate")
	:addConnector("activate", "hs_level_6", "hsIceLab2")
	:addConnector("activate", "timer_62", "activate")
spawn("temple_alcove", 23,28,3, "temple_alcove_65")
	:addItem(spawn("frost_bomb"))
spawn("temple_secret_door", 31,29,0, "temple_secret_door_69")
spawn("temple_secret_button_small", 29,29,1, "temple_secret_button_small_9")
	:addConnector("toggle", "temple_secret_door_69", "toggle")
spawn("milkreed", 31,30,3, "milkreed_3")
spawn("secret", 31,29,1, "secret_16")
spawn("temple_wall_grating", 26,30,3, "temple_wall_grating_45")
spawn("pressure_plate_hidden", 31,27,3, "pressure_plate_hidden_54")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_25", "activate")
	:addConnector("activate", "hs_level_6", "hsIceLab2")
	:addConnector("activate", "timer_62", "activate")
spawn("temple_secret_door", 27,28,2, "temple_secret_door_70")
	:setDoorState("open")
spawn("lever", 29,21,2, "lever_15")
	:addConnector("any", "teleporter_39", "toggle")
	:addConnector("any", "teleporter_47", "toggle")
spawn("lever", 27,21,2, "lever_18")
	:addConnector("any", "teleporter_42", "toggle")
	:addConnector("any", "teleporter_47", "toggle")
spawn("lever", 25,21,2, "lever_19")
	:addConnector("any", "teleporter_42", "toggle")
	:addConnector("any", "teleporter_39", "toggle")
spawn("temple_secret_button_small", 29,21,0, "temple_secret_button_small_7")
	:addConnector("toggle", "temple_secret_door_62", "toggle")
spawn("script_entity", 16,14,2, "hs_level_6")
	:setSource("function hsEarthLab2()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Earth Laboratory, Level 2\
\9\
\9A teleporters puzzle, this area simply requires you to place objects on\
\9both pressure plates to change the teleportation fields destination and\
\9lead the way to the next level.\
\9\
\9One small secret room is hidden in this area, examine the walls.\
\9\
\9The pit to the north also leads to a secret, but be careful, it is a long\
\9jump. You can maybe find a corresponding pit on a lower level.\
\9]])\
end\
\
function hsFireLab2()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory, Level 2\
\9\
\9Teleportation fields block the way to the next level. Each lever toggles\
\9two teleporters, but the puzzle has a trick. To go forward, you must\
\9sometimes go back.\
\9\
\9One small secret room is hidden in this area, examine the walls.\
\9]])\
end\
\
function hsFireLab2Teleport()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory, Level 2\
\9\
\9There is only a teleporter here to the level above.\
\9]])\
end\
\
function hsIceLab2()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Ice Laboratory, Level 2\
\9\
\9Powerful frostbolts bounce off walls in this area, be cautious.\
\9\
\9One small secret room is hidden in this area, examine the walls.\
\9]])\
end")
spawn("iron_basinet", 4,13,1, "iron_basinet_1")
spawn("temple_wall_text_long", 2,9,2, "temple_wall_text_long_10")
	:setWallText("Maze of the Dead")
spawn("teleporter", 6,21,1, "teleporter_51")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(12,16,1,6)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("teleporter", 6,22,3, "teleporter_62")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(13,16,3,6)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("blocker", 12,16,1, "blocker_15")
spawn("temple_floor_drainage", 6,22,2, "temple_floor_drainage_4")
spawn("temple_floor_drainage", 13,16,1, "temple_floor_drainage_5")
spawn("rock", 14,17,1, "rock_17")
spawn("blocker", 6,22,2, "blocker_16")
spawn("temple_pit", 28,9,2, "temple_pit_41")
spawn("temple_mosaic_wall_ros_1", 16,8,3, "temple_mosaic_wall_ros_1_1")
spawn("temple_mosaic_wall_ros_1", 16,8,1, "temple_mosaic_wall_ros_1_2")
spawn("temple_mosaic_wall_ros_2", 16,7,3, "temple_mosaic_wall_ros_2_1")
spawn("temple_mosaic_wall_ros_2", 16,7,1, "temple_mosaic_wall_ros_2_2")
spawn("temple_mosaic_wall_ros_2", 19,1,2, "temple_mosaic_wall_ros_2_3")
spawn("temple_mosaic_wall_ros_2", 19,1,0, "temple_mosaic_wall_ros_2_4")
spawn("temple_mosaic_wall_ros_1", 17,1,0, "temple_mosaic_wall_ros_1_3")
spawn("temple_mosaic_wall_ros_1", 17,1,2, "temple_mosaic_wall_ros_1_4")
spawn("temple_goromorg_statue", 18,1,2, "temple_goromorg_statue_15")
spawn("temple_goromorg_statue", 18,1,0, "temple_goromorg_statue_17")
spawn("daemon_head", 20,0,0, "daemon_head_41")
spawn("daemon_head", 22,0,0, "daemon_head_44")
spawn("daemon_head", 20,2,2, "daemon_head_45")
spawn("daemon_head", 22,2,2, "daemon_head_46")
spawn("script_entity", 23,2,2, "script_entity_32")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Masters of the third circle, step forward and the way will be clear.\")\
\
temple_alcove_14:addItem(message)\
")
spawn("temple_floor_ros_01", 23,1,2, "temple_floor_ros_01_1")
spawn("temple_alcove", 16,5,0, "temple_alcove_75")
spawn("script_entity", 16,4,0, "script_entity_34")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9Zaros, yet disciple only,\
\9Held these in his hands.\
\9Followers, step forward boldly\
\9As you travel in his lands.\
\9]])\
\
temple_alcove_75:addItem(message)")
spawn("pressure_plate_hidden", 16,7,1, "pressure_plate_hidden_126")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_door_portcullis_4", "close")
spawn("pressure_plate_hidden", 31,9,1, "pressure_plate_hidden_127")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_6", "hsEarthLab2")
spawn("pressure_plate_hidden", 29,18,1, "pressure_plate_hidden_128")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_6", "hsEarthLab2")
spawn("pressure_plate_hidden", 31,22,1, "pressure_plate_hidden_145")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_6", "hsFireLab2")
spawn("pressure_plate_hidden", 23,20,1, "pressure_plate_hidden_146")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_6", "hsFireLab2")
spawn("teleporter", 30,25,1, "teleporter_41")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(30,25,1,5)
spawn("pressure_plate_hidden", 29,24,1, "pressure_plate_hidden_151")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_6", "hsFireLab2Teleport")
spawn("temple_stairs_up", 7,1,3, "temple_stairs_up_37")
spawn("temple_stairs_down", 12,1,3, "temple_stairs_down_39")
spawn("temple_stairs_down", 1,29,1, "temple_stairs_down_43")
spawn("temple_stairs_up", 10,30,1, "temple_stairs_up_43")
spawn("temple_stairs_down", 15,19,2, "temple_stairs_down_46")
spawn("temple_pit", 12,4,3, "temple_pit_40")
	:addTrapDoor()
	:setPitState("closed")
spawn("temple_pit", 12,5,3, "temple_pit_42")
	:addTrapDoor()
	:setPitState("closed")
spawn("temple_pit", 12,3,1, "temple_pit_44")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 19,3,1, "temple_pit_48")
spawn("temple_pit", 14,7,0, "temple_pit_51")
spawn("temple_pit", 4,12,1, "temple_pit_55")
spawn("temple_wall_grating", 13,7,1, "temple_wall_grating_39")
spawn("temple_pillar", 15,5,1, "temple_pillar_86")
spawn("temple_pillar", 18,5,3, "temple_pillar_87")
spawn("temple_wall_grating", 4,13,0, "temple_wall_grating_44")
spawn("temple_secret_door", 3,13,1, "temple_secret_door_76")
spawn("timer", 11,5,2, "timer_31")
	:setTimerInterval(1.5)
	:activate()
	:addConnector("activate", "script_entity_28", "rosPits")
spawn("script_entity", 11,4,1, "script_entity_28")
	:setSource("rosPitsCtr1 = 0\
rosTeleportCtr1 = 0\
\
function rosPits()\
\9rosPitsCtr1 = rosPitsCtr1 + 1\
\9rosTeleportCtr1 = rosTeleportCtr1 + 1\
\9if rosPitsCtr1 == 1 then\
\9\9temple_pit_42:toggle()\
\9\9temple_pit_44:toggle()\
\9elseif rosPitsCtr1 == 2 then\
\9\9temple_pit_42:toggle()\
\9\9temple_pit_40:toggle()\
\9elseif rosPitsCtr1 == 3 then\
\9\9temple_pit_44:toggle()\
\9\9temple_pit_40:toggle()\
\9\9rosPitsCtr1 = 0\
\9end\
\9if rosTeleportCtr1 == 1 then\
\9\9teleporter_68:toggle()\
\9\9teleporter_71:toggle()\
\9elseif rosTeleportCtr1 == 2 then\
\9\9teleporter_71:toggle()\
\9\9teleporter_72:toggle()\
\9elseif rosTeleportCtr1 == 3 then\
\9\9teleporter_72:toggle()\
\9\9teleporter_73:toggle()\
\9elseif rosTeleportCtr1 == 4 then\
\9\9teleporter_73:toggle()\
\9\9teleporter_74:toggle()\
\9elseif rosTeleportCtr1 == 5 then\
\9\9teleporter_74:toggle()\
\9\9teleporter_75:toggle()\
\9elseif rosTeleportCtr1 == 6 then\
\9\9teleporter_75:toggle()\
\9\9teleporter_68:toggle()\
\9\9rosTeleportCtr1 = 0\
\9end\
end")
spawn("torch_holder", 12,3,0, "torch_holder_71")
	:addTorch()
spawn("temple_door_portcullis", 11,3,1, "temple_door_portcullis_69")
spawn("lever", 13,3,2, "lever_6")
	:addConnector("any", "temple_door_portcullis_69", "toggle")
spawn("timer", 13,5,3, "timer_36")
	:setTimerInterval(6)
	:activate()
	:addConnector("activate", "temple_door_portcullis_70", "toggle")
spawn("temple_door_portcullis", 12,4,0, "temple_door_portcullis_70")
	:setDoorState("open")
spawn("crowern", 24,4,3, "crowern_2")
spawn("blocker", 27,4,0, "blocker_36")
spawn("spider", 8,3,1, "spider_7")
spawn("spider", 10,5,2, "spider_9")
spawn("temple_alcove", 12,4,1, "temple_alcove_80")
	:addItem(spawn("brass_key"))
spawn("teleporter", 11,7,1, "teleporter_68")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
spawn("teleporter", 12,7,1, "teleporter_71")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 13,7,1, "teleporter_72")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 13,6,1, "teleporter_73")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 12,6,1, "teleporter_74")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 11,6,1, "teleporter_75")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(12,4,1,6)
	:setChangeFacing(false)
	:deactivate()
spawn("arrow", 10,2,1, "arrow_8")
spawn("arrow", 10,2,1, "arrow_9")
spawn("temple_wall_text_long", 10,7,0, "temple_wall_text_long_14")
	:setWallText("Second teaching of Zaros\
\
For a Rogue, slow movement equates\
to quick death.")
spawn("blocker", 10,7,3, "blocker_37")
spawn("blocker", 12,3,3, "blocker_38")
spawn("torch_holder", 9,4,0, "torch_holder_80")
	:addTorch()
spawn("pressure_plate_hidden", 28,14,3, "pressure_plate_hidden_163")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_15", "activate")
spawn("pressure_plate_hidden", 28,20,3, "pressure_plate_hidden_188")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_11", "activate")
spawn("pressure_plate_hidden", 31,29,3, "pressure_plate_hidden_189")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_16", "activate")
spawn("torch_holder", 3,30,3, "torch_holder_90")
	:addTorch()
spawn("torch_holder", 9,25,1, "torch_holder_91")
	:addTorch()
spawn("temple_pit", 5,26,0, "temple_pit_72")
spawn("temple_pit", 7,29,2, "temple_pit_73")
spawn("temple_pressure_plate", 7,26,0, "temple_pressure_plate_42")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setActivateOnce(true)
	:addConnector("activate", "counter_2", "decrement")
spawn("temple_secret_door", 4,27,3, "temple_secret_door_107")
spawn("temple_secret_door", 4,27,1, "temple_secret_door_108")
spawn("temple_secret_door", 7,28,1, "temple_secret_door_109")
spawn("temple_secret_door", 9,28,3, "temple_secret_door_110")
spawn("script_entity", 6,24,0, "script_entity_43")
	:setSource("function rotate180()\
\9local t = teleporter_89\
\9t:setTeleportTarget(6, 30, (party.facing + 2)%4)\
end")
spawn("teleporter", 6,25,3, "teleporter_89")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(6,30,3,7)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("pressure_plate_hidden", 6,25,1, "pressure_plate_hidden_211")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_43", "rotate180")
	:addConnector("activate", "teleporter_90", "deactivate")
spawn("script_entity", 6,29,0, "script_entity_44")
	:setSource("function rotate180()\
\9local t = teleporter_90\
\9t:setTeleportTarget(6, 25, (party.facing + 2)%4)\
end")
spawn("teleporter", 6,30,3, "teleporter_90")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(6,25,3,7)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("pressure_plate_hidden", 6,30,1, "pressure_plate_hidden_212")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_44", "rotate180")
	:addConnector("activate", "teleporter_89", "deactivate")
spawn("pressure_plate_hidden", 7,30,1, "pressure_plate_hidden_213")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_90", "activate")
spawn("pressure_plate_hidden", 5,30,1, "pressure_plate_hidden_214")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_90", "activate")
spawn("pressure_plate_hidden", 5,25,1, "pressure_plate_hidden_215")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_89", "activate")
spawn("pressure_plate_hidden", 7,25,1, "pressure_plate_hidden_216")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_89", "activate")
spawn("temple_floor_drainage", 7,30,2, "temple_floor_drainage_6")
spawn("temple_floor_drainage", 5,25,0, "temple_floor_drainage_7")
spawn("temple_alcove", 4,27,2, "temple_alcove_54")
	:addItem(spawn("brass_key"))
spawn("temple_alcove", 8,28,0, "temple_alcove_88")
	:addItem(spawn("flarefeather_cap"))
spawn("counter", 6,27,3, "counter_2")
	:setInitialValue(2)
	:setValue(2)
	:addConnector("activate", "temple_secret_door_108", "open")
	:addConnector("activate", "temple_secret_door_107", "open")
	:addConnector("activate", "temple_secret_door_110", "open")
	:addConnector("activate", "temple_secret_door_109", "open")
	:addConnector("activate", "temple_secret_door_120", "open")
	:addConnector("activate", "temple_secret_door_121", "open")
spawn("temple_pressure_plate", 5,29,0, "temple_pressure_plate_43")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setActivateOnce(true)
	:addConnector("activate", "counter_2", "decrement")
spawn("temple_wall_text_long", 3,31,1, "temple_wall_text_long_18")
	:setWallText("Sixth teaching of Zaros\
\
The Rogue's aim shall be true\
And pierce the darkest shadows")
spawn("temple_secret_door", 7,26,0, "temple_secret_door_120")
spawn("temple_secret_door", 5,29,2, "temple_secret_door_121")
spawn("cave_nettle", 8,28,2, "cave_nettle_12")
spawn("temple_pillar", 22,16,2, "temple_pillar_121")
spawn("temple_pillar", 22,17,1, "temple_pillar_122")
spawn("temple_wall_grating", 21,17,0, "temple_wall_grating_59")
spawn("temple_wall_grating", 21,16,0, "temple_wall_grating_60")
spawn("temple_alcove", 21,16,3, "temple_alcove_95")
spawn("torch_holder", 22,16,1, "torch_holder_95")
	:addTorch()
spawn("temple_stairs_up", 26,25,3, "temple_stairs_up_51")
spawn("temple_stairs_down", 16,29,1, "temple_stairs_down_53")
spawn("temple_door_wooden", 24,24,3, "temple_door_wooden_3")
	:addPullChain()
spawn("temple_wall_text", 24,24,0, "temple_wall_text_23")
	:setWallText("Halls of Darkness")
spawn("temple_alcove", 24,24,2, "temple_alcove_96")
spawn("script_entity", 24,25,3, "script_entity_46")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"No light shall be tolerated in these sacred shrines.\")\
\
temple_alcove_96:addItem(message)")
spawn("temple_pillar", 19,24,1, "temple_pillar_123")
spawn("temple_pillar", 20,24,3, "temple_pillar_124")
spawn("temple_pillar", 19,23,1, "temple_pillar_125")
spawn("temple_pillar", 20,23,3, "temple_pillar_126")
spawn("altar", 19,20,0, "altar_11")
	:addItem(spawn("amulet_dark"))
spawn("white_goromorg", 17,20,1, "white_goromorg_1")
	:setAIState("guard")
spawn("white_goromorg", 21,20,3, "white_goromorg_3")
	:setAIState("guard")
spawn("temple_door_portcullis", 17,25,1, "temple_door_portcullis_19")
spawn("temple_door_portcullis", 21,25,3, "temple_door_portcullis_20")
spawn("temple_door_portcullis", 19,27,0, "temple_door_portcullis_22")
spawn("temple_floor_dain_02", 19,25,0, "temple_floor_dain_02_21")
spawn("altar", 22,30,1, "altar_10")
spawn("gobelin_dain", 21,30,0, "gobelin_dain_3")
spawn("gobelin_dain", 21,30,2, "gobelin_dain_4")
spawn("temple_door_portcullis", 20,30,1, "temple_door_portcullis_82")
spawn("temple_alcove", 20,29,1, "temple_alcove_91")
spawn("temple_floor_dain_02", 21,30,1, "temple_floor_dain_02_22")
spawn("lock_onyx", 21,26,3, "lock_onyx_1")
	:setOpenedBy("")
spawn("lock_onyx", 18,27,0, "lock_onyx_2")
	:setOpenedBy("")
spawn("lock_onyx", 17,25,0, "lock_onyx_3")
	:setOpenedBy("")
spawn("isgardian", 19,29,0, "isgardian_1")
spawn("temple_pit", 19,23,2, "temple_pit_87")
spawn("temple_floor_dain_02", 19,21,2, "temple_floor_dain_02_12")
spawn("temple_floor_dain_01", 19,22,2, "temple_floor_dain_01_8")
spawn("temple_floor_dain_01", 19,24,0, "temple_floor_dain_01_9")
spawn("temple_floor_dain_01", 18,23,0, "temple_floor_dain_01_10")
spawn("temple_floor_dain_01", 20,23,2, "temple_floor_dain_01_11")
spawn("temple_secret_door", 15,29,3, "temple_secret_door_123")
spawn("temple_secret_door", 11,28,0, "temple_secret_door_124")
spawn("temple_secret_door", 12,28,1, "temple_secret_door_125")
spawn("temple_secret_door", 13,25,2, "temple_secret_door_126")
spawn("temple_secret_door", 14,26,3, "temple_secret_door_127")
	:setDoorState("open")
spawn("temple_secret_button_large", 12,29,1, "temple_secret_button_large_17")
	:addConnector("toggle", "temple_secret_door_127", "toggle")
	:addConnector("toggle", "temple_secret_door_126", "toggle")
	:addConnector("toggle", "temple_secret_door_132", "open")
	:addConnector("toggle", "spawner_49", "activate")
spawn("temple_secret_button_small", 11,26,1, "temple_secret_button_small_14")
	:addConnector("toggle", "temple_secret_door_123", "toggle")
	:addConnector("toggle", "temple_secret_door_126", "toggle")
	:addConnector("toggle", "temple_secret_door_128", "toggle")
	:addConnector("toggle", "spawner_49", "activate")
spawn("temple_secret_door", 14,31,3, "temple_secret_door_128")
	:setDoorState("open")
spawn("temple_secret_button_small", 13,27,3, "temple_secret_button_small_15")
	:addConnector("toggle", "temple_secret_door_129", "toggle")
	:addConnector("toggle", "temple_secret_door_125", "toggle")
	:addConnector("toggle", "temple_secret_door_124", "toggle")
	:addConnector("toggle", "spawner_49", "activate")
spawn("temple_secret_door", 13,28,1, "temple_secret_door_129")
	:setDoorState("open")
spawn("temple_secret_door", 11,27,0, "temple_secret_door_132")
spawn("isgardian", 12,30,2, "isgardian_2")
spawn("isgardian", 14,28,3, "isgardian_3")
spawn("isgardian", 11,27,0, "isgardian_4")
spawn("spawner", 16,26,3, "spawner_49")
	:setSpawnedEntity("isgardian")
	:setCoolDown(60)
spawn("script_entity", 21,29,3, "script_entity_51")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9Ku-Dhaar, as disciple,\
\9Only had these.\
\9Pretenders to its title,\
\9Let them be your keys.\
\9]])\
\
temple_alcove_91:addItem(message)")
spawn("temple_stairs_up", 20,14,0, "temple_stairs_up_56")
spawn("temple_secret_door", 20,15,0, "temple_secret_door_133")
spawn("temple_secret_button_tiny", 20,15,2, "temple_secret_button_tiny_4")
	:addConnector("toggle", "temple_secret_door_133", "toggle")
spawn("shrakk_torr", 4,27,0, "shrakk_torr_5")
	:setLevel(3)
spawn("shrakk_torr", 8,28,2, "shrakk_torr_6")
	:setLevel(3)
spawn("sack", 14,2,1, "sack_2")
	:addItem(spawn("tar_bead"))	:addItem(spawn("tar_bead"))spawn("ring_boots", 31,30,2, "ring_boots_1")
spawn("teleporter", 16,31,0, "teleporter_91")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(17,31,0,6)
spawn("temple_door_metal", 18,30,2, "temple_door_metal_14")
	:addPullChain()
spawn("temple_wall_text", 17,31,0, "temple_wall_text_28")
	:setWallText("To the Lost Barrows")
spawn("temple_alcove", 18,31,1, "temple_alcove_99")
spawn("script_entity", 19,31,3, "script_entity_42")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9Only Masters of the Way of Eldain shall be allowed\
\9admittance to the burial grounds.\
\9\
\9The ancient powers shall not be disturbed.\
\9]])\
\
temple_alcove_99:addItem(message)")
spawn("pressure_plate_hidden", 17,31,1, "pressure_plate_hidden_230")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setSilent(true)
	:addConnector("activate", "script_entity_2", "barrows")
spawn("script_entity", 16,30,1, "script_entity_2")
	:setSource("function barrows()\
\9if coreScript.getCircleLevel(\"dain\") > 2 then\
\9\9teleporter_7:setTeleportTarget(16, 15, 0, 11)\
\9else\
\9\9teleporter_7:setTeleportTarget(17, 31, 0, 6)\
\9end\
end")
spawn("script_entity", 24,23,0, "script_entity_47")
	:setSource("function darkTracker()\
\9if coreScript.lightState() == true then\
\9\9local dt = spawn(\"teleporter\",party.level,party.x,party.y,0,\"darkTeleport\")\
\9\9dt:setTriggeredByParty(true)\
\9\9dt:setTriggeredByMonster(false)\
\9\9dt:setTriggeredByItem(false)\
\9\9dt:setTeleportTarget(24,24,0,6)\
\9\9dt:activate()\
\9\9temple_door_wooden_3:close()\
\9\9hudPrint(\"You have been expelled from the halls.\")\
\9end\9\9\
end\
\
function darkTeleportClear()\
\9if findEntity(\"darkTeleport\") ~= nil then\
\9\9findEntity(\"darkTeleport\"):destroy()\
\9end\
end\
")
spawn("timer", 24,22,1, "timer_59")
	:setTimerInterval(4)
	:addConnector("activate", "script_entity_47", "darkTracker")
spawn("pressure_plate_hidden", 23,24,2, "pressure_plate_hidden_238")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_59", "activate")
spawn("pressure_plate_hidden", 24,24,2, "pressure_plate_hidden_241")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_59", "deactivate")
	:addConnector("activate", "script_entity_47", "darkTeleportClear")
spawn("gobelin_dain", 19,20,0, "gobelin_dain_11")
spawn("gobelin_dain", 18,24,3, "gobelin_dain_12")
spawn("gobelin_dain", 20,24,1, "gobelin_dain_13")
spawn("script_entity", 8,9,3, "script_entity_52")
	:setSource("")
spawn("temple_secret_door", 12,18,3, "temple_secret_door_142")
spawn("temple_secret_door", 11,15,0, "temple_secret_door_143")
spawn("temple_secret_door", 11,15,3, "temple_secret_door_144")
	:setDoorState("open")
spawn("temple_secret_door", 11,16,1, "temple_secret_door_145")
	:setDoorState("open")
spawn("temple_stairs_down", 12,18,1, "temple_stairs_down_61")
spawn("temple_stairs_up", 11,14,0, "temple_stairs_up_59")
spawn("script_entity", 25,26,1, "script_entity_54")
	:setSource("function launchLightning()\
\9exsp.spellSpawn('improved_frostbolt','spawner_32',50)\
end\
")
spawn("timer", 26,29,3, "timer_25")
	:setTimerInterval(5)
	:addConnector("activate", "script_entity_54", "launchLightning")
spawn("spell_spinner_90", 27,30,1, "spell_spinner_90_6")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,30,1,6)
	:setChangeFacing(false)
spawn("spell_spinner_270", 27,27,2, "spell_spinner_270_2")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,27,2,6)
	:setChangeFacing(false)
spawn("spell_spinner_270", 23,27,2, "spell_spinner_270_3")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(23,27,2,6)
	:setChangeFacing(false)
spawn("spell_spinner_270", 23,29,2, "spell_spinner_270_4")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(23,29,2,6)
	:setChangeFacing(false)
spawn("spell_spinner_90", 29,30,1, "spell_spinner_90_7")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,30,1,6)
	:setChangeFacing(false)
spawn("zone_marker", 15,14,0, "zone_marker_3")
	:setSource("zone = \"junction\"")
spawn("zone_marker", 16,12,0, "zone_marker_8")
	:setSource("zone = \"junction\"")
spawn("zone_marker", 17,14,0, "zone_marker_9")
	:setSource("zone = \"junction\"")
spawn("zone_marker", 6,13,0, "zone_marker_10")
	:setSource("zone = \"ku_tomb\"")
spawn("zone_marker", 15,1,0, "zone_marker_11")
	:setSource("zone = \"ros_tomb\"")
spawn("zone_marker", 26,10,0, "zone_marker_12")
	:setSource("zone = \"dain_tomb\"")
spawn("zone_marker", 3,4,0, "zone_marker_32")
	:setSource("zone = \"ku_mazeOfTheDead\"")
spawn("zone_marker", 12,11,0, "zone_marker_33")
	:setSource("zone = \"ku_tomb\"")
spawn("zone_marker", 3,11,0, "zone_marker_34")
	:setSource("zone = \"ku_mazeOfTheDead\"")
spawn("zone_marker", 11,22,0, "zone_marker_35")
	:setSource("zone = \"ku_mazeOfTheDead\"")
spawn("zone_marker", 12,22,0, "zone_marker_36")
	:setSource("zone = \"ku_mazeOfTheDead.silverSword\"")
spawn("zone_marker", 16,7,0, "zone_marker_43")
	:setSource("zone = \"ros_tomb\"")
spawn("zone_marker", 7,1,0, "zone_marker_50")
	:setSource("zone = \"ros_secondTeaching\"")
spawn("zone_marker", 12,1,0, "zone_marker_51")
	:setSource("zone = \"ros_secondTeaching\"")
spawn("zone_marker", 10,7,0, "zone_marker_52")
	:setSource("zone = \"ros_secondTeaching\"")
spawn("zone_marker", 1,29,3, "zone_marker_85")
	:setSource("zone = \"ros_sixthTeaching\"")
spawn("zone_marker", 10,30,3, "zone_marker_86")
	:setSource("zone = \"ros_sixthTeaching\"")
spawn("zone_marker", 20,11,0, "zone_marker_92")
	:setSource("zone = \"dain_tomb\"")
spawn("zone_marker", 25,6,0, "zone_marker_108")
	:setSource("zone = \"dain_airLab_2\"")
spawn("script_entity", 26,3,2, "dain_airLab_2Script")
	:setSource("function lightnings()\
\9if coreScript.zone == \"dain_airLab_2\" then\
\9\9spawner_3:activate()\
\9\9spawner_24:activate()\
\9end\
end")
spawn("spawner", 29,6,0, "spawner_24")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("zone_marker", 26,2,0, "zone_marker_109")
	:setSource("zone = \"dain_airLab_2\"")
spawn("zone_marker", 28,6,0, "zone_marker_110")
	:setSource("zone = \"dain_airLab_2\"")
spawn("zone_marker", 20,6,0, "zone_marker_111")
	:setSource("zone = \"dain_airLab_2.toAirLab_1\"")
spawn("zone_marker", 29,8,0, "zone_marker_113")
	:setSource("zone = \"dain_airLab_2.tome\"")
spawn("zone_marker", 28,7,0, "zone_marker_114")
	:setSource("zone = \"dain_airLab_2.tome\"")

--- level 7 ---

mapName("The Sanctuary")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
.............#....###....#######
.######.######..#.###..#...#####
.##...#.#..#...####.####..######
.##.#.#.##.#..#...........######
.####.##.#.#..#.####.####.######
.#....#....#########.##.....####
.###..#.##.#.........##.....####
.#..#...#....#######.##.....#..#
.##.#.#...##..##...#.##......#.#
.#...####....#.#...#..###.####.#
.##.###...#....##.#...#........#
.....###.##.#.....#...###.######
.#####.#......#.###.##..#.#..###
....##.#..#.#####.#.#.#.#.#.#.#.
.###.....##.....#.#.............
...####.#...#...#.#.#.#.#.#.#.#.
##....#....###..#.######..######
#..##.####.#..###.##...#......##
#.#.#.#..#.##.#.####....#.#####.
#.....#....#....###.#.#.#.#..##.
#.#.#.#..###.###....#.##........
#......##..#.###.#..#..........#
#.###.##.#.#.##.....####........
#......#.###.##.........#.##.#..
#.######.#.....#.#......#.#.####
#.#......#.....#..........#.#...
#.#.....##.....#.##.....#.....#.
###.....##.....##########..#.###
#.......##.....#.....#..#.##..##
##.#...#####.######..#....#...##
############.....#...#..########
]])
spawn("temple_stairs_up", 17,14,0, "temple_stairs_up_7")
spawn("temple_stairs_down", 15,5,2, "temple_stairs_down_7")
spawn("temple_door_ornament", 17,16,2, "temple_door_ornament_4")
spawn("lock_ornate", 17,16,1, "lock_ornate_1")
	:setOpenedBy("")
	:addConnector("activate", "temple_door_ornament_4", "open")
spawn("temple_stairs_up", 6,13,0, "temple_stairs_up_8")
spawn("temple_door_metal", 7,16,0, "temple_door_metal_1")
spawn("temple_door_metal", 10,13,3, "temple_door_metal_2")
spawn("temple_wall_grating", 11,12,0, "temple_wall_grating_1")
spawn("temple_stairs_up", 3,4,2, "temple_stairs_up_10")
spawn("temple_stairs_down", 8,5,0, "temple_stairs_down_9")
spawn("skeleton_warrior", 7,7,0, "skeleton_warrior_3")
spawn("skeleton_warrior", 4,3,1, "skeleton_warrior_4")
spawn("temple_secret_door", 8,11,3, "temple_secret_door_2")
spawn("temple_secret_door", 5,9,0, "temple_secret_door_3")
spawn("temple_secret_door", 10,6,0, "temple_secret_door_4")
spawn("pressure_plate_hidden", 8,11,2, "pressure_plate_hidden_4")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("script_entity", 8,10,3, "ku_cryptsScript")
	:setSource("kuCtr1 = 0\
\
function kuCtr1Activate()\
\9kuCtr1 = kuCtr1 + 1\
\9if kuCtr1 == 4 then\
\9\9spawn(\"skeleton_warrior\",6,7,11,1)\
\9elseif kuCtr1 == 5 then\
\9\9temple_secret_door_2:open()\
\9elseif kuCtr1 == 13 then\
\9\9temple_secret_door_2:close()\
\9elseif kuCtr1 == 9 then\
\9\9spawn(\"skeleton_warrior\",6,5,9,0)\
\9elseif kuCtr1 == 10 then\
\9\9temple_secret_door_3:open()\9\
\9elseif kuCtr1 == 18 then\
\9\9temple_secret_door_3:close()\9\
\9elseif kuCtr1 == 14 then\
\9\9spawn(\"skeleton_warrior\",6,10,5,2)\
\9elseif kuCtr1 == 15 then\
\9\9temple_secret_door_4:open()\9\
\9elseif kuCtr1 == 23 then\
\9\9temple_secret_door_4:close()\
\9elseif kuCtr1 == 19 then\
\9\9spawn(\"skeleton_warrior\",6,13,9,3)\
\9elseif kuCtr1 == 20 then\
\9\9temple_secret_door_5:open()\9\
\9elseif kuCtr1 == 28 then\
\9\9temple_secret_door_5:close()\
\9\9kuCtr1 = 3\
    end\
end\
\
function openCircleDoor()\
\9if coreScript.getCircleLevel(\"ku\") > 0 then\
\9\9temple_door_portcullis_29:open()\
\9end\
end\
\
local message = spawn(\"scroll\")\
message:setScrollText(\"The First Circle\\n\\nIron must be your will,\\nIron shall your destiny fulfill.\")\
\
temple_alcove_22:addItem(message)")
spawn("temple_secret_door", 13,9,3, "temple_secret_door_5")
spawn("pressure_plate_hidden", 12,9,2, "pressure_plate_hidden_11")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 10,6,2, "pressure_plate_hidden_12")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 5,8,2, "pressure_plate_hidden_13")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("temple_alcove", 6,15,2, "temple_alcove_22")
spawn("baked_maggot", 10,5,1, "baked_maggot_1")
spawn("tar_bead", 7,11,0, "tar_bead_1")
spawn("tattered_cloak", 13,9,2, "tattered_cloak_1")
spawn("mole_jerky", 13,9,1, "mole_jerky_1")
spawn("lock", 8,15,2, "lock_1")
	:setOpenedBy("iron_key")
	:addConnector("activate", "temple_door_metal_1", "open")
spawn("lock", 9,14,1, "lock_2")
	:setOpenedBy("iron_key")
	:addConnector("activate", "temple_door_metal_2", "open")
spawn("lock", 12,10,1, "lock_3")
	:setOpenedBy("iron_key")
	:addConnector("activate", "temple_door_metal_3", "open")
spawn("temple_door_metal", 13,11,3, "temple_door_metal_3")
spawn("temple_wall_grating", 11,16,3, "temple_wall_grating_2")
spawn("temple_wall_grating", 13,13,0, "temple_wall_grating_3")
spawn("rock", 11,11,3, "rock_2")
spawn("temple_secret_door", 15,13,0, "temple_secret_door_6")
spawn("temple_alcove", 15,13,2, "temple_alcove_20")
	:addItem(spawn("leather_greaves"))
spawn("temple_alcove", 17,9,0, "temple_alcove_23")
	:addItem(spawn("iron_bracelet"))
spawn("temple_alcove", 15,16,1, "temple_alcove_24")
	:addItem(spawn("iron_bracelet"))
spawn("temple_secret_button_small", 12,13,0, "temple_secret_button_small_1")
	:addConnector("toggle", "temple_secret_door_6", "open")
spawn("pressure_plate_hidden", 9,9,2, "pressure_plate_hidden_14")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 7,17,2, "pressure_plate_hidden_16")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 5,3,2, "pressure_plate_hidden_17")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 11,10,2, "pressure_plate_hidden_18")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 9,13,2, "pressure_plate_hidden_19")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("temple_mosaic_wall_ku_2", 6,14,3, "temple_mosaic_wall_ku_2_6")
spawn("temple_mosaic_wall_ku_1", 6,14,1, "temple_mosaic_wall_ku_1_6")
spawn("temple_wall_grating", 20,7,3, "temple_wall_grating_4")
spawn("temple_door_metal", 12,7,1, "temple_door_metal_4")
spawn("temple_pressure_plate", 12,7,2, "temple_pressure_plate_1")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_4", "toggle")
spawn("temple_pit", 19,7,2, "temple_pit_1")
spawn("leather_gloves", 18,7,1, "leather_gloves_1")
spawn("tar_bead", 18,7,2, "tar_bead_2")
spawn("torch_holder", 9,14,2, "torch_holder_11")
	:addTorch()
spawn("torch_holder", 4,7,3, "torch_holder_21")
	:addTorch()
spawn("torch_holder", 11,10,0, "torch_holder_22")
	:addTorch()
spawn("torch_holder", 9,6,0, "torch_holder_24")
	:addTorch()
spawn("secret", 15,13,2, "secret_4")
spawn("temple_secret_button_large", 5,9,2, "temple_secret_button_large_3")
	:addConnector("toggle", "temple_secret_door_12", "toggle")
spawn("temple_secret_door", 10,5,0, "temple_secret_door_12")
spawn("temple_alcove", 9,3,3, "temple_alcove_31")
	:addItem(spawn("tome_athletics"))
spawn("rat_shank", 9,3,0, "rat_shank_1")
spawn("secret", 10,4,0, "secret_5")
spawn("skeleton_redguard", 12,11,3, "skeleton_redguard_1")
	:addItem(spawn("iron_key"))
spawn("note", 9,14,1, "note_1")
	:setScrollText("The Redguard holds one of the keys.\
My sole fire bomb left him unschated \
and I had to run for cover.\
Walls shift as I move, and the dead raise\
from their stony graves. I must be cautios\
not to get cornered...")
spawn("snail_slice", 14,10,1, "snail_slice_1")
spawn("tar_bead", 12,15,2, "tar_bead_3")
spawn("arrow", 9,16,0, "arrow_4")
spawn("arrow", 9,16,0, "arrow_5")
spawn("baked_maggot", 10,16,0, "baked_maggot_4")
spawn("temple_secret_door", 4,6,3, "temple_secret_door_13")
spawn("secret", 2,6,3, "secret_6")
spawn("temple_alcove", 2,6,2, "temple_alcove_33")
	:addItem(spawn("fire_bomb"))
	:addItem(spawn("quarrel"))
	:addItem(spawn("quarrel"))
spawn("lever", 3,6,0, "lever_3")
	:addConnector("any", "temple_secret_door_13", "toggle")
spawn("rusted_mace", 9,13,2, "rusted_mace_1")
spawn("rusted_helm", 9,14,1, "rusted_helm_1")
spawn("skeleton_remains", 9,14,2, "skeleton_remains_1")
spawn("temple_catacomb_empty", 10,10,2, "temple_catacomb_empty_1")
spawn("temple_catacomb_empty", 7,8,1, "temple_catacomb_empty_2")
spawn("temple_catacomb_skeleton_down", 11,8,0, "temple_catacomb_skeleton_down_1")
spawn("temple_catacomb_skeleton_up", 8,12,3, "temple_catacomb_skeleton_up_1")
spawn("temple_catacomb_skeleton_down", 5,5,1, "temple_catacomb_skeleton_down_2")
spawn("temple_stairs_down", 17,18,2, "temple_stairs_down_21")
spawn("temple_door_metal", 23,4,3, "temple_door_metal_7")
spawn("temple_pressure_plate", 23,4,0, "temple_pressure_plate_14")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_7", "toggle")
spawn("temple_pit", 24,6,2, "temple_pit_15")
spawn("temple_pit", 24,7,3, "temple_pit_16")
spawn("temple_pit", 24,8,0, "temple_pit_18")
spawn("temple_pit", 24,9,0, "temple_pit_19")
spawn("temple_pit", 26,6,2, "temple_pit_23")
spawn("temple_pit", 26,7,3, "temple_pit_17")
spawn("temple_pit", 26,8,0, "temple_pit_20")
spawn("temple_pit", 26,9,0, "temple_pit_21")
spawn("temple_wall_grating", 24,6,3, "temple_wall_grating_26")
spawn("temple_wall_grating", 24,9,3, "temple_wall_grating_27")
spawn("temple_wall_grating", 27,9,3, "temple_wall_grating_28")
spawn("temple_wall_grating", 27,6,3, "temple_wall_grating_29")
spawn("teleporter", 27,6,1, "teleporter_18")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:setTeleportTarget(23,7,1,7)
	:setScreenFlash(false)
spawn("teleporter", 27,9,1, "teleporter_19")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:setTeleportTarget(23,8,1,7)
	:setScreenFlash(false)
spawn("blocker", 24,7,2, "blocker_1")
spawn("blocker", 24,8,2, "blocker_3")
spawn("blocker", 26,8,2, "blocker_4")
spawn("blocker", 26,7,2, "blocker_5")
spawn("teleporter", 23,9,3, "teleporter_17")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,8,3,7)
	:setScreenFlash(false)
spawn("teleporter", 23,6,3, "teleporter_20")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:setTeleportTarget(27,7,3,7)
	:setScreenFlash(false)
spawn("teleporter", 23,8,2, "teleporter_16")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(25,8,2,7)
	:setChangeFacing(false)
	:setScreenFlash(false)
	:deactivate()
spawn("temple_stairs_up", 26,2,1, "temple_stairs_up_22")
spawn("temple_door_portcullis", 24,11,1, "temple_door_portcullis_26")
spawn("temple_pressure_plate", 23,8,3, "temple_pressure_plate_13")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "timer_7", "toggle")
spawn("timer", 22,9,2, "timer_5")
	:setTimerInterval(1)
	:addConnector("activate", "teleporter_16", "deactivate")
	:addConnector("activate", "timer_5", "deactivate")
spawn("timer", 22,8,2, "timer_7")
	:setTimerInterval(2)
	:addConnector("activate", "timer_5", "toggle")
	:addConnector("activate", "timer_7", "deactivate")
	:addConnector("activate", "teleporter_16", "activate")
spawn("teleporter", 23,7,2, "teleporter_22")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(25,7,2,7)
	:setChangeFacing(false)
	:setScreenFlash(false)
	:deactivate()
spawn("temple_pressure_plate", 23,7,3, "temple_pressure_plate_16")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "timer_6", "toggle")
spawn("timer", 22,6,2, "timer_9")
	:setTimerInterval(1)
	:addConnector("activate", "teleporter_22", "deactivate")
	:addConnector("activate", "timer_9", "deactivate")
spawn("timer", 22,7,2, "timer_6")
	:setTimerInterval(2)
	:addConnector("activate", "timer_9", "toggle")
	:addConnector("activate", "timer_6", "deactivate")
	:addConnector("activate", "teleporter_22", "activate")
spawn("teleporter", 27,7,2, "teleporter_23")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(25,7,2,7)
	:setChangeFacing(false)
	:setScreenFlash(false)
	:deactivate()
spawn("temple_pressure_plate", 27,7,3, "temple_pressure_plate_17")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "timer_8", "toggle")
spawn("timer", 28,6,2, "timer_11")
	:setTimerInterval(1)
	:addConnector("activate", "teleporter_23", "deactivate")
	:addConnector("activate", "timer_11", "deactivate")
spawn("timer", 28,7,2, "timer_8")
	:setTimerInterval(2)
	:addConnector("activate", "timer_11", "toggle")
	:addConnector("activate", "timer_8", "deactivate")
	:addConnector("activate", "teleporter_23", "activate")
spawn("teleporter", 27,8,2, "teleporter_24")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(25,8,2,7)
	:setChangeFacing(false)
	:setScreenFlash(false)
	:deactivate()
spawn("temple_pressure_plate", 27,8,3, "temple_pressure_plate_18")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "timer_10", "toggle")
spawn("timer", 28,9,2, "timer_13")
	:setTimerInterval(1)
	:addConnector("activate", "teleporter_24", "deactivate")
	:addConnector("activate", "timer_13", "deactivate")
spawn("timer", 28,8,2, "timer_10")
	:setTimerInterval(2)
	:addConnector("activate", "timer_13", "toggle")
	:addConnector("activate", "timer_10", "deactivate")
	:addConnector("activate", "teleporter_24", "activate")
spawn("wyvern", 23,8,1, "wyvern_1")
	:addItem(spawn("round_key"))
spawn("lock_round", 25,10,3, "lock_round_1")
	:setOpenedBy("round_key")
	:addConnector("activate", "temple_door_portcullis_26", "open")
spawn("temple_door_portcullis", 23,1,3, "temple_door_portcullis_28")
	:addPullChain()
spawn("milkreed", 9,3,0, "milkreed_1")
spawn("fire_bomb", 5,9,2, "fire_bomb_3")
spawn("rat_shank", 22,2,1, "rat_shank_4")
spawn("tar_bead", 21,2,2, "tar_bead_8")
spawn("temple_stairs_down", 23,11,3, "temple_stairs_down_23")
spawn("temple_wall_text", 25,5,3, "temple_wall_text_10")
	:setWallText("The Guardian")
spawn("torch_holder", 24,3,3, "torch_holder_1")
	:addTorch()
spawn("temple_secret_door", 5,15,1, "temple_secret_door_48")
spawn("temple_door_portcullis", 4,15,1, "temple_door_portcullis_29")
spawn("temple_secret_button_tiny", 7,15,0, "temple_secret_button_tiny_2")
	:addConnector("toggle", "temple_secret_door_48", "toggle")
spawn("teleporter", 4,15,2, "teleporter_25")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(9,23,2,5)
spawn("temple_pillar", 24,7,0, "temple_pillar_34")
spawn("temple_pillar", 24,9,2, "temple_pillar_45")
spawn("temple_pillar", 27,9,1, "temple_pillar_46")
spawn("temple_pillar", 27,7,0, "temple_pillar_47")
spawn("pressure_plate_hidden", 15,4,1, "pressure_plate_hidden_21")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_15", "switchWalls")
spawn("script_entity", 15,3,1, "script_entity_15")
	:setSource("function switchWalls()\
\9temple_secret_door_54:setDoorState(\"open\")\
\9temple_secret_door_53:setDoorState(\"closed\")\
end")
spawn("script_entity", 17,6,1, "script_entity_19")
	:setSource("function switchWalls()\
\9temple_secret_door_49:setDoorState(\"closed\")\
\9temple_secret_door_50:setDoorState(\"closed\")\
\9temple_secret_door_51:setDoorState(\"open\")\
\9temple_secret_door_52:setDoorState(\"open\")\
end")
spawn("pressure_plate_hidden", 17,7,2, "pressure_plate_hidden_28")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_19", "switchWalls")
spawn("temple_wall_text_long", 5,15,0, "temple_wall_text_long_4")
	:setWallText("To the Second Circle")
spawn("pressure_plate_hidden", 5,15,0, "pressure_plate_hidden_31")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "openCircleDoor")
spawn("scroll", 5,15,3, "scroll_2")
	:setScrollText("Apprentices only")
spawn("temple_stairs_up", 29,8,3, "temple_stairs_up_20")
spawn("temple_wall_text_long", 26,11,0, "temple_wall_text_long_5")
	:setWallText("Air Elemental Research Archives\
\
Danger - Do Not Enter")
spawn("temple_door_portcullis", 27,11,3, "temple_door_portcullis_31")
	:setDoorState("open")
spawn("temple_door_portcullis", 27,11,1, "temple_door_portcullis_32")
spawn("temple_door_portcullis", 28,11,1, "temple_door_portcullis_33")
spawn("temple_door_portcullis", 29,11,1, "temple_door_portcullis_34")
spawn("temple_pressure_plate", 27,11,3, "temple_pressure_plate_15")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:addConnector("activate", "timer_15", "activate")
	:addConnector("activate", "temple_door_portcullis_31", "close")
spawn("timer", 27,12,1, "timer_15")
	:setTimerInterval(2)
	:addConnector("activate", "temple_door_portcullis_32", "open")
	:addConnector("activate", "timer_15", "deactivate")
spawn("temple_pressure_plate", 28,11,3, "temple_pressure_plate_20")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:addConnector("activate", "timer_17", "activate")
	:addConnector("activate", "temple_door_portcullis_32", "close")
spawn("temple_pressure_plate", 29,11,3, "temple_pressure_plate_21")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:addConnector("activate", "timer_18", "activate")
	:addConnector("activate", "temple_door_portcullis_33", "close")
spawn("wyvern", 30,11,3, "wyvern_3")
	:setAIState("guard")
	:setLevel(3)
spawn("timer", 28,12,1, "timer_17")
	:setTimerInterval(2)
	:addConnector("activate", "temple_door_portcullis_33", "open")
	:addConnector("activate", "timer_17", "deactivate")
spawn("timer", 29,12,1, "timer_18")
	:setTimerInterval(2)
	:addConnector("activate", "temple_door_portcullis_34", "open")
	:addConnector("activate", "timer_18", "deactivate")
spawn("torch_holder", 25,14,1, "torch_holder_35")
	:addTorch()
spawn("temple_door_portcullis", 30,10,2, "temple_door_portcullis_36")
spawn("temple_pressure_plate", 30,11,3, "temple_pressure_plate_22")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:addConnector("activate", "timer_19", "activate")
	:addConnector("activate", "temple_door_portcullis_34", "close")
spawn("timer", 30,12,1, "timer_19")
	:setTimerInterval(3)
	:addConnector("activate", "temple_door_portcullis_36", "open")
	:addConnector("activate", "timer_19", "deactivate")
spawn("daemon_head", 25,2,0, "daemon_head_19")
spawn("lever", 25,13,1, "lever_7")
	:addConnector("any", "temple_door_metal_8", "toggle")
spawn("lever", 25,10,1, "lever_8")
	:addConnector("any", "temple_door_metal_5", "toggle")
spawn("temple_wall_text", 25,12,1, "temple_wall_text_11")
	:setWallText("Security sas")
spawn("temple_door_metal", 25,12,0, "temple_door_metal_5")
spawn("temple_door_metal", 25,13,0, "temple_door_metal_8")
spawn("temple_pit", 28,9,0, "temple_pit_28")
spawn("slime_bell", 17,4,0, "slime_bell_2")
spawn("slime_bell", 17,4,0, "slime_bell_3")
spawn("herder_big", 19,14,2, "herder_big_2")
	:setAIState("guard")
spawn("blocker", 19,15,0, "blocker_2")
spawn("blocker", 21,15,0, "blocker_7")
spawn("blocker", 23,15,0, "blocker_8")
spawn("herder_big", 27,16,0, "herder_big_9")
	:setAIState("guard")
spawn("blocker", 27,15,0, "blocker_9")
spawn("blocker", 29,15,0, "blocker_10")
spawn("blocker", 31,15,0, "blocker_11")
spawn("lever", 26,18,2, "lever_11")
	:addConnector("any", "temple_door_metal_9", "toggle")
spawn("temple_wall_text", 25,19,1, "temple_wall_text_14")
	:setWallText("Security sas")
spawn("temple_stairs_up", 29,18,1, "temple_stairs_up_27")
spawn("temple_stairs_down", 22,13,3, "temple_stairs_down_28")
spawn("temple_door_portcullis", 23,14,0, "temple_door_portcullis_42")
spawn("temple_wall_grating", 20,12,3, "temple_wall_grating_37")
spawn("temple_pillar", 20,12,1, "temple_pillar_48")
spawn("temple_alcove", 21,11,1, "temple_alcove_55")
	:addItem(spawn("ruby_key"))
spawn("torch_holder", 21,12,1, "torch_holder_40")
	:addTorch()
spawn("temple_door_portcullis", 19,14,0, "temple_door_portcullis_44")
spawn("temple_secret_button_large", 21,16,2, "temple_secret_button_large_8")
	:addConnector("toggle", "temple_door_portcullis_44", "toggle")
spawn("temple_stairs_down", 28,13,1, "temple_stairs_down_29")
spawn("pressure_plate_hidden", 22,13,1, "pressure_plate_hidden_46")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_20", "deactivate")
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("pressure_plate_hidden", 28,13,1, "pressure_plate_hidden_47")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_20", "deactivate")
	:addConnector("activate", "hs_level_7", "hsEarthLab3Tome")
spawn("temple_door_portcullis", 27,14,0, "temple_door_portcullis_45")
spawn("temple_alcove", 27,13,3, "temple_alcove_57")
	:addItem(spawn("tome_earth"))
	:addConnector("deactivate", "temple_door_portcullis_45", "open")
spawn("herder", 19,16,0, "herder_3")
spawn("herder", 21,14,2, "herder_4")
	:setAIState("guard")
spawn("herder", 23,16,0, "herder_5")
	:setAIState("guard")
spawn("herder", 27,14,2, "herder_6")
	:setAIState("guard")
spawn("herder", 29,16,0, "herder_7")
	:setAIState("guard")
spawn("herder", 31,14,2, "herder_8")
	:setAIState("guard")
spawn("temple_door_metal", 25,18,2, "temple_door_metal_9")
spawn("temple_door_metal", 25,19,2, "temple_door_metal_10")
spawn("herder", 21,16,0, "herder_10")
	:setAIState("guard")
spawn("herder", 29,14,2, "herder_9")
	:setAIState("guard")
spawn("poison_arrow", 21,10,0, "poison_arrow_1")
spawn("poison_arrow", 21,10,0, "poison_arrow_2")
spawn("doublet", 21,12,2, "doublet_2")
spawn("lever", 25,16,1, "lever_14")
	:addConnector("activate", "blocker_9", "deactivate")
	:addConnector("activate", "blocker_10", "deactivate")
	:addConnector("activate", "blocker_11", "deactivate")
	:addConnector("activate", "blocker_8", "deactivate")
	:addConnector("activate", "blocker_7", "deactivate")
	:addConnector("activate", "blocker_2", "deactivate")
spawn("note", 25,16,1, "note_3")
	:setScrollText("Specimen Release Control\
\
DO NOT TOUCH")
spawn("temple_stairs_down", 31,19,0, "temple_stairs_down_31")
spawn("tar_bead", 31,14,1, "tar_bead_10")
spawn("grim_cap", 19,16,3, "grim_cap_2")
spawn("lever", 25,20,1, "lever_16")
	:addConnector("any", "temple_door_metal_10", "toggle")
spawn("temple_stairs_up", 23,20,2, "temple_stairs_up_32")
spawn("temple_door_portcullis", 25,22,3, "temple_door_portcullis_47")
spawn("temple_door_portcullis", 25,23,0, "temple_door_portcullis_48")
spawn("temple_door_portcullis", 25,22,1, "temple_door_portcullis_49")
spawn("temple_door_portcullis", 25,22,0, "temple_door_portcullis_50")
spawn("temple_door_portcullis", 27,22,3, "temple_door_portcullis_51")
spawn("temple_door_portcullis", 27,21,2, "temple_door_portcullis_52")
spawn("temple_door_portcullis", 28,22,3, "temple_door_portcullis_53")
spawn("temple_door_portcullis", 27,22,2, "temple_door_portcullis_54")
spawn("temple_door_portcullis", 29,22,2, "temple_door_portcullis_55")
spawn("temple_door_portcullis", 28,22,1, "temple_door_portcullis_56")
spawn("temple_door_portcullis", 29,21,2, "temple_door_portcullis_57")
spawn("temple_door_portcullis", 30,22,3, "temple_door_portcullis_58")
spawn("temple_pillar", 25,22,0, "temple_pillar_5")
spawn("temple_pillar", 25,23,3, "temple_pillar_50")
spawn("temple_pillar", 26,23,1, "temple_pillar_51")
spawn("temple_pillar", 26,22,1, "temple_pillar_52")
spawn("temple_pillar", 27,22,3, "temple_pillar_53")
spawn("temple_pillar", 27,23,2, "temple_pillar_54")
spawn("temple_pillar", 28,23,0, "temple_pillar_55")
spawn("temple_pillar", 28,22,1, "temple_pillar_56")
spawn("temple_pillar", 29,22,0, "temple_pillar_57")
spawn("temple_pillar", 29,23,1, "temple_pillar_58")
spawn("temple_pillar", 30,23,3, "temple_pillar_59")
spawn("temple_pillar", 30,22,1, "temple_pillar_60")
spawn("uggardian", 25,22,0, "uggardian_2")
spawn("uggardian", 27,22,2, "uggardian_3")
	:addItem(spawn("round_key"))
spawn("uggardian", 29,22,0, "uggardian_4")
spawn("temple_door_portcullis", 31,21,0, "temple_door_portcullis_59")
spawn("lock_round", 30,21,0, "lock_round_3")
	:setOpenedBy("round_key")
	:addConnector("activate", "temple_door_portcullis_59", "open")
spawn("temple_door_metal", 25,24,2, "temple_door_metal_13")
spawn("temple_door_metal", 25,25,2, "temple_door_metal_11")
spawn("temple_wall_text", 25,25,1, "temple_wall_text_16")
	:setWallText("Security sas")
spawn("lever", 25,26,1, "lever_24")
	:addConnector("any", "temple_door_metal_11", "toggle")
spawn("lever", 28,24,1, "lever_26")
	:addConnector("activate", "script_entity_25", "leftLever")
	:addConnector("activate", "timer_27", "activate")
spawn("lever", 28,24,3, "lever_25")
	:addConnector("activate", "script_entity_25", "rightLever")
	:addConnector("activate", "timer_21", "activate")
spawn("lever", 28,24,2, "lever_27")
	:addConnector("activate", "script_entity_25", "frontLever")
	:addConnector("activate", "timer_26", "activate")
spawn("temple_alcove", 27,20,0, "temple_alcove_62")
spawn("script_entity", 27,19,2, "script_entity_27")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"First cage: right, left, front.\\nSecond cage: front, right, left.\\n\9Third cage: left, right, front.\")\
\
temple_alcove_62:addItem(message)")
spawn("temple_floor_drainage", 25,22,1, "temple_floor_drainage_1")
spawn("temple_floor_drainage", 27,22,2, "temple_floor_drainage_2")
spawn("temple_floor_drainage", 29,22,1, "temple_floor_drainage_3")
spawn("torch_holder", 21,20,1, "torch_holder_46")
	:addTorch()
spawn("torch_holder", 27,20,3, "torch_holder_47")
	:addTorch()
spawn("torch_holder", 31,23,1, "torch_holder_48")
	:addTorch()
spawn("herder", 23,14,2, "herder_12")
	:setAIState("guard")
spawn("herder", 31,16,0, "herder_13")
	:setAIState("guard")
spawn("temple_secret_button_large", 29,23,2, "temple_secret_button_large_9")
	:addConnector("toggle", "script_entity_25", "resetCtr")
spawn("script_entity", 29,24,2, "script_entity_25")
	:setSource("dainFireCtr = \"void\"\
\
function resetCtr()\
\9dainFireCtr = \"reset\"\
end\
\
function leftLever()\
\9if dainFireCtr == \"reset\" then\
\9\9dainFireCtr = \"cage3_A\"\
\9elseif dainFireCtr == \"cage1_A\" then\
\9\9dainFireCtr = \"cage1_B\"\
\9elseif dainFireCtr == \"cage2_B\" then\
\9\9temple_door_portcullis_51:open()\
\9\9temple_door_portcullis_52:open()\
\9\9temple_door_portcullis_53:open()\
\9\9temple_door_portcullis_54:open()\
\9\9dainFireCtr = \"void\"\
\9else\
\9\9dainFireCtr = \"void\"\
\9end\
end\
\
function frontLever()\
\9if dainFireCtr == \"reset\" then\
\9\9dainFireCtr = \"cage2_A\"\
\9elseif dainFireCtr == \"cage1_B\" then\
\9\9temple_door_portcullis_47:open()\
\9\9temple_door_portcullis_48:open()\
\9\9temple_door_portcullis_49:open()\
\9\9temple_door_portcullis_50:open()\
\9\9dainFireCtr = \"void\"\
\9elseif dainFireCtr == \"cage3_B\" then\
\9\9temple_door_portcullis_55:open()\
\9\9temple_door_portcullis_56:open()\
\9\9temple_door_portcullis_57:open()\
\9\9temple_door_portcullis_58:open()\
\9\9dainFireCtr = \"void\"\
\9else\
\9\9dainFireCtr = \"void\"\
\9end\
end\
\
function rightLever()\
\9if dainFireCtr == \"reset\" then\
\9\9dainFireCtr = \"cage1_A\"\
\9elseif dainFireCtr == \"cage2_A\" then\
\9\9dainFireCtr = \"cage2_B\"\
\9elseif dainFireCtr == \"cage3_A\" then\
\9\9dainFireCtr = \"cage3_B\"\
\9else\
\9\9dainFireCtr = \"void\"\
\9end\
end\
\
function leftLeverReset()\
\9if lever_26:getLeverState() == \"activated\" then\
\9\9lever_26:toggle()\
\9end\
end\
\
function frontLeverReset()\
\9if lever_27:getLeverState() == \"activated\" then\
\9\9lever_27:toggle()\
\9end\
end\
\
function rightLeverReset()\
\9if lever_25:getLeverState() == \"activated\" then\
\9\9lever_25:toggle()\
\9end\
end")
spawn("peasant_breeches", 30,24,3, "peasant_breeches_1")
spawn("lever", 25,24,1, "lever_28")
	:addConnector("any", "temple_door_metal_13", "toggle")
spawn("note", 29,23,2, "note_4")
	:setScrollText("I must not forget to push the reset button\
before entering the sequence. Now I cannot remember which test subject stole the key.\
Master Eldain will not be pleased...")
spawn("dagger", 28,20,0, "dagger_1")
spawn("temple_stairs_up", 31,27,2, "temple_stairs_up_31")
spawn("temple_stairs_down", 19,20,0, "temple_stairs_down_30")
spawn("temple_door_iron", 25,30,3, "temple_door_iron_3")
spawn("receptor", 25,30,2, "receptor_1")
	:setEntityType("blob")
	:addConnector("activate", "temple_door_iron_3", "open")
spawn("torch_holder", 23,29,1, "torch_holder_52")
	:addTorch()
spawn("temple_alcove", 22,30,3, "temple_alcove_63")
	:addItem(spawn("shield_elements"))
	:addItem(spawn("spectral_blade"))
spawn("lever", 24,4,2, "lever_23")
	:addConnector("activate", "spawner_22", "activate")
spawn("timer", 27,24,2, "timer_21")
	:setTimerInterval(2)
	:addConnector("activate", "script_entity_25", "rightLeverReset")
	:addConnector("activate", "timer_21", "deactivate")
spawn("timer", 28,25,2, "timer_26")
	:setTimerInterval(2)
	:addConnector("activate", "script_entity_25", "frontLeverReset")
	:addConnector("activate", "timer_26", "deactivate")
spawn("timer", 29,25,2, "timer_27")
	:setTimerInterval(2)
	:addConnector("activate", "script_entity_25", "leftLeverReset")
	:addConnector("activate", "timer_27", "deactivate")
spawn("torch_holder", 22,15,2, "torch_holder_54")
	:addTorch()
spawn("torch_holder", 30,15,0, "torch_holder_55")
	:addTorch()
spawn("temple_floor_dain_01", 22,30,0, "temple_floor_dain_01_6")
spawn("temple_mosaic_wall_dain_2", 22,31,3, "temple_mosaic_wall_dain_2_14")
spawn("temple_mosaic_wall_dain_2", 22,29,3, "temple_mosaic_wall_dain_2_17")
spawn("spawner", 25,2,2, "spawner_22")
	:setSpawnedEntity("blob")
	:setCoolDown(0)
spawn("cold_quarrel", 27,25,0, "cold_quarrel_1")
spawn("cold_quarrel", 27,25,0, "cold_quarrel_2")
spawn("temple_wall_grating", 20,24,3, "temple_wall_grating_46")
spawn("temple_wall_grating", 20,25,3, "temple_wall_grating_47")
spawn("temple_wall_grating", 21,25,3, "temple_wall_grating_48")
spawn("temple_wall_grating", 21,24,3, "temple_wall_grating_51")
spawn("temple_wall_grating", 22,27,3, "temple_wall_grating_52")
spawn("temple_wall_grating", 22,26,3, "temple_wall_grating_53")
spawn("temple_wall_grating", 23,26,3, "temple_wall_grating_56")
spawn("temple_wall_grating", 23,27,3, "temple_wall_grating_57")
spawn("temple_door_metal", 20,26,0, "temple_door_metal_15")
	:addPullChain()
spawn("temple_door_metal", 22,25,2, "temple_door_metal_16")
	:addPullChain()
spawn("temple_pillar", 20,26,2, "temple_pillar_71")
spawn("temple_pillar", 20,25,3, "temple_pillar_72")
spawn("temple_pillar", 21,25,1, "temple_pillar_73")
spawn("temple_pillar", 21,26,1, "temple_pillar_74")
spawn("temple_pillar", 22,27,1, "temple_pillar_76")
spawn("temple_pillar", 23,27,3, "temple_pillar_77")
spawn("temple_pillar", 23,26,0, "temple_pillar_78")
spawn("temple_pillar", 22,26,2, "temple_pillar_79")
spawn("torch_holder", 18,25,3, "torch_holder_58")
	:addTorch()
spawn("torch_holder", 23,25,1, "torch_holder_59")
	:addTorch()
spawn("temple_wall_text", 8,15,1, "temple_wall_text_22")
	:setWallText("Tomb of Bar-Karog,\
First Lieutnant of Ku-Dhaar")
spawn("temple_wall_text", 9,13,0, "temple_wall_text_24")
	:setWallText("Tomb of Kel-Zhaar,\
Second Lieutnant of Ku-Dhaar")
spawn("temple_wall_text", 12,11,2, "temple_wall_text_25")
	:setWallText("Tomb of Du-Ragaar\
Third Lieutnant of Ku-Dhaar")
spawn("temple_floor_ku_02", 15,16,2, "temple_floor_ku_02_11")
spawn("skeleton_patrol", 15,16,3, "skeleton_patrol_4")
	:setAIState("guard")
	:setLevel(3)
spawn("temple_floor_ku_02", 17,9,1, "temple_floor_ku_02_12")
spawn("skeleton_patrol", 17,9,2, "skeleton_patrol_5")
	:setAIState("guard")
	:setLevel(3)
spawn("torch_holder", 17,12,1, "torch_holder_43")
	:addTorch()
spawn("torch_holder", 14,15,0, "torch_holder_44")
	:addTorch()
spawn("script_entity", 18,13,2, "hs_level_7")
	:setSource("function hsDainCrossroads()\
\9helpScript:setHintScroll()\
end\
\
function hsAirLab3()\
\9helpScript:setHintScroll()\
end\
\
function hsAirLab3Tome()\
\9helpScript:setHintScroll()\
end\
\
function hsEarthLab3()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Earth Laboratory, Level 3\
\9\
\9The main Earth experiment room is found on this level. Herders are grown in\
\9alcoves, held by magical means - a central control lever can free them, \
\9altough this is not\9recommended.\
\9\
\9The round key required to open the way to the next level lies in one of the\
\9alcoves. At the west end of the corridor is a chamber which contains a ruby\
\9key. It is opened by a button in a nearby alcove.\
\9\
\9A secret wall in this chamber also leads to the Crossroads and some items.\
\9\
\9The tome you see through a grating is accessed from below.\
\9]])\
end\
\
function hsEarthLab3Tome()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Earth Laboratory Archives\
\9\
\9You can find a Tome of Earth here.\
\9]])\
end\
\
function hsFireLab3()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory, Level 3\
\9\
\9The main Fire experiment room is found on this level. Three Uggardians\
\9are held in cages, one of them has the key to the next level. Cages\
\9can be opened by flipping levers in the right combination, following the\
\9instructions found in the room.\
\9]])\
end\
\
function hsIceLab3()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, First Circle - Ice Laboratory\
\9\
\9The main Ice experiment room is found on this level. Skeleton archers roam\
\9here with their icy arrows. Two Ice Lizards are held as test subjects: \
\9their freedom will open the way.\
\9\
\9The spectral receptor is also found here - you must open all sas doors between\
\9adjacent laboratories if the spell is to reach its destination. Behind the\
\9iron door lies a special weapon and a powerful shield.\
\9]])\
end\
\
function hsIceLab3Tome()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Ice Laboratory Archives\
\9\
\9A Tome of Ice can be found in the archives, but it is guarded by a skeleton\
\9archers that you must defeat after avoiding the moving teleportation fields.\
\9]])\
end\
\
function hsIceLab3Tome2()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Ice Laboratory Archives\
\9\
\9You can find a Tome of Ice here.\
\9]])\
end\
")
spawn("pressure_plate_hidden", 17,10,2, "pressure_plate_hidden_65")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("pressure_plate_hidden", 14,16,2, "pressure_plate_hidden_66")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ku_cryptsScript", "kuCtr1Activate")
spawn("temple_catacomb_skeleton_down", 15,17,1, "temple_catacomb_skeleton_down_7")
spawn("temple_catacomb_empty", 15,15,1, "temple_catacomb_empty_7")
spawn("temple_catacomb_empty", 18,9,0, "temple_catacomb_empty_8")
spawn("temple_catacomb_skeleton_up", 16,9,0, "temple_catacomb_skeleton_up_5")
spawn("temple_alcove", 7,20,3, "temple_alcove_69")
	:addItem(spawn("iron_bracelet"))
spawn("temple_floor_ku_02", 7,20,0, "temple_floor_ku_02_13")
spawn("skeleton_patrol", 7,20,1, "skeleton_patrol_6")
	:setAIState("guard")
	:setLevel(3)
spawn("temple_catacomb_empty", 7,19,3, "temple_catacomb_empty_10")
spawn("temple_catacomb_skeleton_down", 7,21,3, "temple_catacomb_skeleton_down_9")
spawn("torch_holder", 10,20,2, "torch_holder_61")
	:addTorch()
spawn("sx_skeleton_chained", 10,17,1, "sx_skeleton_chained_1")
spawn("sx_skeleton_chained_2", 15,12,3, "sx_skeleton_chained_2_1")
spawn("temple_pressure_plate", 20,9,1, "temple_pressure_plate_28")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_19", "toggle")
spawn("temple_door_metal", 20,9,0, "temple_door_metal_19")
spawn("poison_bomb", 20,7,1, "poison_bomb_1")
spawn("poison_quarrel", 20,7,1, "poison_quarrel_1")
spawn("poison_quarrel", 20,7,1, "poison_quarrel_2")
spawn("temple_secret_button_small", 20,10,3, "temple_secret_button_small_10")
	:addConnector("toggle", "temple_secret_door_71", "toggle")
	:addConnector("toggle", "temple_secret_door_73", "toggle")
spawn("temple_secret_door", 20,10,0, "temple_secret_door_71")
spawn("temple_secret_door", 20,4,2, "temple_secret_door_73")
spawn("torch_holder", 20,6,1, "torch_holder_63")
	:addTorch()
spawn("secret", 20,9,3, "secret_17")
spawn("ice_lizard", 20,24,2, "ice_lizard_1")
	:setAIState("guard")
spawn("ice_lizard", 22,27,0, "ice_lizard_2")
	:setAIState("guard")
spawn("temple_pressure_plate", 20,25,2, "temple_pressure_plate_26")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_pit_35", "toggle")
	:addConnector("activate", "spawner_31", "activate")
spawn("temple_pressure_plate", 22,26,2, "temple_pressure_plate_30")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_pit_33", "toggle")
	:addConnector("activate", "spawner_38", "activate")
spawn("daemon_head", 20,24,0, "daemon_head_36")
spawn("spawner", 20,24,2, "spawner_31")
	:setSpawnedEntity("frostbolt")
	:setCoolDown(0)
spawn("spawner", 22,27,0, "spawner_38")
	:setSpawnedEntity("frostbolt")
	:setCoolDown(0)
spawn("daemon_head", 22,27,2, "daemon_head_38")
spawn("pressure_plate_hidden", 31,27,2, "pressure_plate_hidden_76")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
spawn("temple_pit", 19,24,0, "temple_pit_33")
	:addTrapDoor()
	:setPitState("closed")
spawn("temple_pit", 19,23,0, "temple_pit_35")
	:addTrapDoor()
	:setPitState("closed")
spawn("skeleton_archer_patrol", 26,28,0, "skeleton_archer_patrol_1")
spawn("skeleton_archer", 18,25,2, "skeleton_archer_4")
spawn("rock", 29,29,1, "rock_16")
spawn("skeleton_remains", 29,30,2, "skeleton_remains_5")
spawn("temple_alcove", 23,24,0, "temple_alcove_70")
	:addItem(spawn("throwing_knife"))
	:addItem(spawn("throwing_knife"))
spawn("temple_pit", 18,23,0, "temple_pit_38")
spawn("temple_pit", 18,24,0, "temple_pit_39")
spawn("teleporter", 17,24,2, "teleporter_40")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(18,24,2,7)
	:setChangeFacing(false)
spawn("teleporter", 17,23,2, "teleporter_43")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(18,23,2,7)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 16,23,2, "teleporter_44")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(17,23,2,7)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 16,24,2, "teleporter_45")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(17,24,2,7)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 15,24,2, "teleporter_46")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(16,24,2,7)
	:setChangeFacing(false)
	:deactivate()
spawn("teleporter", 15,23,2, "teleporter_48")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(16,23,2,7)
	:setChangeFacing(false)
spawn("timer", 14,23,3, "timer_29")
	:setTimerInterval(1.5)
	:activate()
	:addConnector("activate", "teleporter_48", "toggle")
	:addConnector("activate", "teleporter_44", "toggle")
	:addConnector("activate", "timer_29", "deactivate")
	:addConnector("activate", "timer_32", "activate")
	:addConnector("activate", "teleporter_40", "toggle")
spawn("timer", 14,24,3, "timer_32")
	:setTimerInterval(1.5)
	:addConnector("activate", "teleporter_43", "toggle")
	:addConnector("activate", "teleporter_44", "toggle")
	:addConnector("activate", "teleporter_46", "toggle")
	:addConnector("activate", "timer_32", "deactivate")
	:addConnector("activate", "timer_33", "activate")
spawn("timer", 15,25,3, "timer_33")
	:setTimerInterval(1.5)
	:addConnector("activate", "teleporter_43", "toggle")
	:addConnector("activate", "<SELECT TARGET>", "toggle")
	:addConnector("activate", "teleporter_45", "toggle")
	:addConnector("activate", "timer_33", "deactivate")
	:addConnector("activate", "timer_35", "activate")
	:addConnector("activate", "teleporter_46", "toggle")
spawn("temple_wall_text_long", 17,21,0, "temple_wall_text_long_9")
	:setWallText("Ice Elemental Research Archives\
\
Danger - Do Not Enter")
spawn("temple_door_portcullis", 17,26,3, "temple_door_portcullis_62")
spawn("temple_door_portcullis", 16,27,0, "temple_door_portcullis_63")
	:addPullChain()
spawn("temple_alcove", 16,27,2, "temple_alcove_72")
	:addItem(spawn("tome_ice"))
	:addConnector("deactivate", "temple_door_portcullis_62", "open")
spawn("blocker", 16,25,3, "blocker_14")
spawn("torch_holder", 16,21,3, "torch_holder_65")
	:addTorch()
spawn("timer", 15,26,3, "timer_35")
	:setTimerInterval(1.5)
	:addConnector("activate", "teleporter_48", "toggle")
	:addConnector("activate", "teleporter_40", "toggle")
	:addConnector("activate", "timer_35", "deactivate")
	:addConnector("activate", "timer_29", "activate")
	:addConnector("activate", "teleporter_45", "toggle")
spawn("temple_alcove", 15,23,3, "temple_alcove_73")
	:addItem(spawn("milkreed"))
	:addItem(spawn("frost_bomb"))
spawn("torch_holder", 26,27,0, "torch_holder_66")
	:addTorch()
spawn("pressure_plate_hidden", 25,5,0, "pressure_plate_hidden_96")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsAirLab3")
spawn("skeleton_archer_patrol", 16,26,0, "skeleton_archer_patrol_3")
	:setLevel(3)
spawn("lock_round", 23,14,3, "lock_round_4")
	:setOpenedBy("round_key")
	:addConnector("activate", "temple_door_portcullis_42", "open")
spawn("round_key", 29,16,2, "round_key_1")
spawn("pressure_plate_hidden", 27,13,1, "pressure_plate_hidden_129")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3Tome")
spawn("pressure_plate_hidden", 25,13,0, "pressure_plate_hidden_130")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("pressure_plate_hidden", 25,18,0, "pressure_plate_hidden_131")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("pressure_plate_hidden", 29,18,0, "pressure_plate_hidden_132")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("pressure_plate_hidden", 20,10,0, "pressure_plate_hidden_133")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("pressure_plate_hidden", 27,14,0, "pressure_plate_hidden_134")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsEarthLab3")
spawn("temple_stairs_down", 3,14,1, "temple_stairs_down_37")
spawn("pressure_plate_hidden", 23,20,1, "pressure_plate_hidden_147")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsFireLab3")
spawn("pressure_plate_hidden", 25,20,1, "pressure_plate_hidden_148")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsFireLab3")
spawn("pressure_plate_hidden", 31,19,1, "pressure_plate_hidden_149")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsFireLab3")
spawn("pressure_plate_hidden", 25,24,1, "pressure_plate_hidden_150")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsFireLab3")
spawn("temple_stairs_up", 12,1,1, "temple_stairs_up_39")
spawn("temple_stairs_down", 1,27,2, "temple_stairs_down_41")
spawn("temple_stairs_down", 8,23,0, "temple_stairs_down_42")
spawn("temple_stairs_up", 1,29,3, "temple_stairs_up_42")
spawn("temple_stairs_up", 15,19,0, "temple_stairs_up_44")
spawn("temple_stairs_down", 16,31,1, "temple_stairs_down_45")
spawn("altar", 12,27,2, "altar_4")
spawn("temple_pillar", 12,27,0, "temple_pillar_70")
spawn("temple_pillar", 12,28,1, "temple_pillar_75")
spawn("temple_pillar", 13,28,1, "temple_pillar_80")
spawn("temple_pillar", 13,27,0, "temple_pillar_81")
spawn("temple_pit", 11,27,1, "temple_pit_43")
spawn("temple_pit", 13,27,1, "temple_pit_45")
spawn("temple_pit", 12,26,0, "temple_pit_46")
spawn("temple_pit", 12,28,2, "temple_pit_47")
spawn("torch_holder", 11,25,0, "torch_holder_67")
	:addTorch()
spawn("torch_holder", 13,29,2, "torch_holder_68")
	:addTorch()
spawn("temple_pit", 4,12,0, "temple_pit_56")
spawn("blocker", 6,15,1, "blocker_34")
spawn("teleporter", 13,5,0, "teleporter_70")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setTeleportTarget(10,7,0,6)
spawn("torch_holder", 14,1,0, "torch_holder_73")
	:addTorch()
spawn("temple_alcove", 17,2,2, "temple_alcove_81")
	:addItem(spawn("poison_bomb"))
spawn("spider", 13,3,3, "spider_10")
	:setAIState("guard")
spawn("spider", 16,1,2, "spider_11")
spawn("lever", 17,2,3, "lever_12")
	:addConnector("any", "temple_door_portcullis_72", "toggle")
spawn("temple_pillar", 13,5,0, "temple_pillar_96")
spawn("temple_wall_grating", 12,5,1, "temple_wall_grating_49")
spawn("temple_door_portcullis", 13,5,0, "temple_door_portcullis_72")
spawn("baked_maggot", 17,2,1, "baked_maggot_9")
spawn("temple_secret_door", 7,2,0, "temple_secret_door_75")
spawn("temple_secret_door", 2,17,0, "temple_secret_door_78")
	:setDoorState("open")
spawn("temple_secret_door", 1,20,2, "temple_secret_door_79")
spawn("temple_secret_door", 3,20,2, "temple_secret_door_80")
spawn("temple_secret_door", 5,20,2, "temple_secret_door_81")
spawn("temple_secret_door", 1,20,1, "temple_secret_door_82")
	:setDoorState("open")
spawn("temple_secret_door", 1,23,0, "temple_secret_door_83")
spawn("temple_secret_door", 3,22,1, "temple_secret_door_84")
spawn("temple_secret_door", 2,20,1, "temple_secret_door_85")
	:setDoorState("open")
spawn("temple_secret_door", 4,20,3, "temple_secret_door_86")
	:setDoorState("open")
spawn("temple_secret_door", 3,22,3, "temple_secret_door_87")
spawn("temple_secret_door", 5,22,0, "temple_secret_door_88")
spawn("temple_secret_door", 5,22,2, "temple_secret_door_89")
spawn("temple_alcove", 6,22,1, "temple_alcove_82")
	:addItem(spawn("short_bow"))
spawn("pressure_plate_hidden", 5,18,1, "pressure_plate_hidden_161")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto4")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto5")
spawn("script_entity", 3,18,3, "ros_thirdTeachingScript")
	:setSource("counterClockwise = false\
rosSecretDoor3State = \"closed\"\
rosSecretDoor4State = \"closed\"\
rosSecretDoor6State = \"closed\"\
roomState = 5\
bowState = false\
\
function setCCFlagTrue()\
\9counterClockwise = true\
end\
\
function setCCFlagFalse()\
\9counterClockwise = false\
end\
\
function setBowState()\
\9bowState = true\
end\
\
function changeRoomState()\
\9temple_secret_door_96:setDoorState(\"closed\")\
\9if roomState == 5 then\
\9\9temple_secret_door_78:setDoorState(\"open\")\
\9\9temple_secret_door_82:setDoorState(\"open\")\
\9\9temple_secret_door_85:setDoorState(\"open\")\
\9\9temple_secret_door_86:setDoorState(\"open\")\
\9\9temple_secret_door_90:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_79:setDoorState(\"closed\")\
\9\9temple_secret_door_80:setDoorState(\"closed\")\
\9\9temple_secret_door_81:setDoorState(\"closed\")\
\9elseif roomState == 4 then\
\9\9temple_secret_door_79:setDoorState(\"open\")\
\9\9temple_secret_door_94:setDoorState(\"open\")\
\9\9temple_secret_door_87:setDoorState(\"open\")\
\9\9temple_secret_door_95:setDoorState(\"open\")\
\9\9temple_secret_door_80:setDoorState(\"open\")\
\9\9temple_secret_door_86:setDoorState(\"open\")\
\9\9temple_secret_door_90:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_78:setDoorState(\"closed\")\
\9\9temple_secret_door_82:setDoorState(\"closed\")\
\9\9temple_secret_door_83:setDoorState(\"closed\")\
\9\9temple_secret_door_84:setDoorState(\"closed\")\
\9\9temple_secret_door_85:setDoorState(\"closed\")\
\9\9temple_secret_door_81:setDoorState(\"closed\")\
\9\9temple_secret_door_96:setDoorState(rosSecretDoor4State)\
\9elseif roomState == 6 then\
\9\9temple_secret_door_79:setDoorState(\"open\")\
\9\9temple_secret_door_94:setDoorState(\"open\")\
\9\9temple_secret_door_87:setDoorState(\"open\")\
\9\9temple_secret_door_95:setDoorState(\"open\")\
\9\9temple_secret_door_80:setDoorState(\"open\")\
\9\9temple_secret_door_86:setDoorState(\"open\")\
\9\9temple_secret_door_90:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_78:setDoorState(\"closed\")\
\9\9temple_secret_door_82:setDoorState(\"closed\")\
\9\9temple_secret_door_83:setDoorState(\"closed\")\
\9\9temple_secret_door_84:setDoorState(\"closed\")\
\9\9temple_secret_door_85:setDoorState(\"closed\")\
\9\9temple_secret_door_81:setDoorState(\"closed\")\
\9\9temple_secret_door_96:setDoorState(rosSecretDoor6State)\
\9elseif roomState == 3 then\
\9\9temple_secret_door_82:setDoorState(\"open\")\
\9\9temple_secret_door_85:setDoorState(\"open\")\
\9\9temple_secret_door_80:setDoorState(\"open\")\
\9\9temple_secret_door_95:setDoorState(\"open\")\
\9\9temple_secret_door_84:setDoorState(\"open\")\
\9\9temple_secret_door_93:setDoorState(\"open\")\
\9\9temple_secret_door_88:setDoorState(\"open\")\
\9\9temple_secret_door_81:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_78:setDoorState(\"closed\")\
\9\9temple_secret_door_79:setDoorState(\"closed\")\
\9\9temple_secret_door_86:setDoorState(\"closed\")\
\9\9temple_secret_door_87:setDoorState(\"closed\")\
\9\9temple_secret_door_89:setDoorState(\"closed\")\
\9\9temple_secret_door_77:setDoorState(\"closed\")\
\9\9temple_secret_door_90:setDoorState(\"closed\")\
\9\9temple_secret_door_96:setDoorState(rosSecretDoor3State)\
\9elseif roomState == 2 then\
\9\9temple_secret_door_79:setDoorState(\"open\")\
\9\9temple_secret_door_83:setDoorState(\"open\")\
\9\9temple_secret_door_92:setDoorState(\"open\")\
\9\9temple_secret_door_89:setDoorState(\"open\")\
\9\9temple_secret_door_88:setDoorState(\"open\")\
\9\9temple_secret_door_81:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_78:setDoorState(\"closed\")\
\9\9temple_secret_door_82:setDoorState(\"closed\")\
\9\9temple_secret_door_94:setDoorState(\"closed\")\
\9\9temple_secret_door_91:setDoorState(\"closed\")\
\9\9temple_secret_door_93:setDoorState(\"closed\")\
\9\9temple_secret_door_77:setDoorState(\"closed\")\
\9\9temple_secret_door_90:setDoorState(\"closed\")\
\9elseif roomState == 1 then\
\9\9temple_secret_door_79:setDoorState(\"open\")\
\9\9temple_secret_door_83:setDoorState(\"open\")\
\9\9temple_secret_door_91:setDoorState(\"open\")\
\9\9temple_secret_door_89:setDoorState(\"open\")\
\9\9temple_secret_door_88:setDoorState(\"open\")\
\9\9temple_secret_door_81:setDoorState(\"open\")\
\9\9temple_secret_door_99:setDoorState(\"open\")\
\9\9temple_secret_door_78:setDoorState(\"closed\")\
\9\9temple_secret_door_82:setDoorState(\"closed\")\
\9\9temple_secret_door_94:setDoorState(\"closed\")\
\9\9temple_secret_door_92:setDoorState(\"closed\")\
\9\9temple_secret_door_93:setDoorState(\"closed\")\
\9\9temple_secret_door_77:setDoorState(\"closed\")\
\9\9temple_secret_door_90:setDoorState(\"closed\")\
\9elseif roomState == 7 then\
\9\9temple_secret_door_90:setDoorState(\"open\")\
\9\9temple_secret_door_86:setDoorState(\"open\")\
\9\9temple_secret_door_85:setDoorState(\"open\")\
\9\9temple_secret_door_82:setDoorState(\"open\")\
\9\9temple_secret_door_79:setDoorState(\"open\")\
\9\9temple_secret_door_94:setDoorState(\"open\")\
\9\9temple_secret_door_87:setDoorState(\"open\")\
\9\9temple_secret_door_84:setDoorState(\"open\")\
\9\9temple_secret_door_93:setDoorState(\"open\")\
\9\9if bowState then\
\9\9\9temple_secret_door_77:setDoorState(\"open\")\
\9\9end\
\9\9temple_secret_door_81:setDoorState(\"closed\")\
\9\9temple_secret_door_80:setDoorState(\"closed\")\
\9\9temple_secret_door_99:setDoorState(\"closed\")\
\9\9temple_secret_door_95:setDoorState(\"closed\")\
\9\9temple_secret_door_89:setDoorState(\"closed\")\
\9\9temple_secret_door_88:setDoorState(\"closed\")\
\9end\
end\
\
function rosCCto8()\
\9if roomState == 9 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto7()\
\9if roomState == 8 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto6()\
\9if roomState == 7 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto5()\
\9if roomState == 6 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9closeSecretRoom6()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto4()\
\9if roomState == 5 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto3()\
\9if roomState == 4 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9closeSecretRoom4()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto2()\
\9if roomState == 3 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9closeSecretRoom3()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCCto1()\
\9if roomState == 2 and counterClockwise == true then\
\9\9roomState = roomState - 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = false\
\9end\9\
end\
\
function rosCto9()\
\9if roomState == 8 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto8()\
\9if roomState == 7 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto7()\
\9if roomState == 6 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9closeSecretRoom6()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto6()\
\9if roomState == 5 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto5()\
\9if roomState == 4 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9closeSecretRoom4()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto4()\
\9if roomState == 3 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9closeSecretRoom3()\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\9\9\
\9end\
end\
\
function rosCto3()\
\9if roomState == 2 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function rosCto2()\
\9if roomState == 1 and counterClockwise == false then\
\9\9roomState = roomState + 1\
\9\9ros_thirdTeachingScript:changeRoomState()\
\9\9counterClockwise = true\
\9end\
end\
\
function moveSecretItemIn()\
\9if roomState == 4 then\
\9\9teleporter_79:activate()\
\9elseif roomState == 3 then\
\9\9teleporter_80:activate()\
\9elseif roomState == 6 then\
\9\9teleporter_84:activate()\
\9end\
end\
\
function closeSecretRoom3()\
\9teleporter_78:activate()\
\9if temple_secret_door_96:isOpen() == true then\
\9\9rosSecretDoor3State = \"open\"\
\9else\
\9\9rosSecretDoor3State = \"closed\"\
\9end\
end\
\
function closeSecretRoom4()\
\9teleporter_76:activate()\
\9if temple_secret_door_96:isOpen() == true then\
\9\9rosSecretDoor4State = \"open\"\
\9else\
\9\9rosSecretDoor4State = \"closed\"\
\9end\
end\
\
function closeSecretRoom6()\
\9teleporter_83:activate()\
\9if temple_secret_door_96:isOpen() == true then\
\9\9rosSecretDoor6State = \"open\"\
\9else\
\9\9rosSecretDoor6State = \"closed\"\
\9end\
end\
\
function secrets()\
\9if roomState == 3 then\
\9\9secret_19:activate()\
\9elseif roomState == 4 then\
\9\9secret_21:activate()\9\
\9elseif roomState == 6 then\
\9\9secret_22:activate()\9\
\9end\9\
end\
")
spawn("pressure_plate_hidden", 2,18,1, "pressure_plate_hidden_164")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "setCCFlagTrue")
spawn("pressure_plate_hidden", 5,19,1, "pressure_plate_hidden_165")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto5")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto6")
spawn("temple_secret_door", 6,22,3, "temple_secret_door_77")
spawn("temple_secret_door", 1,25,0, "temple_secret_door_91")
spawn("temple_secret_door", 5,20,3, "temple_secret_door_90")
	:setDoorState("open")
spawn("temple_secret_door", 2,24,3, "temple_secret_door_92")
spawn("temple_secret_door", 5,22,3, "temple_secret_door_93")
spawn("temple_secret_door", 2,22,3, "temple_secret_door_94")
spawn("pressure_plate_hidden", 3,17,1, "pressure_plate_hidden_166")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto6")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto7")
spawn("pressure_plate_hidden", 4,17,1, "pressure_plate_hidden_167")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto3")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto2")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCCto1")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto7")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto8")
spawn("pressure_plate_hidden", 5,17,1, "pressure_plate_hidden_168")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto4")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto3")
	:addConnector("activate", "ros_thirdTeachingScript", "rosCto2")
spawn("temple_secret_door", 3,21,2, "temple_secret_door_95")
spawn("temple_floor_ros_01", 6,22,1, "temple_floor_ros_01_2")
spawn("temple_mosaic_wall_ros_2", 6,22,0, "temple_mosaic_wall_ros_2_5")
spawn("temple_mosaic_wall_ros_2", 6,22,2, "temple_mosaic_wall_ros_2_6")
spawn("temple_alcove", 2,20,0, "temple_alcove_83")
	:addItem(spawn("hide_vest"))
spawn("temple_alcove", 1,21,1, "temple_alcove_84")
	:addItem(spawn("leather_gloves"))
spawn("temple_alcove", 3,24,0, "temple_alcove_85")
	:addItem(spawn("leather_pants"))
spawn("temple_alcove", 1,25,3, "temple_alcove_86")
	:addItem(spawn("poison_arrow"))
	:addItem(spawn("poison_arrow"))
spawn("temple_secret_door", 3,19,2, "temple_secret_door_96")
spawn("temple_secret_button_large", 3,21,1, "temple_secret_button_large_12")
	:addConnector("toggle", "temple_secret_door_96", "toggle")
spawn("fist_dagger", 9,22,0, "fist_dagger_1")
spawn("temple_door_metal", 1,14,1, "temple_door_metal_17")
spawn("temple_pressure_plate", 1,14,2, "temple_pressure_plate_41")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_17", "toggle")
spawn("lurker_boots", 10,22,1, "lurker_boots_1")
spawn("temple_alcove", 6,24,1, "temple_alcove_87")
	:addItem(spawn("brass_key"))
spawn("pressure_plate_hidden", 6,24,2, "pressure_plate_hidden_162")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "setBowState")
spawn("script_entity", 7,24,2, "script_entity_38")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText([[\
\9All the way clockwise head to find the bow\
\9The alcove was sealed, it is open now\
\9]])\
\
temple_alcove_87:addItem(message)")
spawn("torch_holder", 1,20,3, "torch_holder_74")
	:addTorch()
spawn("torch_holder", 5,18,1, "torch_holder_75")
	:addTorch()
spawn("torch_holder", 3,22,2, "torch_holder_76")
	:addTorch()
spawn("temple_floor_ros_02", 6,24,3, "temple_floor_ros_02_2")
spawn("torch_holder", 4,24,2, "torch_holder_77")
	:addTorch()
spawn("teleporter", 3,19,0, "teleporter_76")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(9,22,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("teleporter", 3,19,0, "teleporter_78")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(10,22,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("teleporter", 9,22,0, "teleporter_79")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(3,19,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("teleporter", 10,22,0, "teleporter_80")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(3,19,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("pressure_plate_hidden", 2,20,0, "pressure_plate_hidden_169")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "moveSecretItemIn")
spawn("pressure_plate_hidden", 3,20,3, "pressure_plate_hidden_170")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_79", "deactivate")
	:addConnector("activate", "teleporter_80", "deactivate")
	:addConnector("activate", "teleporter_76", "deactivate")
	:addConnector("activate", "teleporter_78", "deactivate")
	:addConnector("activate", "teleporter_84", "deactivate")
	:addConnector("activate", "teleporter_83", "deactivate")
	:addConnector("activate", "spawner_47", "activate")
spawn("pressure_plate_hidden", 1,20,3, "pressure_plate_hidden_173")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_79", "deactivate")
	:addConnector("activate", "teleporter_80", "deactivate")
	:addConnector("activate", "teleporter_76", "deactivate")
	:addConnector("activate", "teleporter_78", "deactivate")
	:addConnector("activate", "teleporter_83", "deactivate")
	:addConnector("activate", "teleporter_84", "deactivate")
spawn("torch_holder", 6,1,0, "torch_holder_78")
spawn("script_entity", 4,0,0, "script_entity_37")
	:setSource("function rotate180()\
\9local t = teleporter_77\
\9t:setTeleportTarget(t.x, t.y, (party.facing + 2)%4)\
end")
spawn("teleporter", 4,1,3, "teleporter_77")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(4,1,3,7)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("pressure_plate_hidden", 4,1,1, "pressure_plate_hidden_171")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_37", "rotate180")
spawn("torch_holder", 2,1,2, "torch_holder_79")
spawn("script_entity", 1,7,1, "script_entity_40")
	:setSource("function rotate180()\
\9local t = teleporter_82\
\9t:setTeleportTarget(t.x, t.y, (party.facing + 2)%4)\
end\
\
")
spawn("teleporter", 0,7,0, "teleporter_82")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(4,1,3,7)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
spawn("pressure_plate_hidden", 0,7,2, "pressure_plate_hidden_174")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_40", "rotate180")
	:addConnector("activate", "script_entity_39", "rosDoorReset")
spawn("temple_secret_button_small", 0,3,1, "temple_secret_button_small_11")
	:addConnector("toggle", "temple_secret_door_75", "toggle")
spawn("herder_big", 7,3,0, "herder_big_3")
spawn("snail_slice", 7,4,1, "snail_slice_2")
spawn("temple_wall_text_long", 10,1,2, "temple_wall_text_long_15")
	:setWallText("Third teaching of Zaros\
\
The Rogue shall not let illusions\
sway him from his path.")
spawn("shrakk_torr", 2,10,1, "shrakk_torr_1")
spawn("shrakk_torr", 4,10,3, "shrakk_torr_2")
spawn("temple_secret_door", 0,12,0, "temple_secret_door_97")
spawn("temple_secret_door", 1,1,3, "temple_secret_door_98")
	:setDoorState("open")
spawn("pressure_plate_hidden", 0,11,2, "pressure_plate_hidden_172")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_39", "rosDoor1")
spawn("pressure_plate_hidden", 0,1,2, "pressure_plate_hidden_175")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_39", "rosDoor2")
spawn("script_entity", 1,11,1, "script_entity_39")
	:setSource("rosDoorResetFlag = 0\
\
function rosDoor1()\
\9if temple_secret_door_97:isClosed() == true \
\9  and temple_secret_door_98:isOpen() == true\
\9  and rosDoorResetFlag == 2 then\
\9\9temple_secret_door_98:setDoorState(\"closed\")\
\9elseif temple_secret_door_97:isClosed() == true\
\9  and temple_secret_door_98:isClosed() == true\
\9  and rosDoorResetFlag == 2 then\
\9\9temple_secret_door_98:setDoorState(\"open\")\
\9end\
\9rosDoorResetFlag = 1\
end\
\
function rosDoor2()\
\9if temple_secret_door_97:isClosed() == true\
  \9  and temple_secret_door_98:isClosed() == true\
\9  and rosDoorResetFlag == 1 then\
\9\9temple_secret_door_97:setDoorState(\"open\")\
\9elseif temple_secret_door_97:isOpen() == true\
\9  and temple_secret_door_98:isClosed() == true\
\9  and rosDoorResetFlag == 1 then\
\9\9temple_secret_door_97:setDoorState(\"closed\")\
\9end\
\9rosDoorResetFlag = 2\
end\
")
spawn("temple_door_portcullis", 3,12,0, "temple_door_portcullis_73")
	:addPullChain()
spawn("shrakk_torr", 3,9,2, "shrakk_torr_3")
	:setLevel(3)
spawn("temple_alcove", 2,8,3, "temple_alcove_27")
	:addItem(spawn("amethyst_key"))
spawn("temple_secret_door", 1,19,2, "temple_secret_door_99")
	:setDoorState("open")
spawn("pressure_plate_hidden", 2,17,1, "pressure_plate_hidden_177")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "setCCFlagFalse")
	:addConnector("activate", "spawner_46", "activate")
spawn("teleporter", 3,19,0, "teleporter_83")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(10,23,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("teleporter", 10,23,0, "teleporter_84")
	:setTriggeredByParty(false)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(3,19,0,7)
	:setChangeFacing(false)
	:setInvisible(true)
	:setSilent(true)
	:setHideLight(true)
	:setScreenFlash(false)
	:deactivate()
spawn("pressure_plate_hidden", 4,20,0, "pressure_plate_hidden_178")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "moveSecretItemIn")
spawn("pressure_plate_hidden", 5,20,3, "pressure_plate_hidden_179")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "teleporter_79", "deactivate")
	:addConnector("activate", "teleporter_80", "deactivate")
	:addConnector("activate", "teleporter_76", "deactivate")
	:addConnector("activate", "teleporter_78", "deactivate")
	:addConnector("activate", "teleporter_84", "deactivate")
	:addConnector("activate", "teleporter_83", "deactivate")
spawn("pressure_plate_hidden", 2,22,0, "pressure_plate_hidden_180")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "moveSecretItemIn")
spawn("pressure_plate_hidden", 4,22,0, "pressure_plate_hidden_181")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "moveSecretItemIn")
spawn("poison_bomb", 10,23,3, "poison_bomb_2")
spawn("rat_shank", 10,23,1, "rat_shank_7")
spawn("spider_great", 6,22,3, "spider_great_1")
spawn("spider", 5,17,3, "spider_12")
spawn("spider_great", 1,25,0, "spider_great_3")
spawn("spider", 5,24,0, "spider_14")
spawn("spawner", 3,21,0, "spawner_46")
	:setSpawnedEntity("spider_great")
	:setCoolDown(240)
spawn("spawner", 1,22,0, "spawner_47")
	:setSpawnedEntity("spider")
	:setCoolDown(120)
spawn("throwing_axe", 4,10,1, "throwing_axe_4")
spawn("throwing_axe", 4,10,1, "throwing_axe_5")
spawn("baked_maggot", 1,21,3, "baked_maggot_10")
spawn("boiled_beetle", 5,23,1, "boiled_beetle_3")
spawn("shuriken", 7,4,2, "shuriken_4")
spawn("shuriken", 7,4,2, "shuriken_5")
spawn("skeleton_remains", 5,21,1, "skeleton_remains_6")
spawn("torch_holder", 3,11,1, "torch_holder_81")
	:addTorch()
spawn("torch_holder", 0,16,3, "torch_holder_83")
	:addTorch()
spawn("rusted_arrow", 5,19,3, "rusted_arrow_6")
spawn("skeleton_remains", 2,10,3, "skeleton_remains_7")
spawn("rusted_long_sword", 2,10,0, "rusted_long_sword_2")
spawn("secret", 7,2,0, "secret_9")
spawn("temple_pit", 3,26,1, "temple_pit_67")
spawn("temple_pit", 3,27,1, "temple_pit_69")
spawn("temple_pit", 3,28,1, "temple_pit_70")
spawn("temple_pit", 3,28,1, "temple_pit_71")
spawn("teleporter", 4,28,3, "teleporter_81")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(3,28,3,7)
	:setChangeFacing(false)
spawn("teleporter", 5,29,3, "teleporter_85")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(5,30,3,7)
	:setChangeFacing(false)
spawn("teleporter", 5,27,0, "teleporter_87")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(5,26,0,7)
	:setChangeFacing(false)
spawn("teleporter", 6,28,2, "teleporter_88")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(7,28,2,7)
	:setChangeFacing(false)
spawn("torch_holder", 7,28,1, "torch_holder_89")
	:addTorch()
spawn("brass_key", 5,28,0, "brass_key_1")
spawn("temple_alcove", 2,30,3, "temple_alcove_43")
	:addItem(spawn("leather_boots"))
spawn("pressure_plate_hidden", 6,27,1, "pressure_plate_hidden_198")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_49", "activate")
	:addConnector("deactivate", "timer_49", "deactivate")
spawn("timer", 8,27,1, "timer_49")
	:setTimerInterval(12)
	:addConnector("activate", "teleporter_88", "deactivate")
	:addConnector("activate", "timer_50", "activate")
	:addConnector("activate", "timer_49", "deactivate")
spawn("timer", 8,28,1, "timer_50")
	:setTimerInterval(4)
	:addConnector("activate", "teleporter_88", "activate")
	:addConnector("activate", "timer_49", "activate")
	:addConnector("activate", "timer_50", "deactivate")
spawn("pressure_plate_hidden", 6,29,1, "pressure_plate_hidden_205")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_49", "activate")
	:addConnector("deactivate", "timer_49", "deactivate")
spawn("timer", 4,25,1, "timer_52")
	:setTimerInterval(12)
	:addConnector("activate", "teleporter_81", "deactivate")
	:addConnector("activate", "timer_53", "activate")
	:addConnector("activate", "timer_52", "deactivate")
spawn("timer", 5,25,1, "timer_53")
	:setTimerInterval(4)
	:addConnector("activate", "teleporter_81", "activate")
	:addConnector("activate", "timer_52", "activate")
	:addConnector("activate", "timer_53", "deactivate")
spawn("pressure_plate_hidden", 4,27,1, "pressure_plate_hidden_206")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_52", "activate")
	:addConnector("deactivate", "timer_52", "deactivate")
spawn("pressure_plate_hidden", 4,29,1, "pressure_plate_hidden_207")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_52", "activate")
	:addConnector("deactivate", "timer_52", "deactivate")
spawn("temple_wall_text_long", 7,26,0, "temple_wall_text_long_17")
	:setWallText("Fifth teaching of Zaros\
\
The Rogue shall wait patiently next to his target, and seize the right moment.")
spawn("pressure_plate_hidden", 5,30,1, "pressure_plate_hidden_208")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_52", "activate")
	:addConnector("deactivate", "timer_52", "deactivate")
spawn("pressure_plate_hidden", 7,28,1, "pressure_plate_hidden_209")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_49", "activate")
	:addConnector("deactivate", "timer_49", "deactivate")
spawn("pressure_plate_hidden", 5,26,1, "pressure_plate_hidden_210")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_52", "activate")
	:addConnector("deactivate", "timer_52", "deactivate")
spawn("shrakk_torr", 3,28,1, "shrakk_torr_4")
spawn("blocker", 4,28,2, "blocker_39")
spawn("blocker", 5,27,2, "blocker_40")
spawn("blocker", 6,28,1, "blocker_41")
spawn("blocker", 5,29,1, "blocker_42")
spawn("temple_stairs_up", 16,29,3, "temple_stairs_up_52")
spawn("temple_secret_door", 19,31,3, "temple_secret_door_130")
spawn("temple_secret_door", 18,29,1, "temple_secret_door_131")
	:setDoorState("open")
spawn("temple_alcove", 20,30,1, "temple_alcove_97")
	:addItem(spawn("crystal_key"))
	:addConnector("deactivate", "temple_secret_door_131", "close")
spawn("temple_wall_text_long", 20,29,1, "temple_wall_text_long_13")
	:setWallText("Thieves will be entombed.\
\
Once sealed, this crypt can never\
be opened from inside.")
spawn("temple_secret_button_tiny", 19,30,3, "temple_secret_button_tiny_3")
	:addConnector("toggle", "temple_secret_door_130", "toggle")
spawn("torch", 18,31,3, "torch_1")
spawn("pressure_plate_hidden", 25,26,2, "pressure_plate_hidden_217")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
spawn("pressure_plate_hidden", 19,23,2, "pressure_plate_hidden_218")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
	:addConnector("activate", "timer_59", "deactivate")
spawn("pressure_plate_hidden", 18,21,2, "pressure_plate_hidden_219")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
spawn("pressure_plate_hidden", 17,26,2, "pressure_plate_hidden_220")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
spawn("lever", 18,29,0, "lever_20")
	:setLeverState("activated")
	:addConnector("activate", "temple_secret_door_131", "toggle")
spawn("pressure_plate_hidden", 17,21,2, "pressure_plate_hidden_221")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3Tome")
spawn("pressure_plate_hidden", 16,26,2, "pressure_plate_hidden_222")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3Tome")
spawn("pressure_plate_hidden", 16,27,2, "pressure_plate_hidden_223")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3Tome2")
spawn("pressure_plate_hidden", 19,20,2, "pressure_plate_hidden_224")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_7", "hsIceLab3")
	:addConnector("activate", "timer_30", "deactivate")
spawn("blocker", 12,3,2, "blocker_45")
spawn("pressure_plate_hidden", 12,3,3, "pressure_plate_hidden_83")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "blocker_45", "deactivate")
	:addConnector("activate", "blocker_47", "deactivate")
	:addConnector("activate", "blocker_48", "deactivate")
spawn("blocker", 12,4,2, "blocker_47")
spawn("blocker", 12,5,2, "blocker_48")
spawn("pressure_plate_hidden", 12,4,3, "pressure_plate_hidden_231")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "blocker_45", "deactivate")
	:addConnector("activate", "blocker_47", "deactivate")
	:addConnector("activate", "blocker_48", "deactivate")
spawn("pressure_plate_hidden", 12,5,3, "pressure_plate_hidden_232")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "blocker_45", "deactivate")
	:addConnector("activate", "blocker_47", "deactivate")
	:addConnector("activate", "blocker_48", "deactivate")
spawn("spawner", 2,8,1, "spawner_52")
	:setSpawnedEntity("shrakk_torr")
	:setCoolDown(0)
spawn("timer", 4,8,3, "timer_55")
	:setTimerInterval(1000)
	:activate()
	:addConnector("activate", "spawner_52", "activate")
spawn("temple_wall_text", 2,16,1, "temple_wall_text_26")
	:setWallText("The Winding Room")
spawn("hand_axe", 7,4,2, "hand_axe_1")
spawn("blooddrop_blossom", 21,1,3, "blooddrop_blossom_1")
spawn("throwing_knife", 30,24,2, "throwing_knife_7")
spawn("throwing_knife", 30,24,2, "throwing_knife_8")
spawn("tar_bead", 9,22,2, "tar_bead_16")
spawn("shuriken", 7,29,2, "shuriken_2")
spawn("shuriken", 7,29,1, "shuriken_3")
spawn("temple_pillar", 14,16,3, "temple_pillar_119")
spawn("temple_wall_grating", 14,15,3, "temple_wall_grating_63")
spawn("temple_stairs_up", 12,18,3, "temple_stairs_up_58")
spawn("temple_secret_door", 13,19,2, "temple_secret_door_141")
spawn("zone_marker", 6,13,3, "zone_marker_6")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 7,15,3, "zone_marker_14")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 12,8,3, "zone_marker_15")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 8,5,3, "zone_marker_16")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 2,6,3, "zone_marker_17")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 3,4,3, "zone_marker_18")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 4,3,3, "zone_marker_19")
	:setSource("zone = \"ku_crypts\"")
spawn("zone_marker", 12,7,3, "zone_marker_20")
	:setSource("zone = \"ku_crossroads\"")
spawn("zone_marker", 12,3,0, "zone_marker_53")
	:setSource("zone = \"ros_secondTeaching.pit\"")
spawn("zone_marker", 12,4,0, "zone_marker_54")
	:setSource("zone = \"ros_secondTeaching.pit\"")
spawn("zone_marker", 12,5,0, "zone_marker_55")
	:setSource("zone = \"ros_secondTeaching.pit\"")
spawn("zone_marker", 12,1,3, "zone_marker_56")
	:setSource("zone = \"ros_thirdTeaching.corridors\"")
spawn("zone_marker", 0,14,3, "zone_marker_57")
	:setSource("zone = \"ros_thirdTeaching.corridors\"")
spawn("zone_marker", 1,14,3, "zone_marker_58")
	:setSource("zone = \"ros_crossroads\"")
spawn("zone_marker", 2,16,3, "zone_marker_59")
	:setSource("zone = \"ros_thirdTeaching.corridors\"")
spawn("zone_marker", 2,17,3, "zone_marker_60")
	:setSource("zone = \"ros_thirdTeaching.winding\"")
spawn("zone_marker", 1,27,3, "zone_marker_61")
	:setSource("zone = \"ros_thirdTeaching.winding\"")
spawn("secret", 0,19,2, "secret_19")
spawn("secret", 0,20,2, "secret_21")
spawn("secret", 0,21,2, "secret_22")
spawn("pressure_plate_hidden", 3,19,1, "pressure_plate_hidden_32")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "ros_thirdTeachingScript", "secrets")
spawn("zone_marker", 8,23,3, "zone_marker_62")
	:setSource("zone = \"ros_fifthTeaching\"")
spawn("zone_marker", 1,29,3, "zone_marker_82")
	:setSource("zone = \"ros_fifthTeaching\"")
spawn("zone_marker", 5,26,3, "zone_marker_83")
	:setSource("zone = \"ros_fifthTeaching\"")
spawn("zone_marker", 7,29,3, "zone_marker_84")
	:setSource("zone = \"ros_fifthTeaching\"")
spawn("zone_marker", 26,2,3, "zone_marker_112")
	:setSource("zone = \"dain_airLab_3\"")
spawn("zone_marker", 24,4,3, "zone_marker_115")
	:setSource("zone = \"dain_airLab_3\"")
spawn("zone_marker", 23,4,3, "zone_marker_116")
	:setSource("zone = \"dain_crossroads\"")
spawn("zone_marker", 20,9,3, "zone_marker_117")
	:setSource("zone = \"dain_crossroads\"")
spawn("zone_marker", 19,3,3, "zone_marker_118")
	:setSource("zone = \"dain_crossroads\"")
spawn("zone_marker", 25,11,3, "zone_marker_119")
	:setSource("zone = \"dain_airLab_3\"")
spawn("zone_marker", 26,11,3, "zone_marker_120")
	:setSource("zone = \"dain_airLab_3.tome\"")
spawn("zone_marker", 29,8,3, "zone_marker_121")
	:setSource("zone = \"dain_airLab_3.tome\"")
spawn("zone_marker", 23,11,3, "zone_marker_122")
	:setSource("zone = \"dain_airLab_3\"")

--- level 8 ---

mapName("Lower Temple")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
###########.######...###########
###....####...##.....#...######.
#...##.####.#.#..#...#...##...#.
#.#.##...........###.#...##...#.
#......#..#.#.##.#...##.###...#.
##...#.#.##...#.##.#.#..#..#.##.
#......##.#.###.####.#.#.#.#....
####.##.#..#..#.###..#.#...####.
#..#..#.......#..##.##.#.#...##.
#............###.....#.....#....
##....#..#.#..##.##.##.##.###...
##..#.#....####...#.##..#.....#.
####.#######........#####.###.#.
#.##.........##...##...##.##..#.
#.#..#######..##.###.####.#####.
#.###.#.#.#.####.##...###.#.....
#...........#....##.......#.###.
#..####.....#.#.###...#.###.#.#.
....#....#..#.#.#.#####.........
..#.........#.#...#...#..######.
#.###.......#.###.#.#....#######
#...#.###...#.###.###.##.##...##
#.#......###..###.##..##......##
#...##.#.###.#####....#####...##
##.#..###..#.#..##....##########
##.#............##...###########
##..#..........#################
#.#.#..............#############
#...#..........###.#############
####............##.#############
####..###..###..##.#############
#################..#############
]])
spawn("temple_wall_grating", 15,13,0, "temple_wall_grating_5")
spawn("temple_wall_grating", 17,13,3, "temple_wall_grating_7")
spawn("temple_wall_grating", 17,11,2, "temple_wall_grating_9")
spawn("temple_wall_grating", 15,11,1, "temple_wall_grating_11")
spawn("temple_pillar", 16,13,0, "temple_pillar_3")
spawn("temple_pillar", 16,12,2, "temple_pillar_6")
spawn("temple_pillar", 17,12,1, "temple_pillar_7")
spawn("temple_pillar", 17,13,0, "temple_pillar_8")
spawn("teleporter", 16,12,0, "teleporter_1")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(16,12,0,6)
spawn("temple_stairs_up", 17,18,0, "temple_stairs_up_11")
spawn("temple_stairs_down", 17,22,2, "temple_stairs_down_10")
spawn("temple_stairs_up", 8,5,2, "temple_stairs_up_12")
spawn("temple_pit", 12,3,1, "temple_pit_2")
spawn("temple_pit", 13,2,2, "temple_pit_3")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 13,4,2, "temple_pit_4")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_door_portcullis", 11,3,2, "temple_door_portcullis_2")
spawn("temple_door_portcullis", 11,3,0, "temple_door_portcullis_5")
	:setDoorState("open")
spawn("timer", 10,2,2, "timer_1")
	:setTimerInterval(3)
	:addConnector("activate", "ku_lowerChambersScript", "toggleDoors")
spawn("temple_secret_door", 11,0,2, "temple_secret_door_7")
spawn("temple_secret_door", 11,6,0, "temple_secret_door_8")
spawn("temple_pressure_plate", 11,2,1, "temple_pressure_plate_2")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "ku_lowerChambersScript", "spawnSkeletonN")
spawn("temple_pressure_plate", 11,4,1, "temple_pressure_plate_3")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "ku_lowerChambersScript", "spawnSkeletonS")
spawn("pressure_plate_hidden", 11,3,0, "pressure_plate_hidden_10")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "temple_secret_door_7", "close")
	:addConnector("activate", "temple_secret_door_8", "close")
spawn("lever", 11,0,0, "lever_1")
	:addConnector("any", "temple_pit_4", "toggle")
spawn("lever", 11,6,2, "lever_2")
	:addConnector("any", "temple_pit_3", "toggle")
spawn("temple_stairs_down", 18,5,2, "temple_stairs_down_11")
spawn("temple_mosaic_wall_ku_1", 17,13,1, "temple_mosaic_wall_ku_1_5")
spawn("temple_mosaic_wall_dain_2", 17,11,0, "temple_mosaic_wall_dain_2_6")
spawn("torch_holder", 14,3,2, "torch_holder_20")
	:addTorch()
spawn("temple_alcove", 17,11,1, "temple_alcove_crossroads_dain")
spawn("temple_alcove", 17,13,2, "temple_alcove_crossroads_ku")
spawn("temple_goromorg_statue", 18,12,2, "temple_goromorg_statue_7")
spawn("temple_goromorg_statue", 16,10,1, "temple_goromorg_statue_9")
spawn("temple_goromorg_statue", 14,12,0, "temple_goromorg_statue_10")
spawn("temple_goromorg_statue", 16,14,3, "temple_goromorg_statue_11")
spawn("temple_alcove", 15,13,3, "temple_alcove_crossroads_gor")
spawn("temple_alcove", 15,11,0, "temple_alcove_crossroads_ros")
spawn("lock_ornate", 17,20,1, "lock_ornate_3")
	:setOpenedBy("")
	:addConnector("activate", "temple_door_ornament_4", "open")
spawn("temple_door_ornament", 17,20,2, "temple_door_ornament_6")
spawn("temple_secret_door", 17,19,3, "temple_secret_door_11")
spawn("temple_secret_button_large", 17,20,3, "temple_secret_button_large_2")
	:addConnector("toggle", "temple_secret_door_11", "toggle")
spawn("temple_wall_grating", 15,17,0, "temple_wall_grating_13")
spawn("potion_healing", 15,17,2, "potion_healing_1")
spawn("mole_jerky", 15,17,3, "mole_jerky_3")
spawn("secret", 16,18,3, "secret_1")
spawn("script_entity", 12,2,2, "ku_lowerChambersScript")
	:setSource("function spawnSkeletonN()\
\9if temple_secret_door_7:isClosed() then\
\9\9spawn(\"skeleton_warrior\",7,11,0,2)\
\9\9temple_secret_door_7:open()\
\9end\
end\
\
function spawnSkeletonS()\
\9if temple_secret_door_8:isClosed() then\
\9\9spawn(\"skeleton_warrior\",7,11,6,0)\
\9\9temple_secret_door_8:open()\
\9end\
end\
\
function toggleDoors()\
\9if coreScript.zone == \"ku_lowerChambers\" and coreScript.subZone == nil then\
\9\9temple_door_portcullis_5:toggle()\
\9\9temple_door_portcullis_2:toggle()\
\9end\
end")
spawn("temple_floor_ku_02", 17,12,1, "temple_floor_ku_02_1")
spawn("temple_door_metal", 20,6,2, "temple_door_metal_6")
spawn("temple_pressure_plate", 20,6,3, "temple_pressure_plate_5")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_6", "toggle")
	:addConnector("activate", "crossroadsScript", "switchWallsToKu")
spawn("temple_stairs_down", 16,4,2, "temple_stairs_down_14")
spawn("temple_wall_grating", 20,3,2, "temple_wall_grating_14")
spawn("temple_door_portcullis", 18,1,3, "temple_door_portcullis_12")
	:addPullChain()
spawn("skeleton_patrol", 19,1,3, "skeleton_patrol_1")
	:setAIState("guard")
	:setLevel(5)
spawn("mole_jerky", 20,3,3, "mole_jerky_4")
spawn("pitroot_bread", 20,3,1, "pitroot_bread_1")
spawn("arrow", 20,0,0, "arrow_6")
spawn("torch_holder", 20,2,1, "torch_holder_28")
	:addTorch()
spawn("throwing_axe", 15,18,3, "throwing_axe_1")
spawn("throwing_axe", 15,18,3, "throwing_axe_2")
spawn("temple_alcove", 20,1,1, "temple_alcove_42")
	:addItem(spawn("emerald_key"))
spawn("temple_floor_dain_02", 16,11,0, "temple_floor_dain_02_1")
spawn("teleporter", 25,5,2, "teleporter_21")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setTeleportTarget(25,5,2,7)
spawn("rusted_arrow", 26,9,1, "rusted_arrow_4")
spawn("temple_stairs_up", 23,11,1, "temple_stairs_up_23")
spawn("altar", 23,2,0, "altar_2")
	:addItem(spawn("essence_air"))
spawn("spawner", 24,1,2, "spawner_6")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("temple_stairs_up", 15,5,0, "temple_stairs_up_24")
spawn("spawner", 22,1,2, "spawner_7")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("spawner", 25,15,1, "spawner_8")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("spawner", 24,3,0, "spawner_9")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("daemon_head", 25,15,3, "daemon_head_15")
spawn("daemon_head", 22,1,0, "daemon_head_16")
spawn("daemon_head", 24,1,0, "daemon_head_17")
spawn("daemon_head", 24,3,2, "daemon_head_18")
spawn("temple_wall_grating", 23,6,1, "temple_wall_grating_30")
spawn("timer", 25,2,2, "timer_12")
	:setTimerInterval(1)
	:activate()
	:addConnector("activate", "dain_airLab_4Script", "shrine")
spawn("temple_mosaic_wall_dain_2", 22,2,3, "temple_mosaic_wall_dain_2_9")
spawn("temple_mosaic_wall_dain_2", 24,2,1, "temple_mosaic_wall_dain_2_11")
spawn("shock_bomb", 23,1,2, "shock_bomb_1")
spawn("shock_quarrel", 23,1,2, "shock_quarrel_1")
spawn("shock_quarrel", 23,1,2, "shock_quarrel_2")
spawn("temple_pit", 23,9,1, "temple_pit_24")
spawn("temple_stairs_down", 20,9,1, "temple_stairs_down_24")
spawn("temple_secret_door", 19,9,3, "temple_secret_door_49")
spawn("temple_secret_door", 19,9,1, "temple_secret_door_50")
spawn("temple_secret_door", 19,9,0, "temple_secret_door_51")
spawn("temple_secret_door", 19,10,0, "temple_secret_door_52")
spawn("temple_secret_door", 17,9,3, "temple_secret_door_53")
spawn("temple_secret_door", 16,8,2, "temple_secret_door_54")
spawn("script_entity", 18,8,1, "crossroadsScript")
	:setSource("function switchWallsToKu()\
\9temple_secret_door_49:setDoorState(\"closed\")\
\9temple_secret_door_50:setDoorState(\"closed\")\
\9temple_secret_door_51:setDoorState(\"open\")\
\9temple_secret_door_52:setDoorState(\"open\")\
end\
\
function switchWallsToDain()\
\9temple_secret_door_49:setDoorState(\"open\")\
\9temple_secret_door_50:setDoorState(\"open\")\
\9temple_secret_door_51:setDoorState(\"closed\")\
\9temple_secret_door_52:setDoorState(\"closed\")\
\9temple_secret_door_53:setDoorState(\"open\")\
\9temple_secret_door_54:setDoorState(\"closed\")\
end")
spawn("torch_holder", 24,9,2, "torch_holder_27")
	:addTorch()
spawn("temple_pit", 24,9,1, "temple_pit_25")
spawn("temple_pit", 28,9,0, "temple_pit_29")
spawn("altar", 20,16,0, "altar_6")
	:addItem(spawn("essence_earth"))
spawn("daemon_head", 22,3,2, "daemon_head_21")
spawn("spawner", 22,3,0, "spawner_10")
	:setSpawnedEntity("lightning_bolt")
	:setCoolDown(0)
spawn("daemon_head", 21,15,1, "daemon_head_22")
spawn("spawner", 21,15,3, "spawner_11")
	:setSpawnedEntity("poison_bolt")
	:setCoolDown(0)
spawn("daemon_head", 19,15,0, "daemon_head_23")
spawn("spawner", 19,15,2, "spawner_12")
	:setSpawnedEntity("poison_bolt")
	:setCoolDown(0)
spawn("daemon_head", 19,17,3, "daemon_head_24")
spawn("spawner", 19,17,1, "spawner_13")
	:setSpawnedEntity("poison_bolt")
	:setCoolDown(0)
spawn("temple_stairs_up", 22,13,1, "temple_stairs_up_28")
spawn("temple_stairs_up", 28,13,3, "temple_stairs_up_29")
spawn("daemon_head", 21,17,2, "daemon_head_25")
spawn("spawner", 21,17,0, "spawner_14")
	:setSpawnedEntity("poison_bolt")
	:setCoolDown(0)
spawn("daemon_head", 25,13,3, "daemon_head_26")
spawn("spawner", 25,13,1, "spawner_15")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("daemon_head", 25,11,3, "daemon_head_27")
spawn("spawner", 25,11,1, "spawner_16")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("daemon_head", 25,12,3, "daemon_head_28")
spawn("spawner", 25,12,1, "spawner_17")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("daemon_head", 25,14,3, "daemon_head_29")
spawn("spawner", 25,14,1, "spawner_18")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("daemon_head", 25,16,1, "daemon_head_30")
spawn("spawner", 25,16,3, "spawner_19")
	:setSpawnedEntity("poison_cloud")
	:setCoolDown(0)
spawn("temple_door_portcullis", 24,16,1, "temple_door_portcullis_43")
	:setDoorState("open")
spawn("temple_pressure_plate", 25,16,2, "temple_pressure_plate_24")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "temple_door_portcullis_43", "close")
	:addConnector("activate", "spawner_19", "activate")
	:addConnector("activate", "spawner_8", "activate")
	:addConnector("activate", "spawner_18", "activate")
	:addConnector("activate", "spawner_15", "activate")
	:addConnector("activate", "spawner_17", "activate")
	:addConnector("activate", "spawner_16", "activate")
spawn("temple_door_portcullis", 26,11,3, "temple_door_portcullis_46")
spawn("lever", 25,12,1, "lever_9")
	:addConnector("any", "temple_door_portcullis_46", "toggle")
spawn("temple_wall_text_long", 24,16,0, "temple_wall_text_long_7")
	:setWallText("Earth Elemental Research Archives\
\
Danger - Do Not Enter")
spawn("timer", 22,15,2, "timer_20")
	:setTimerInterval(1)
	:addConnector("activate", "script_entity_20", "dainEarthShrineBolts")
spawn("script_entity", 22,14,2, "script_entity_20")
	:setSource("dainEarthShrineCtr = 0\
\
function dainEarthShrineBolts()\
\9dainEarthShrineCtr = dainEarthShrineCtr + 1\
\9if dainEarthShrineCtr == 1 then\
\9\9spawner_11:activate()\
\9\9spawner_13:activate()\
\9elseif dainEarthShrineCtr == 2 then\
\9\9spawner_12:activate()\
\9\9spawner_14:activate()\
\9elseif dainEarthShrineCtr == 3 then\
\9\9spawner_11:activate()\
\9\9spawner_13:activate()\
\9elseif dainEarthShrineCtr == 4 then\
\9\9spawner_12:activate()\
\9\9spawner_14:activate()\
\9\9dainEarthShrineCtr = 0\
\9end\
end")
spawn("pressure_plate_hidden", 28,13,1, "pressure_plate_hidden_45")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsEarthLab4Tome")
spawn("temple_mosaic_wall_dain_2", 20,14,3, "temple_mosaic_wall_dain_2_13")
spawn("temple_pit", 25,10,0, "temple_pit_30")
spawn("temple_stairs_up", 31,19,2, "temple_stairs_up_33")
spawn("temple_pit", 29,10,0, "temple_pit_31")
spawn("temple_stairs_down", 29,17,0, "temple_stairs_down_27")
spawn("altar", 28,3,0, "altar_7")
	:addItem(spawn("essence_fire"))
spawn("temple_secret_door", 30,18,1, "temple_secret_door_56")
spawn("temple_secret_door", 26,18,1, "temple_secret_door_57")
spawn("temple_secret_door", 28,18,3, "temple_secret_door_58")
spawn("blocker", 29,18,1, "blocker_6")
spawn("scavenger_swarm", 28,18,3, "scavenger_swarm_2")
	:setAIState("guard")
	:setLevel(3)
spawn("temple_pressure_plate", 27,18,0, "temple_pressure_plate_25")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:addConnector("activate", "timer_16", "activate")
	:addConnector("activate", "temple_door_portcullis_38", "close")
spawn("temple_door_portcullis", 27,18,0, "temple_door_portcullis_38")
	:setDoorState("open")
spawn("temple_wall_text_long", 30,15,0, "temple_wall_text_long_8")
	:setWallText("Fire Elemental Research Archives\
\
Danger - Do Not Enter")
spawn("temple_secret_door", 30,15,3, "temple_secret_door_60")
	:setDoorState("open")
spawn("temple_secret_door", 31,15,3, "temple_secret_door_61")
	:setDoorState("open")
spawn("timer", 27,19,1, "timer_16")
	:setTimerInterval(20)
	:addConnector("activate", "temple_secret_door_57", "open")
	:addConnector("activate", "timer_16", "deactivate")
	:addConnector("activate", "timer_22", "activate")
	:addConnector("activate", "temple_secret_door_72", "open")
spawn("timer", 28,19,1, "timer_22")
	:setTimerInterval(10)
	:addConnector("activate", "temple_secret_door_58", "open")
	:addConnector("activate", "timer_22", "deactivate")
	:addConnector("activate", "temple_secret_door_56", "open")
spawn("pressure_plate_hidden", 27,16,3, "pressure_plate_hidden_41")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "script_entity_22", "switchWalls")
spawn("script_entity", 28,16,2, "script_entity_22")
	:setSource("function switchWalls()\
\9temple_secret_door_60:setDoorState(\"closed\")\
\9temple_secret_door_61:setDoorState(\"closed\")\
end\
")
spawn("spawner", 27,4,1, "spawner_23")
	:setSpawnedEntity("fireball")
	:setCoolDown(0)
spawn("daemon_head", 27,4,3, "daemon_head_34")
spawn("daemon_head", 29,4,1, "daemon_head_20")
spawn("spawner", 29,4,3, "spawner_5")
	:setSpawnedEntity("fireball")
	:setCoolDown(0)
spawn("spawner", 29,2,3, "spawner_20")
	:setSpawnedEntity("fireball")
	:setCoolDown(0)
spawn("daemon_head", 29,2,1, "daemon_head_31")
spawn("spawner", 27,2,1, "spawner_21")
	:setSpawnedEntity("fireball")
	:setCoolDown(0)
spawn("daemon_head", 27,2,3, "daemon_head_32")
spawn("timer", 30,3,2, "timer_23")
	:setTimerInterval(2)
	:addConnector("activate", "spawner_23", "activate")
	:addConnector("activate", "spawner_21", "activate")
	:addConnector("activate", "timer_24", "activate")
	:addConnector("activate", "timer_23", "deactivate")
spawn("timer", 30,2,2, "timer_24")
	:setTimerInterval(2)
	:addConnector("activate", "spawner_5", "activate")
	:addConnector("activate", "spawner_20", "activate")
	:addConnector("activate", "timer_23", "activate")
	:addConnector("activate", "timer_24", "deactivate")
spawn("temple_alcove", 29,9,0, "temple_alcove_59")
	:addItem(spawn("fire_bomb"))
	:addItem(spawn("fire_bomb"))
spawn("torch_holder", 31,14,1, "torch_holder_41")
	:addTorch()
spawn("torch_holder", 29,10,3, "torch_holder_42")
	:addTorch()
spawn("pressure_plate_hidden", 30,6,1, "pressure_plate_hidden_49")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_23", "activate")
spawn("pressure_plate_hidden", 31,6,1, "pressure_plate_hidden_50")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_23", "deactivate")
	:addConnector("activate", "timer_24", "deactivate")
spawn("temple_alcove", 27,18,2, "temple_alcove_61")
spawn("script_entity", 26,19,2, "script_entity_24")
	:setSource("local message = spawn(\"scroll\")\
message:setScrollText(\"Trapped?\")\
\
temple_alcove_61:addItem(message)")
spawn("temple_secret_door", 31,6,0, "temple_secret_door_59")
spawn("temple_secret_button_small", 31,8,3, "temple_secret_button_small_6")
	:addConnector("toggle", "temple_secret_door_59", "open")
spawn("temple_alcove", 31,1,0, "temple_alcove_60")
	:addItem(spawn("fire_blade"))
spawn("uggardian", 31,1,2, "uggardian_1")
	:setAIState("guard")
	:setLevel(4)
spawn("pressure_plate_hidden", 22,13,0, "pressure_plate_hidden_44")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_20", "activate")
	:addConnector("activate", "hs_level_8", "hsEarthLab4")
spawn("pressure_plate_hidden", 24,16,3, "pressure_plate_hidden_48")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "script_entity_23", "openDoor")
	:addConnector("activate", "hs_level_8", "hsEarthLab4Tome")
spawn("script_entity", 24,15,2, "script_entity_23")
	:setSource("function openDoor()\
\9if temple_door_portcullis_45:isClosed() then\
\9\9temple_door_portcullis_43:open()\
\9end\
end")
spawn("temple_mosaic_wall_dain_2", 27,3,3, "temple_mosaic_wall_dain_2_15")
spawn("temple_mosaic_wall_dain_2", 29,3,1, "temple_mosaic_wall_dain_2_12")
spawn("temple_stairs_down", 13,14,1, "temple_stairs_down_32")
spawn("secret", 30,5,1, "secret_12")
spawn("temple_door_metal", 31,2,0, "temple_door_metal_12")
	:addPullChain()
spawn("torch_holder", 23,5,1, "torch_holder_34")
	:addTorch()
spawn("torch_holder", 28,6,3, "torch_holder_50")
	:addTorch()
spawn("torch_holder", 22,16,0, "torch_holder_51")
	:addTorch()
spawn("temple_mosaic_wall_dain_2", 20,14,1, "temple_mosaic_wall_dain_2_16")
spawn("temple_goromorg_statue", 20,17,2, "temple_goromorg_statue_12")
spawn("temple_goromorg_statue", 23,1,0, "temple_goromorg_statue_13")
spawn("temple_goromorg_statue", 28,2,0, "temple_goromorg_statue_14")
spawn("scavenger_swarm", 26,18,1, "scavenger_swarm_1")
	:setAIState("guard")
	:setLevel(3)
spawn("temple_stairs_up", 19,20,2, "temple_stairs_up_35")
spawn("temple_floor_dain_02", 23,4,1, "temple_floor_dain_02_11")
spawn("temple_floor_dain_02", 28,5,3, "temple_floor_dain_02_14")
spawn("temple_floor_dain_02", 20,14,2, "temple_floor_dain_02_15")
spawn("temple_floor_dain_02", 31,1,0, "temple_floor_dain_02_16")
spawn("temple_pit", 23,19,2, "temple_pit_34")
spawn("temple_pit", 24,18,2, "temple_pit_32")
spawn("temple_secret_door", 24,18,1, "temple_secret_door_72")
spawn("torch_holder", 24,22,2, "torch_holder_60")
	:addTorch()
spawn("temple_door_portcullis", 7,3,3, "temple_door_portcullis_60")
	:addPullChain()
spawn("ogre", 3,11,0, "ogre_1")
spawn("rusted_helm", 5,10,1, "rusted_helm_3")
spawn("rusted_greaves", 2,2,3, "rusted_greaves_3")
spawn("rusted_arrow", 2,2,0, "rusted_arrow_5")
spawn("skeleton_remains", 3,11,2, "skeleton_remains_4")
spawn("temple_alcove", 2,8,0, "temple_alcove_25")
spawn("torch_holder", 6,4,1, "torch_holder_62")
	:addTorch()
spawn("rat_shank", 5,8,1, "rat_shank_5")
spawn("pitroot_bread", 1,4,2, "pitroot_bread_3")
spawn("ogre", 1,2,1, "ogre_3")
spawn("throwing_axe", 1,9,2, "throwing_axe_3")
spawn("temple_alcove", 9,6,1, "temple_alcove_68")
	:addItem(spawn("ring_greaves"))
spawn("quarrel", 10,10,1, "quarrel_3")
spawn("quarrel", 10,10,1, "quarrel_4")
spawn("temple_door_portcullis", 7,9,3, "temple_door_portcullis_61")
	:addPullChain()
	:setDoorState("open")
spawn("ogre", 10,11,3, "ogre_4")
spawn("script_entity", 18,13,2, "hs_level_8")
	:setSource("function hsAirLab4()\
\9helpScript:setHintScroll()\
end\
\
function hsAirLab4Tel()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Air Laboratory, Level 4\
\9\
\9There is only a teleporter here to the level above.\
\9]])\
end\
\
function hsEarthLab4()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Earth Laboratory, Level 4\
\9\
\9The essence of Earth rests on its altar on this level.\
\9]])\
end\
\
function hsEarthLab4Tome()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Earth Laboratory Archives\
\9\
\9A Tome of Earth can be found in the archives, but it is guarded by a deadly\
\9poison trap. Running will only lead you to fall into a pit or to more\
\9poison clouds. Wait until the air is clean to examine the corridor.\
\9You might have to wait until you are more powerful before accessing this area.\
\9]])\
end\
\
function hsFireLab4()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory, Level 4\
\9\
\9The essence of Fire rests on its altar on this level.\
\9\
\9A secret room is concealed in the corridors - the Fire Blade is contained\
\9within, along with its guardian.\
\9]])\
end\
\
function hsFireLab4Tome()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory Archives\
\9\
\9A Tome of Fire can be found in the archives, but beware - thieves entering\
\9in the corridor will be trapped and, after some time, killed by scavengers.\
\9You might have to wait until you are more powerful before accessing\
\9this area.\
\9]])\
end\
\
function hsIceLab4()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Ice Laboratory, Level 4\
\9\
\9The essence of Ice rests on its altar on this level.\
\9\
\9A secret room is concealed in the corridors - the Fire Blade is contained\
\9within, along with its guardian.\
\9]])\
end\
\
function hsIceLab4Tel()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Ice Laboratory, Level 4\
\9\
\9There is only a teleporter here to the level above.\
\9]])\
end\
\
function hsRosT4Darkness()\
\9helpScript:setHintScroll()\
end")
spawn("temple_pressure_plate", 18,9,0, "temple_pressure_plate_27")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_18", "toggle")
spawn("temple_door_metal", 18,9,3, "temple_door_metal_18")
spawn("rock", 7,7,3, "rock_15")
spawn("temple_pit", 19,23,2, "temple_pit_36")
spawn("temple_pit", 19,24,0, "temple_pit_37")
spawn("temple_mosaic_wall_dain_2", 26,22,0, "temple_mosaic_wall_dain_2_20")
spawn("temple_mosaic_wall_dain_2", 26,22,2, "temple_mosaic_wall_dain_2_18")
spawn("temple_floor_dain_02", 26,22,3, "temple_floor_dain_02_18")
spawn("altar", 28,22,1, "altar_8")
	:addItem(spawn("essence_ice"))
spawn("temple_goromorg_statue", 29,22,1, "temple_goromorg_statue_16")
spawn("daemon_head", 29,21,1, "daemon_head_42")
spawn("spawner", 29,21,3, "spawner_42")
	:setSpawnedEntity("froststrike")
	:setCoolDown(0)
spawn("daemon_head", 29,23,2, "daemon_head_37")
spawn("spawner", 29,23,0, "spawner_37")
	:setSpawnedEntity("froststrike")
	:setCoolDown(0)
spawn("daemon_head", 27,21,0, "daemon_head_39")
spawn("spawner", 27,21,2, "spawner_39")
	:setSpawnedEntity("froststrike")
	:setCoolDown(0)
spawn("daemon_head", 27,23,3, "daemon_head_40")
spawn("spawner", 27,23,1, "spawner_40")
	:setSpawnedEntity("froststrike")
	:setCoolDown(0)
spawn("timer", 26,21,2, "timer_30")
	:setTimerInterval(1)
	:addConnector("activate", "script_entity_33", "dainIceShrineBolts")
spawn("script_entity", 26,20,2, "script_entity_33")
	:setSource("dainIceShrineCtr = 0\
\
function dainIceShrineBolts()\
\9dainIceShrineCtr = dainIceShrineCtr + 1\
\9if dainIceShrineCtr == 1 then\
\9\9spawner_39:activate()\
\9elseif dainsIceShrineCtr == 2 then\
\9\9spawner_37:activate()\
\9elseif dainIceShrineCtr == 3 then\
\9\9spawner_11:activate()\
\9\9spawner_13:activate()\
\9elseif dainIceShrineCtr == 4 then\
\9\9spawner_12:activate()\
\9\9spawner_14:activate()\
\9\9dainIceShrineCtr = 0\
\9end\
end")
spawn("teleporter", 19,25,0, "teleporter_38")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(19,25,0,7)
spawn("spawner", 18,25,0, "spawner_43")
	:setSpawnedEntity("frostbolt")
	:setCoolDown(0)
spawn("daemon_head", 18,25,2, "daemon_head_43")
spawn("temple_alcove", 20,25,1, "temple_alcove_71")
	:addItem(spawn("frostbite_necklace_lesser"))
spawn("skeleton_archer_patrol", 20,25,0, "skeleton_archer_patrol_2")
	:setAIState("guard")
spawn("temple_pressure_plate", 18,23,1, "temple_pressure_plate_29")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "spawner_43", "activate")
	:addConnector("activate", "hs_level_8", "hsIceLab4Tel")
spawn("temple_pressure_plate", 18,24,2, "temple_pressure_plate_31")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:addConnector("activate", "spawner_43", "activate")
	:addConnector("activate", "hs_level_8", "hsIceLab4Tel")
spawn("torch_holder", 21,23,1, "torch_holder_64")
	:addTorch()
spawn("blocker", 19,25,3, "blocker_13")
spawn("temple_mosaic_wall_dain_1", 28,5,3, "temple_mosaic_wall_dain_1_10")
spawn("temple_mosaic_wall_dain_1", 28,5,1, "temple_mosaic_wall_dain_1_12")
spawn("temple_mosaic_wall_dain_1", 28,21,0, "temple_mosaic_wall_dain_1_13")
spawn("temple_mosaic_wall_dain_1", 28,23,2, "temple_mosaic_wall_dain_1_14")
spawn("temple_mosaic_wall_dain_1", 23,4,3, "temple_mosaic_wall_dain_1_15")
spawn("temple_mosaic_wall_dain_1", 23,4,1, "temple_mosaic_wall_dain_1_16")
spawn("temple_wall_text_long", 30,18,0, "temple_wall_text_long_11")
	:setWallText("Fire Elemental Research Archives\
")
spawn("temple_alcove", 13,7,0, "temple_alcove_76")
spawn("temple_alcove", 12,7,0, "temple_alcove_74")
spawn("temple_pressure_plate", 25,11,2, "temple_pressure_plate_33")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("activate", "spawner_19", "activate")
	:addConnector("activate", "spawner_8", "activate")
	:addConnector("activate", "spawner_18", "activate")
	:addConnector("activate", "spawner_15", "activate")
	:addConnector("activate", "spawner_17", "activate")
	:addConnector("activate", "spawner_16", "activate")
spawn("pressure_plate_hidden", 23,16,2, "pressure_plate_hidden_135")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsEarthLab4")
spawn("pressure_plate_hidden", 24,8,2, "pressure_plate_hidden_136")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 24,7,2, "pressure_plate_hidden_137")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 24,6,2, "pressure_plate_hidden_138")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 26,6,2, "pressure_plate_hidden_139")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 26,7,2, "pressure_plate_hidden_140")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 26,8,2, "pressure_plate_hidden_141")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("pressure_plate_hidden", 26,9,2, "pressure_plate_hidden_142")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsAirLab4Tel")
spawn("temple_pressure_plate", 12,14,1, "temple_pressure_plate_34")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:addConnector("any", "temple_door_metal_20", "toggle")
spawn("temple_door_metal", 12,14,0, "temple_door_metal_20")
spawn("temple_stairs_up", 3,14,3, "temple_stairs_up_38")
spawn("temple_mosaic_wall_ros_1", 15,11,3, "temple_mosaic_wall_ros_1_5")
spawn("temple_floor_ros_02", 15,12,3, "temple_floor_ros_02_1")
spawn("pressure_plate_hidden", 31,18,2, "pressure_plate_hidden_152")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4")
spawn("pressure_plate_hidden", 31,15,2, "pressure_plate_hidden_153")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4")
spawn("pressure_plate_hidden", 31,19,2, "pressure_plate_hidden_154")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4")
spawn("pressure_plate_hidden", 30,15,2, "pressure_plate_hidden_118")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4Tome")
spawn("pressure_plate_hidden", 30,18,2, "pressure_plate_hidden_155")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4Tome")
spawn("pressure_plate_hidden", 29,17,2, "pressure_plate_hidden_156")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_8", "hsFireLab4Tome")
spawn("temple_stairs_up", 1,27,0, "temple_stairs_up_40")
spawn("temple_stairs_up", 8,23,2, "temple_stairs_up_41")
spawn("temple_stairs_up", 17,31,3, "temple_stairs_up_45")
spawn("temple_pillar", 11,26,3, "temple_pillar_82")
spawn("temple_pillar", 11,29,3, "temple_pillar_83")
spawn("temple_pillar", 14,29,3, "temple_pillar_84")
spawn("temple_pillar", 14,26,1, "temple_pillar_85")
spawn("torch_holder", 7,20,2, "torch_holder_84")
	:addTorch()
spawn("temple_pit", 10,19,2, "temple_pit_58")
spawn("temple_pit", 9,17,2, "temple_pit_60")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 7,17,2, "temple_pit_62")
spawn("temple_pit", 8,19,0, "temple_pit_63")
spawn("temple_pit", 11,17,2, "temple_pit_64")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 6,20,0, "temple_pit_61")
spawn("temple_pit", 7,22,2, "temple_pit_65")
	:addTrapDoor()
	:setPitState("open")
spawn("temple_pit", 11,21,0, "temple_pit_66")
spawn("temple_secret_door", 9,21,0, "temple_secret_door_100")
spawn("temple_secret_door", 10,21,3, "temple_secret_door_101")
spawn("temple_pillar", 10,21,2, "temple_pillar_97")
spawn("temple_alcove", 9,17,2, "temple_alcove_28")
	:addItem(spawn("brass_key"))
spawn("temple_secret_door", 7,16,0, "temple_secret_door_102")
spawn("temple_secret_door", 9,16,0, "temple_secret_door_103")
spawn("temple_secret_door", 11,15,2, "temple_secret_door_104")
spawn("scavenger_swarm", 7,15,2, "scavenger_swarm_3")
spawn("scavenger_swarm", 9,15,2, "scavenger_swarm_4")
spawn("scavenger_swarm", 11,15,2, "scavenger_swarm_5")
spawn("scavenger_swarm", 9,21,0, "scavenger_swarm_6")
spawn("torch_holder", 11,17,1, "torch_holder_87")
	:addTorch()
spawn("temple_wall_text_long", 8,18,1, "temple_wall_text_long_16")
	:setWallText("Fourth teaching of Zaros\
\
In darkness and shadows shall\
the Rogue find the means to his end.")
spawn("temple_pit", 6,18,2, "temple_pit_68")
spawn("herder_swarm", 1,17,2, "herder_swarm_2")
	:setLevel(3)
spawn("herder_swarm", 9,20,3, "herder_swarm_3")
	:setLevel(3)
spawn("timer", 6,17,3, "timer_38")
	:setTimerInterval(1)
	:activate()
	:addConnector("activate", "ros_fourthTeachingScript", "checkLight")
	:addConnector("activate", "ros_fourthTeachingScript", "checkPlates")
spawn("script_entity", 5,17,0, "ros_fourthTeachingScript")
	:setSource("function checkLight()\
\9if coreScript.lightState() == false \
\9  and torch_holder_84:hasTorch() == false \
\9  and torch_holder_87:hasTorch() == false then\
\9 \9temple_secret_door_100:open()\
\9\9temple_secret_door_101:open()\
\9\9temple_secret_door_102:open()\
\9\9temple_secret_door_103:open()\
\9\9temple_secret_door_104:open()\
\9\9temple_pit_65:close()\
\9else\
\9 \9temple_secret_door_100:close()\
\9\9temple_secret_door_101:close()\
\9\9temple_secret_door_102:close()\
\9\9temple_secret_door_103:close()\
\9\9temple_secret_door_104:close()\
\9\9temple_pit_65:open()\
\9end\9\
end\
\
function checkPlates()\
\9if temple_pressure_plate_46:isDown() and\
\9\9\9temple_pressure_plate_48:isDown() and\
\9\9\9temple_pressure_plate_49:isDown() and\
\9\9\9temple_pressure_plate_50:isDown() and\
\9\9\9coreScript.lightState() == false and\
\9  \9\9torch_holder_84:hasTorch() == false and\
\9  \9\9torch_holder_87:hasTorch() == false then\
\9\9temple_pit_60:close()\
\9else\
\9\9temple_pit_60:open()\
\9end\
end")
spawn("temple_secret_button_large", 10,21,2, "temple_secret_button_large_16")
	:addConnector("toggle", "temple_pit_64", "toggle")
spawn("temple_catacomb_empty", 5,20,3, "temple_catacomb_empty_6")
spawn("temple_catacomb_empty", 2,16,0, "temple_catacomb_empty_9")
spawn("temple_catacomb_empty", 1,21,3, "temple_catacomb_empty_11")
spawn("quarrel", 0,19,2, "quarrel_5")
spawn("quarrel", 0,19,2, "quarrel_6")
spawn("throwing_knife", 6,16,0, "throwing_knife_6")
spawn("temple_secret_door", 1,16,0, "temple_secret_door_105")
spawn("temple_pillar", 6,26,3, "temple_pillar_102")
spawn("temple_pillar", 6,29,3, "temple_pillar_98")
spawn("temple_pillar", 9,29,3, "temple_pillar_99")
spawn("temple_pillar", 9,26,1, "temple_pillar_100")
spawn("pressure_plate_hidden", 16,19,3, "pressure_plate_hidden_187")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_1", "activate")
spawn("pressure_plate_hidden", 31,5,2, "pressure_plate_hidden_190")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_12", "activate")
spawn("temple_stairs_down", 6,23,2, "temple_stairs_down_47")
spawn("altar", 5,27,3, "altar_9")
spawn("goromorg_fourway", 7,27,1, "goromorg_fourway_1")
spawn("goromorg_fourway", 12,27,1, "goromorg_fourway_2")
spawn("torch_holder", 7,25,0, "torch_holder_82")
	:addTorch()
spawn("torch_holder", 7,29,2, "torch_holder_85")
	:addTorch()
spawn("torch_holder", 12,29,2, "torch_holder_86")
	:addTorch()
spawn("cave_nettle", 3,21,0, "cave_nettle_9")
spawn("cave_nettle", 1,13,0, "cave_nettle_10")
spawn("cave_nettle", 1,13,0, "cave_nettle_11")
spawn("temple_alcove", 1,13,3, "temple_alcove_30")
	:addItem(spawn("shuriken"))
	:addItem(spawn("shuriken"))
spawn("temple_secret_button_small", 7,15,3, "temple_secret_button_small_13")
	:addConnector("toggle", "temple_secret_door_105", "toggle")
spawn("secret", 1,15,1, "secret_18")
spawn("temple_catacomb_empty", 4,16,2, "temple_catacomb_empty_12")
spawn("temple_catacomb_empty", 5,18,3, "temple_catacomb_empty_13")
spawn("temple_catacomb_empty", 8,16,0, "temple_catacomb_empty_14")
spawn("temple_catacomb_empty", 11,19,1, "temple_catacomb_empty_15")
spawn("wooden_box", 13,10,1, "wooden_box_1")
	:addItem(spawn("knoffer"))	:addItem(spawn("snail_slice"))	:addItem(spawn("rat_shank"))spawn("pressure_plate_hidden", 19,20,0, "pressure_plate_hidden_225")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "timer_30", "activate")
	:addConnector("activate", "hs_level_8", "hsIceLab4")
spawn("shuriken", 25,7,0, "shuriken_1")
spawn("zone_marker", 8,5,1, "zone_marker_13")
	:setSource("zone = \"ku_lowerChambers\"")
spawn("zone_marker", 11,3,1, "zone_marker_22")
	:setSource("zone = \"ku_lowerChambers\"")
spawn("zone_marker", 7,3,1, "zone_marker_23")
	:setSource("zone = \"ku_lowerChambers\"")
spawn("zone_marker", 6,3,1, "zone_marker_24")
	:setSource("zone = \"ku_lowerChambers.ogreLair\"")
spawn("zone_marker", 16,4,1, "zone_marker_25")
	:setSource("zone = \"ku_lowerChambers\"")
spawn("zone_marker", 18,5,1, "zone_marker_26")
	:setSource("zone = \"ku_crossroads\"")
spawn("zone_marker", 1,27,0, "zone_marker_27")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("zone_marker", 6,23,0, "zone_marker_64")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("zone_marker", 8,23,0, "zone_marker_65")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("temple_pressure_plate", 9,21,3, "temple_pressure_plate_46")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:addConnector("activate", "ros_fourthTeachingScript", "checkPlates")
spawn("temple_pressure_plate", 11,15,3, "temple_pressure_plate_48")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:addConnector("activate", "ros_fourthTeachingScript", "checkPlates")
spawn("temple_pressure_plate", 9,15,3, "temple_pressure_plate_49")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:addConnector("activate", "ros_fourthTeachingScript", "checkPlates")
spawn("temple_pressure_plate", 7,15,3, "temple_pressure_plate_50")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:addConnector("activate", "ros_fourthTeachingScript", "checkPlates")
spawn("zone_marker", 3,26,0, "zone_marker_77")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("zone_marker", 3,27,0, "zone_marker_78")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("zone_marker", 3,28,0, "zone_marker_79")
	:setSource("zone = \"ros_fourthTeaching\"")
spawn("zone_marker", 4,12,3, "zone_marker_80")
	:setSource("zone = \"ros_crossroads\"")
spawn("zone_marker", 12,14,3, "zone_marker_81")
	:setSource("zone = \"ros_crossroads\"")
spawn("script_entity", 24,4,1, "dain_airLab_4Script")
	:setSource("tick = 0\
\
function shrine()\
\9if coreScript.zone == \"dain_airLab_4\" then\
\9\9tick = (tick+1)%3\
\9\9if tick == 0 then\
\9\9\9spawner_6:activate()\
\9\9\9spawner_10:activate()\
\9\9elseif tick == 1 then\
\9\9\9spawner_7:activate()\
\9\9\9spawner_9:activate()\9\9\
\9\9end\
\9end\
end")
spawn("zone_marker", 23,11,1, "zone_marker_123")
	:setSource("zone = \"dain_airLab_4\"")
spawn("zone_marker", 20,9,1, "zone_marker_124")
	:setSource("zone = \"dain_crossroads\"")

--- level 9 ---

mapName("The Cavern")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
############..##################
######.#..#....#################
###..#.#.###..##.###############
#......#.#....#..#.#############
#.#..##.........#..##..#########
#....#..#....####...#..#..######
##.................###..#.######
#..#...........#...#..#....#.###
..#...#....#..###..##.........##
....#.....#..#..#..##.......#.##
###.......#.....#.#...#.......##
####..##.#...#..........#.##..##
#...........#...#....#....##.###
#..##...#....##.#.#...#.......##
#....#.#........#.#........##.##
.....##...#....#....###.#..##.##
....##..#.....##.....##....#####
#.#.###....#.........##..##.####
#...#..............#.........###
#####.#.....##..###....#########
##....#..#..##..#.#..###########
##.#.#.#.##..#........##########
##.#...#.##.......#.#.##########
#...######....#....#.###########
#...###########.###....#########
#...##################.#########
#...############################
################################
################################
################################
]])
spawn("temple_stairs_up", 16,4,0, "temple_stairs_up_13")
spawn("teleporter", 11,3,1, "teleporter_2")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(11,3,1,8)
	:setChangeFacing(false)
spawn("crab", 6,16,0, "crab_1")
spawn("crab", 13,10,0, "crab_2")
spawn("crab", 3,4,2, "crab_3")
spawn("temple_wall_grating", 8,14,1, "temple_wall_grating_6")
spawn("temple_wall_grating", 12,11,0, "temple_wall_grating_8")
spawn("temple_wall_grating", 12,4,2, "temple_wall_grating_10")
spawn("temple_wall_grating", 13,5,0, "temple_wall_grating_12")
spawn("temple_pillar", 13,5,2, "temple_pillar_9")
spawn("arrow", 7,15,1, "arrow_1")
spawn("arrow", 7,15,2, "arrow_2")
spawn("arrow", 7,15,1, "arrow_3")
spawn("baked_maggot", 3,12,3, "baked_maggot_2")
spawn("baked_maggot", 6,7,0, "baked_maggot_3")
spawn("sandals", 1,5,0, "sandals_2")
spawn("peasant_cap", 10,10,1, "peasant_cap_1")
spawn("temple_secret_button_large", 10,5,0, "temple_secret_button_large_1")
	:addConnector("toggle", "temple_secret_door_9", "toggle")
spawn("temple_secret_door", 8,6,0, "temple_secret_door_9")
spawn("temple_secret_button_small", 4,7,1, "temple_secret_button_small_2")
	:addConnector("toggle", "temple_secret_door_10", "toggle")
spawn("temple_secret_door", 2,9,0, "temple_secret_door_10")
spawn("crab", 0,11,1, "crab_4")
spawn("boiled_beetle", 0,10,0, "boiled_beetle_1")
spawn("boiled_beetle", 4,4,0, "boiled_beetle_2")
spawn("secret", 1,10,0, "secret_2")
spawn("secret", 8,5,0, "secret_3")
spawn("skull", 12,10,2, "skull_1")
spawn("rock", 4,6,0, "rock_3")
spawn("rock", 9,12,1, "rock_4")
spawn("temple_pillar", 12,8,0, "temple_pillar_10")
spawn("temple_pillar", 9,11,2, "temple_pillar_11")
spawn("temple_pillar", 8,9,1, "temple_pillar_12")
spawn("temple_pillar", 4,5,1, "temple_pillar_13")
spawn("spider_eggs", 2,18,0, "spider_eggs_1")
spawn("spider_eggs", 4,16,3, "spider_eggs_2")
spawn("spider", 3,20,0, "spider_1")
spawn("spider", 0,17,1, "spider_2")
spawn("spider", 4,17,3, "spider_3")
spawn("temple_stairs_up", 18,5,0, "temple_stairs_up_15")
spawn("temple_pillar", 18,9,0, "temple_pillar_15")
spawn("baked_maggot", 18,11,2, "baked_maggot_6")
spawn("crab", 14,3,3, "crab_6")
	:setAIState("guard")
spawn("rusted_arrow", 9,7,1, "rusted_arrow_1")
spawn("rusted_arrow", 19,7,0, "rusted_arrow_2")
spawn("rusted_arrow", 8,13,3, "rusted_arrow_3")
spawn("rusted_gauntlets", 1,19,1, "rusted_gauntlets_1")
spawn("rusted_greaves", 1,20,3, "rusted_greaves_1")
spawn("skeleton_remains", 1,19,3, "skeleton_remains_2")
spawn("temple_alcove", 6,3,0, "temple_alcove_38")
	:addItem(spawn("iron_key"))
spawn("spider", 8,3,2, "spider_5")
spawn("crab", 18,11,3, "crab_7")
spawn("temple_wall_grating", 2,11,1, "temple_wall_grating_15")
spawn("cave_nettle", 4,17,1, "cave_nettle_2")
spawn("cave_nettle", 3,20,1, "cave_nettle_3")
spawn("tar_bead", 1,6,3, "tar_bead_5")
spawn("rock", 8,9,1, "rock_5")
spawn("rock", 5,12,2, "rock_6")
spawn("rock", 13,4,1, "rock_7")
spawn("rock", 17,10,2, "rock_8")
spawn("rusted_long_sword", 7,6,0, "rusted_long_sword_1")
spawn("leather_greaves", 9,3,1, "leather_greaves_1")
spawn("rat_shank", 9,3,1, "rat_shank_2")
spawn("temple_pillar", 3,18,2, "temple_pillar_22")
spawn("temple_stairs_up", 17,22,0, "temple_stairs_up_16")
spawn("temple_stairs_down", 17,26,2, "temple_stairs_down_15")
spawn("lock_ornate", 17,24,1, "lock_ornate_4")
	:setOpenedBy("")
	:addConnector("activate", "temple_door_ornament_4", "open")
spawn("temple_door_ornament", 17,24,2, "temple_door_ornament_7")
spawn("temple_wall_grating", 18,23,3, "temple_wall_grating_16")
spawn("temple_wall_grating", 18,25,3, "temple_wall_grating_17")
spawn("temple_wall_grating", 17,25,3, "temple_wall_grating_18")
spawn("temple_wall_grating", 16,23,1, "temple_wall_grating_19")
spawn("temple_wall_grating", 17,24,3, "temple_wall_grating_20")
spawn("temple_pillar", 17,24,0, "temple_pillar_19")
spawn("temple_pillar", 17,25,2, "temple_pillar_23")
spawn("long_sword", 1,19,2, "long_sword_1")
spawn("temple_stairs_up", 20,9,3, "temple_stairs_up_21")
spawn("pressure_plate_hidden", 21,9,1, "pressure_plate_hidden_29")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "crossroadsScript", "switchWallsToDain")
spawn("script_entity", 21,8,1, "script_entity_17")
	:setSource("")
spawn("temple_wall_grating", 19,16,2, "temple_wall_grating_31")
spawn("temple_wall_grating", 20,20,0, "temple_wall_grating_32")
spawn("temple_wall_grating", 17,14,1, "temple_wall_grating_34")
spawn("temple_door_portcullis", 28,9,2, "temple_door_portcullis_41")
spawn("temple_alcove", 28,9,0, "temple_alcove_56")
	:addItem(spawn("potion_speed"))
	:addItem(spawn("shock_arrow"))
	:addItem(spawn("shock_arrow"))
spawn("temple_secret_button_large", 28,9,1, "temple_secret_button_large_6")
	:addConnector("toggle", "temple_door_portcullis_41", "toggle")
spawn("secret", 28,9,1, "secret_10")
spawn("floor_dirt", 12,7,1, "floor_dirt_1")
spawn("floor_dirt", 9,9,1, "floor_dirt_2")
spawn("floor_corpse", 16,9,1, "floor_corpse_1")
spawn("floor_dirt", 7,12,0, "floor_dirt_3")
spawn("temple_alcove", 29,16,1, "temple_alcove_58")
	:addItem(spawn("tome_fire"))
spawn("temple_stairs_up", 29,17,2, "temple_stairs_up_25")
spawn("temple_wall_grating", 29,16,0, "temple_wall_grating_38")
spawn("tar_bead", 9,3,0, "tar_bead_9")
spawn("temple_stairs_up", 13,14,3, "temple_stairs_up_30")
spawn("temple_pillar", 23,11,0, "temple_pillar_62")
spawn("temple_pillar", 27,12,0, "temple_pillar_63")
spawn("temple_pillar", 25,15,0, "temple_pillar_64")
spawn("temple_pillar", 26,18,0, "temple_pillar_65")
spawn("temple_pillar", 20,14,0, "temple_pillar_66")
spawn("rock", 26,9,1, "rock_13")
spawn("rock", 24,16,2, "rock_14")
spawn("floor_dirt", 24,18,3, "floor_dirt_4")
spawn("floor_dirt", 19,15,2, "floor_dirt_5")
spawn("floor_dirt", 25,10,3, "floor_dirt_6")
spawn("pitroot_bread", 21,16,1, "pitroot_bread_2")
spawn("rotten_pitroot_bread", 23,9,2, "rotten_pitroot_bread_1")
spawn("cave_nettle", 24,9,0, "cave_nettle_4")
spawn("cave_nettle", 24,19,1, "cave_nettle_5")
spawn("slime_bell", 25,20,1, "slime_bell_4")
spawn("slime_bell", 29,13,1, "slime_bell_5")
spawn("rusted_helm", 21,15,0, "rusted_helm_2")
spawn("rusted_mace", 29,10,0, "rusted_mace_3")
spawn("rusted_greaves", 21,15,1, "rusted_greaves_2")
spawn("skeleton_remains", 21,15,1, "skeleton_remains_3")
spawn("tar_bead", 24,7,3, "tar_bead_11")
spawn("tar_bead", 24,7,2, "tar_bead_12")
spawn("temple_secret_door", 22,8,1, "temple_secret_door_63")
spawn("temple_secret_button_large", 25,13,1, "temple_secret_button_large_10")
	:addConnector("toggle", "temple_secret_door_63", "toggle")
spawn("secret", 22,9,1, "secret_13")
spawn("crab", 20,16,1, "crab_5")
spawn("crab", 26,15,2, "crab_8")
spawn("crab", 24,7,1, "crab_9")
spawn("scavenger", 18,14,0, "scavenger_2")
spawn("scavenger", 29,11,3, "scavenger_3")
spawn("scavenger", 25,20,3, "scavenger_4")
spawn("temple_secret_button_small", 23,19,3, "temple_secret_button_small_8")
	:addConnector("toggle", "temple_secret_door_64", "open")
spawn("temple_secret_door", 25,20,1, "temple_secret_door_64")
spawn("tar_bead", 21,6,0, "tar_bead_13")
spawn("throwing_knife", 22,6,1, "throwing_knife_4")
spawn("throwing_knife", 22,6,0, "throwing_knife_5")
spawn("cudgel", 21,15,3, "cudgel_1")
spawn("teleporter", 28,20,2, "teleporter_49")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(true)
	:setTeleportTarget(24,14,2,5)
spawn("temple_wall_text", 27,20,2, "temple_wall_text_17")
	:setWallText("To the shrines")
spawn("secret", 26,19,1, "secret_14")
spawn("crab", 21,7,1, "crab_11")
spawn("ring_mail", 2,11,3, "ring_mail_1")
spawn("temple_pillar", 18,14,2, "temple_pillar_68")
spawn("healing_crystal", 17,13,2, "healing_crystal_2")
spawn("temple_secret_door", 16,13,1, "temple_secret_door_65")
spawn("temple_secret_door", 17,13,0, "temple_secret_door_66")
spawn("temple_secret_door", 18,13,3, "temple_secret_door_67")
spawn("temple_secret_door", 17,14,0, "temple_secret_door_68")
spawn("temple_secret_button_large", 18,13,0, "temple_secret_button_large_11")
	:addConnector("toggle", "temple_secret_door_67", "toggle")
	:addConnector("toggle", "temple_secret_door_68", "toggle")
	:addConnector("toggle", "temple_secret_door_66", "toggle")
	:addConnector("toggle", "temple_secret_door_65", "toggle")
spawn("temple_pillar", 17,14,0, "temple_pillar_69")
spawn("temple_secret_button_large", 17,12,3, "temple_secret_button_large_13")
	:addConnector("toggle", "temple_secret_door_67", "toggle")
	:addConnector("toggle", "temple_secret_door_68", "toggle")
	:addConnector("toggle", "temple_secret_door_66", "toggle")
	:addConnector("toggle", "temple_secret_door_65", "toggle")
spawn("temple_secret_button_large", 16,13,0, "temple_secret_button_large_14")
	:addConnector("toggle", "temple_secret_door_67", "toggle")
	:addConnector("toggle", "temple_secret_door_68", "toggle")
	:addConnector("toggle", "temple_secret_door_66", "toggle")
	:addConnector("toggle", "temple_secret_door_65", "toggle")
spawn("temple_secret_button_large", 17,14,3, "temple_secret_button_large_15")
	:addConnector("toggle", "temple_secret_door_67", "toggle")
	:addConnector("toggle", "temple_secret_door_68", "toggle")
	:addConnector("toggle", "temple_secret_door_66", "toggle")
	:addConnector("toggle", "temple_secret_door_65", "toggle")
spawn("script_entity", 16,12,2, "hs_level_9")
	:setSource("function hsDainCavern()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, First Circle - The Cavern\
\9\
\9Vast open space, moist and dark, the Cavern is a cold place infested\
\9with vermin. It is wise not to linger here. Various supplies can \
\9be found in this area.\
\9\
\9A healing crystal is hidden in the middle where all paths join.\
\9\9\
\9This sector of the Cavern also conceals three secrets. Two can be found\
\9by inspecting walls, and one of these hides a teleporter to the Shrines.\
\9The third secret is access through a pit from above.\
\9\
\9The tome you see through a grating is accessed from above.\
\9]])\
end\
\
function hsFireLab5Tome()\
\9helpScript:setHintScroll([[\
\9The Way of Eldain, The First Circle - Fire Laboratory Archives\
\9\
\9You can find a Tome of Fire here.\
\9]])\
end")
spawn("pressure_plate_hidden", 28,9,3, "pressure_plate_hidden_72")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
spawn("pressure_plate_hidden", 29,10,3, "pressure_plate_hidden_77")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
spawn("pressure_plate_hidden", 25,10,3, "pressure_plate_hidden_78")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
spawn("pressure_plate_hidden", 24,9,3, "pressure_plate_hidden_79")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
spawn("pressure_plate_hidden", 23,9,3, "pressure_plate_hidden_80")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
spawn("pressure_plate_hidden", 23,19,3, "pressure_plate_hidden_81")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
	:addConnector("activate", "timer_30", "deactivate")
spawn("pressure_plate_hidden", 24,18,3, "pressure_plate_hidden_82")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
	:addConnector("activate", "timer_30", "deactivate")
spawn("pressure_plate_hidden", 19,23,3, "pressure_plate_hidden_84")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
	:addConnector("activate", "timer_30", "deactivate")
	:addConnector("activate", "timer_59", "deactivate")
spawn("pressure_plate_hidden", 19,24,3, "pressure_plate_hidden_85")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsDainCavern")
	:addConnector("activate", "timer_30", "deactivate")
spawn("pressure_plate_hidden", 29,17,3, "pressure_plate_hidden_157")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "hs_level_9", "hsFireLab5Tome")
spawn("temple_stairs_up", 6,23,0, "temple_stairs_up_46")
spawn("temple_wall_grating", 11,22,2, "temple_wall_grating_50")
spawn("temple_wall_grating", 14,19,3, "temple_wall_grating_54")
spawn("temple_wall_grating", 14,20,3, "temple_wall_grating_55")
spawn("temple_pillar", 14,20,1, "temple_pillar_101")
spawn("temple_alcove", 2,28,2, "temple_alcove_29")
	:addItem(spawn("tome_throwing_weapons"))
	:addConnector("deactivate", "temple_door_portcullis_74", "open")
	:addConnector("deactivate", "temple_door_portcullis_75", "open")
	:addConnector("deactivate", "temple_door_portcullis_76", "open")
	:addConnector("deactivate", "temple_door_portcullis_77", "open")
	:addConnector("deactivate", "temple_door_portcullis_81", "open")
	:addConnector("deactivate", "temple_door_portcullis_80", "open")
	:addConnector("deactivate", "temple_door_portcullis_79", "open")
	:addConnector("deactivate", "temple_door_portcullis_78", "open")
spawn("temple_pillar", 2,28,1, "temple_pillar_103")
spawn("temple_pillar", 2,27,0, "temple_pillar_104")
spawn("temple_pillar", 2,26,3, "temple_pillar_105")
spawn("temple_pillar", 3,26,2, "temple_pillar_106")
spawn("temple_pillar", 3,27,3, "temple_pillar_107")
spawn("temple_pillar", 3,28,1, "temple_pillar_108")
spawn("temple_door_portcullis", 2,28,3, "temple_door_portcullis_74")
spawn("temple_door_portcullis", 2,27,3, "temple_door_portcullis_75")
spawn("temple_door_portcullis", 2,26,3, "temple_door_portcullis_76")
spawn("temple_door_portcullis", 2,25,3, "temple_door_portcullis_77")
spawn("temple_door_portcullis", 2,25,1, "temple_door_portcullis_78")
spawn("temple_door_portcullis", 3,26,3, "temple_door_portcullis_79")
spawn("temple_door_portcullis", 3,27,3, "temple_door_portcullis_80")
spawn("temple_door_portcullis", 3,28,3, "temple_door_portcullis_81")
spawn("spider", 1,25,2, "spider_15")
spawn("spider", 3,28,3, "spider_16")
spawn("spider_great", 1,27,1, "spider_great_2")
spawn("spider_great", 3,26,3, "spider_great_4")
spawn("torch_holder", 1,27,3, "torch_holder_88")
	:addTorch()
spawn("daemon_head", 1,28,2, "daemon_head_47")
spawn("daemon_head", 3,28,2, "daemon_head_48")
spawn("spider_eggs", 9,21,0, "spider_eggs_3")
spawn("spider_eggs", 14,16,0, "spider_eggs_4")
spawn("spider_eggs", 10,13,0, "spider_eggs_5")
spawn("spider", 10,14,2, "spider_17")
spawn("spider", 12,13,3, "spider_18")
spawn("spider", 13,17,1, "spider_19")
spawn("spider", 11,22,3, "spider_20")
spawn("spider", 15,14,0, "spider_21")
spawn("scavenger", 6,18,1, "scavenger_1")
spawn("scavenger", 14,11,2, "scavenger_5")
spawn("scavenger_swarm", 4,24,1, "scavenger_swarm_7")
spawn("rusted_axe", 11,18,1, "rusted_axe_1")
spawn("rusted_gauntlets", 8,16,1, "rusted_gauntlets_3")
spawn("rusted_arrow", 13,12,0, "rusted_arrow_7")
spawn("rusted_arrow", 14,13,3, "rusted_arrow_8")
spawn("rock", 8,21,2, "rock_19")
spawn("rock", 7,22,1, "rock_20")
spawn("rock", 11,11,0, "rock_21")
spawn("temple_secret_door", 8,22,2, "temple_secret_door_106")
spawn("temple_secret_button_small", 7,19,3, "temple_secret_button_small_12")
	:addConnector("toggle", "temple_secret_door_106", "toggle")
spawn("pressure_plate_hidden", 22,8,0, "pressure_plate_hidden_194")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_13", "activate")
spawn("pressure_plate_hidden", 26,20,0, "pressure_plate_hidden_195")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setActivateOnce(true)
	:setSilent(true)
	:addConnector("activate", "secret_14", "activate")
spawn("boiled_beetle", 12,15,1, "boiled_beetle_4")
spawn("snail_slice", 8,24,1, "snail_slice_3")
spawn("cave_nettle", 10,19,1, "cave_nettle_6")
spawn("cave_nettle", 7,17,3, "cave_nettle_7")
spawn("cave_nettle", 15,11,0, "cave_nettle_8")
spawn("secret", 8,23,0, "secret_20")
spawn("dagger", 12,20,2, "dagger_2")
spawn("skeleton_remains", 12,15,0, "skeleton_remains_8")
spawn("skeleton_remains", 11,21,1, "skeleton_remains_9")
spawn("floor_dirt", 11,16,0, "floor_dirt_7")
spawn("floor_dirt", 8,19,0, "floor_dirt_8")
spawn("floor_dirt", 18,19,2, "floor_dirt_9")
spawn("skeleton_remains", 5,8,0, "skeleton_remains_10")
spawn("skeleton_remains", 19,12,0, "skeleton_remains_11")
spawn("skeleton_remains", 25,13,1, "skeleton_remains_13")
spawn("spawner", 18,8,3, "spawner_45")
	:setSpawnedEntity("crab")
	:setCoolDown(500)
spawn("spawner", 2,16,0, "spawner_48")
	:setSpawnedEntity("spider")
	:setCoolDown(300)
spawn("pressure_plate_hidden", 4,14,0, "pressure_plate_hidden_196")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_45", "activate")
spawn("pressure_plate_hidden", 4,5,0, "pressure_plate_hidden_199")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_45", "activate")
spawn("pressure_plate_hidden", 13,6,0, "pressure_plate_hidden_200")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_48", "activate")
spawn("pressure_plate_hidden", 14,8,0, "pressure_plate_hidden_201")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_48", "activate")
spawn("timer", 8,7,1, "timer_48")
	:setTimerInterval(1000)
	:activate()
	:addConnector("activate", "spawner_45", "activate")
	:addConnector("activate", "spawner_48", "activate")
	:addConnector("activate", "spawner_51", "activate")
	:addConnector("activate", "spawner_50", "activate")
spawn("spawner", 27,11,3, "spawner_50")
	:setSpawnedEntity("crab")
	:setCoolDown(500)
spawn("spawner", 10,16,0, "spawner_51")
	:setSpawnedEntity("spider")
	:setCoolDown(300)
spawn("pressure_plate_hidden", 20,13,0, "pressure_plate_hidden_202")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_50", "activate")
spawn("pressure_plate_hidden", 7,20,0, "pressure_plate_hidden_203")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(false)
	:setTriggeredByItem(false)
	:setSilent(true)
	:addConnector("activate", "spawner_51", "activate")
spawn("nomad_boots", 27,19,0, "nomad_boots_1")
spawn("tattered_cloak", 14,17,1, "tattered_cloak_2")
spawn("slime_bell", 10,22,3, "slime_bell_1")
spawn("fire_quarrel", 8,24,2, "fire_quarrel_1")
spawn("fire_quarrel", 8,24,2, "fire_quarrel_2")
spawn("zone_marker", 16,4,0, "zone_marker_21")
	:setSource("zone = \"ku_cavern\"")
spawn("zone_marker", 13,4,0, "zone_marker_28")
	:setSource("zone = \"ku_cavern.toLowerChambers\"")
spawn("zone_marker", 12,3,0, "zone_marker_29")
	:setSource("zone = \"ku_cavern.toLowerChambers\"")
spawn("zone_marker", 13,2,0, "zone_marker_30")
	:setSource("zone = \"ku_cavern.toLowerChambers\"")
spawn("blocker", 13,3,3, "blocker_46")
spawn("pressure_plate_hidden", 12,3,3, "pressure_plate_hidden_30")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setSilent(true)
	:addConnector("activate", "blocker_46", "deactivate")
spawn("pressure_plate_hidden", 13,2,3, "pressure_plate_hidden_33")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setSilent(true)
	:addConnector("activate", "blocker_46", "deactivate")
spawn("pressure_plate_hidden", 13,4,3, "pressure_plate_hidden_34")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
	:setSilent(true)
	:addConnector("activate", "blocker_46", "deactivate")
spawn("cavern_wall", 8,6,2, "cavern_wall_1")
spawn("zone_marker", 18,5,0, "zone_marker_31")
	:setSource("zone = \"ku_cavern\"")
spawn("cavern_wall", 9,7,3, "cavern_wall_3")
spawn("cavern_wall", 8,8,0, "cavern_wall_4")
spawn("cavern_wall", 7,7,1, "cavern_wall_5")
spawn("cavern_wall", 12,10,3, "cavern_wall_6")
spawn("cavern_wall", 11,9,2, "cavern_wall_7")
spawn("cavern_wall", 10,10,1, "cavern_wall_8")
spawn("cavern_wall", 11,11,0, "cavern_wall_9")
spawn("cavern_wall", 9,14,0, "cavern_wall_11")
spawn("cavern_wall", 8,13,1, "cavern_wall_14")
spawn("cavern_wall", 9,12,2, "cavern_wall_16")
spawn("cavern_wall", 10,13,3, "cavern_wall_10")
spawn("cavern_wall", 7,10,3, "cavern_wall_17")
spawn("cavern_wall", 6,9,2, "cavern_wall_2")
spawn("cavern_wall", 5,10,1, "cavern_wall_12")
spawn("cavern_wall", 6,11,0, "cavern_wall_13")
spawn("cavern_wall", 5,11,3, "cavern_wall_21")
spawn("cavern_wall", 4,10,2, "cavern_wall_15")
spawn("cavern_wall", 3,11,1, "cavern_wall_18")
spawn("cavern_wall", 4,12,0, "cavern_wall_19")
spawn("zone_marker", 6,23,0, "zone_marker_66")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 13,14,0, "zone_marker_67")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 7,22,0, "zone_marker_68")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 6,20,0, "zone_marker_69")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 6,18,0, "zone_marker_70")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 7,17,0, "zone_marker_71")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 9,17,0, "zone_marker_72")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 11,17,0, "zone_marker_73")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 10,19,0, "zone_marker_74")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 8,19,0, "zone_marker_75")
	:setSource("zone = \"ros_cavern\"")
spawn("zone_marker", 11,21,0, "zone_marker_76")
	:setSource("zone = \"ros_cavern\"")
spawn("cavern_wall", 9,18,3, "cavern_wall_25")
spawn("cavern_wall", 8,17,2, "cavern_wall_20")
spawn("cavern_wall", 7,18,1, "cavern_wall_22")
spawn("cavern_wall", 8,19,0, "cavern_wall_23")
spawn("cavern_wall", 11,17,3, "cavern_wall_29")
spawn("cavern_wall", 10,16,2, "cavern_wall_24")
spawn("cavern_wall", 9,17,1, "cavern_wall_26")
spawn("cavern_wall", 10,18,0, "cavern_wall_27")
spawn("cavern_wall", 12,19,3, "cavern_wall_33")
spawn("cavern_wall", 11,18,2, "cavern_wall_28")
spawn("cavern_wall", 10,19,1, "cavern_wall_30")
spawn("cavern_wall", 11,20,0, "cavern_wall_31")
spawn("cavern_wall", 14,13,3, "cavern_wall_37")
spawn("cavern_wall", 13,12,2, "cavern_wall_32")
spawn("cavern_wall", 12,13,1, "cavern_wall_34")
spawn("cavern_wall", 12,13,2, "cavern_wall_39")
spawn("cavern_wall", 11,14,1, "cavern_wall_35")
spawn("cavern_wall", 12,15,0, "cavern_wall_36")
spawn("cavern_wall", 14,11,3, "cavern_wall_43")
spawn("cavern_wall", 13,10,2, "cavern_wall_38")
spawn("cavern_wall", 12,11,1, "cavern_wall_40")
spawn("cavern_wall", 13,12,0, "cavern_wall_41")
spawn("cavern_wall", 23,12,3, "cavern_wall_47")
spawn("cavern_wall", 22,11,2, "cavern_wall_42")
spawn("cavern_wall", 21,12,1, "cavern_wall_44")
spawn("cavern_wall", 22,13,0, "cavern_wall_45")
spawn("cavern_wall", 22,14,3, "cavern_wall_51")
spawn("cavern_wall", 21,13,2, "cavern_wall_46")
spawn("cavern_wall", 20,14,1, "cavern_wall_48")
spawn("cavern_wall", 21,15,0, "cavern_wall_49")
spawn("cavern_wall", 23,15,3, "cavern_wall_55")
spawn("cavern_wall", 22,14,2, "cavern_wall_50")
spawn("cavern_wall", 21,15,1, "cavern_wall_52")
spawn("cavern_wall", 22,16,0, "cavern_wall_53")
spawn("cavern_wall", 25,17,3, "cavern_wall_59")
spawn("cavern_wall", 24,16,2, "cavern_wall_54")
spawn("cavern_wall", 23,17,1, "cavern_wall_56")
spawn("cavern_wall", 24,18,0, "cavern_wall_57")
spawn("cavern_wall", 29,11,3, "cavern_wall_63")
spawn("cavern_wall", 28,10,2, "cavern_wall_58")
spawn("cavern_wall", 27,11,1, "cavern_wall_60")
spawn("cavern_wall", 28,12,0, "cavern_wall_61")
spawn("cavern_wall", 25,13,3, "cavern_wall_67")
spawn("cavern_wall", 24,12,2, "cavern_wall_62")
spawn("cavern_wall", 23,13,1, "cavern_wall_64")
spawn("cavern_wall", 24,14,0, "cavern_wall_65")

--- level 10 ---

mapName("Temple of the Deep")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
#############.....##############
#############.....##############
#############.....##############
#############.....##############
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
]])
spawn("onParty_marker", 17,13,2, "king_advisor")
	:setSource("var1 = \"The Advisor\"\
var2 = \"Hello adventurers!\"")
spawn("script_entity", 13,7,2, "markerScript")
	:setSource("-- Table of markers data\
md = {}\
\
function getMarkersData()\
\9local markers = grimq.fromAllEntitiesInWorld()\
\9\9\9\9:where(\"name\", \"onParty_marker\")\
\9\9\9\9:toIterator()\
\9\9\9\9\
\9for m in markers do\
\9\9-- variables to look for in markers\
\9\9local data = {}\
\9\9if m.var1 then\
\9\9\9data.var1 = m.var1\
\9\9end\
\9\9if m.var2 then\
\9\9\9data.var2 = m.var2\
\9\9end\
\9\9if m.var3 then\
\9\9\9data.var3 = m.var3\
\9\9end\
\9\9setMarker(m.id, m.level, m.x, m.y, data)\
\9end\
end\
\
function moveMarker(id, level, x, y)\
\9local data = md[id]\
\9md[id] = nil\
\9findEntity(id..\".trigger\"):destroy()\
\9setMarker(id, level, x, y, data)\
end\
\
function setMarker(id, level, x, y, data)\
\9md[id] = {}\
\9md[id].level = level\
\9md[id].x = x\
\9md[id].y = y\
\9for i, v in pairs(data) do\
\9\9md[id][i] = v\
\9end\
\9if findEntity(id..\".trigger\") then\
\9\9findEntity(id..\".trigger\"):destroy()\
\9end\
\9spawn(\"pressure_plate_hidden\", level, x, y, 0, id..\".trigger\")\
\9\9:setTriggeredByParty(true)\
\9\9:setTriggeredByMonster(false)\
\9\9:setTriggeredByItem(false)\
\9\9:setSilent(true)\
\9\9:addConnector(\"activate\", \"markerScript\", \"onParty\")\
\9\9:addConnector(\"deactivate\", \"markerScript\", \"onUnparty\")\
end\
\
function removeMarker(id)\
\9md[id] = nil\
\9findEntity(id..\".trigger\"):destroy()\
end\
\
function onParty(trigger)\
\9id = string.sub(trigger.id, 0, -9)\
\9if md[id] then\
\9\9--do anything you want here, calling other functions using stored data. For example:\
\9\9print(\"on:\",id)\
\9end\
end\
\
function onUnparty(trigger)\
\9id = string.sub(trigger.id, 0, -9)\
\9if md[id] then\
\9\9--do anything you want here, calling other functions using stored data. For example:\
\9\9print(\"off:\",id)\
\9end\
end\
\
function autoexec()\
\9getMarkersData()\
end")
spawn("script_entity", 11,13,3, "script_entity_5")
	:setSource("")
spawn("script_entity", 11,15,2, "script_entity_6")
	:setSource("if not(script_entity_5.zone) then\
\9--print(\"Hey!\")\
end")
spawn("onParty_marker", 16,13,2, "onParty_marker_2")
	:setSource("var1 = \"The King\"\
var2 = \"Hello adventurers!\"")

--- level 11 ---

mapName("The Lost Chambers")
setWallSet("temple")
playStream("assets/samples/music/temple_ambient.ogg")
mapDesc([[
##########.......###############
##########..####..#..###########
#############..##.#...##########
#########...#..##.###.##########
######....#...#....##.##########
######.##.####..##.#....########
#####..##.#..#..#..#.##..#######
#####..##.#..####.##.###..######
#########.#.###...#...##..######
#########...#.......#.##########
###########.........#.#..#######
#############.#.#.#.#.#..#######
#############.......#...########
##############.#.#.#############
##############.....#############
################.###############
################.###############
##############..#..#############
################.###############
################.###############
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
################################
]])
spawn("teleporter", 16,16,0, "teleporter_92")
	:setTriggeredByParty(true)
	:setTriggeredByMonster(true)
	:setTriggeredByItem(true)
